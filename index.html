<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Army Command Dashboard - Mission Readiness</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
        }
        
        .glass-card {
            background: rgba(30, 41, 59, 0.5);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(51, 65, 85, 0.3);
        }
        
        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .metric-card:hover {
            transform: translateY(-2px);
            transition: transform 0.2s ease;
            cursor: pointer;
        }
        
        .tab-button {
            transition: all 0.3s ease;
        }
        
        .tab-button.active {
            background: rgba(59, 130, 246, 0.2);
            border-bottom: 2px solid #3b82f6;
        }
        
        .sparkline {
            width: 60px;
            height: 20px;
        }
        
        .timeline-item {
            transition: all 0.2s ease;
        }
        
        .timeline-item:hover {
            background: rgba(59, 130, 246, 0.1);
            cursor: pointer;
        }
        
        .action-icon {
            transition: transform 0.2s ease;
        }
        
        .action-icon:hover {
            transform: scale(1.1);
        }
        
        .drill-through-btn {
            opacity: 0;
            transition: opacity 0.2s ease;
        }
        
        .metric-card:hover .drill-through-btn {
            opacity: 1;
        }
        
        .modal {
            backdrop-filter: blur(10px);
        }
        
        .hidden {
            display: none;
        }
        
        .gauge-container {
            position: relative;
            width: 200px;
            height: 100px;
        }
    </style>
</head>
<body class="gradient-bg min-h-full text-white font-sans">
    <div class="min-h-full p-6">
        <!-- Header -->
        <header class="glass-card rounded-lg p-4 mb-6">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-4">
                    <div class="w-10 h-10 bg-slate-700 rounded-lg flex items-center justify-center">
                        <span class="text-xl font-bold">🧭</span>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold">Army Command Operations Center</h1>
                        <p class="text-slate-300 text-sm">Mission Readiness Dashboard</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="text-right">
                        <div class="text-sm text-slate-400">Current Time</div>
                        <div id="current-time" class="font-mono text-lg"></div>
                    </div>
                    <div class="flex items-center space-x-2">
                        <div class="status-indicator bg-green-500"></div>
                        <span class="text-sm text-slate-300">Systems Online</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Tab Navigation -->
        <div class="glass-card rounded-lg p-1 mb-6">
    <div class="flex space-x-1">
        <button class="tab-button active px-6 py-3 rounded-lg text-sm font-medium" onclick="switchTab(event, 'mission-readiness')">
            Mission Readiness
        </button>
        
        <button class="tab-button px-6 py-3 rounded-lg text-sm font-medium" onclick="switchTab(event, 'human-resources')">
            Human Resources
        </button>
        
        <button class="tab-button px-6 py-3 rounded-lg text-sm font-medium" onclick="switchTab(event, 'mobility')">
            Mobility
        </button>
        
        <button class="tab-button px-6 py-3 rounded-lg text-sm font-medium" onclick="switchTab(event, 'intelligence')">
            Fire Power
        </button>
        
        <button class="tab-button px-6 py-3 rounded-lg text-sm font-medium" onclick="switchTab(event, 'logistics')"> 
            Logistics
        </button>
    </div>
</div>

        <!-- Mission Readiness Tab Content -->
        <div id="mission-readiness-tab" class="tab-content">
            <!-- 1. Readiness Overview Section (Top Panel) -->
            <div class="glass-card rounded-lg p-6 mb-6">
                <h2 class="text-xl font-bold mb-6 flex items-center">
                    <span class="w-3 h-3 bg-blue-500 rounded-full mr-3"></span>
                    Readiness Overview - Summary KPIs
                </h2>
                
                <!-- KPI Cards with Sparklines -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
                    <!-- Personnel Readiness -->
                    <div class="glass-card rounded-lg p-6 relative group cursor-pointer hover:scale-105 transition-all duration-300" onclick="showDrillThrough('personnel')">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-slate-300 text-sm font-medium">Personnel Readiness</h3>
                            <span class="status-indicator bg-green-500"></span>
                        </div>
                        <div class="text-3xl font-bold text-white mb-2">87%</div>
                        <div class="flex items-center space-x-2 mb-3">
                            <svg class="w-4 h-4 text-green-400" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
                            </svg>
                            <span class="text-green-400 text-sm">+3.2%</span>
                        </div>
                        <!-- Mini sparkline -->
                        <div class="h-8 flex items-end space-x-1">
                            <div class="w-1 bg-green-500/30 h-4"></div>
                            <div class="w-1 bg-green-500/40 h-5"></div>
                            <div class="w-1 bg-green-500/50 h-3"></div>
                            <div class="w-1 bg-green-500/60 h-6"></div>
                            <div class="w-1 bg-green-500/70 h-4"></div>
                            <div class="w-1 bg-green-500/80 h-7"></div>
                            <div class="w-1 bg-green-500 h-8"></div>
                        </div>
                        
                        <!-- Floating Popup Insight -->
                        <div class="absolute top-1/2 right-2 transform -translate-y-1/2 w-48 bg-slate-900/95 backdrop-blur-sm rounded-lg p-2.5 opacity-0 group-hover:opacity-100 transition-all duration-300 z-[100] shadow-2xl border border-green-500/30 pointer-events-none">
                            <div class="text-green-400 text-xs font-semibold mb-1">🎯 AI INSIGHT</div>
                            <div class="text-white text-xs font-medium mb-1">Strong Personnel Performance</div>
                            <div class="text-slate-300 text-xs leading-relaxed">
                                • 94% units meet deployment standards<br>
                                • Recent recruitment drive success<br>
                                • Medical readiness at 91%<br>
                                • Maintain current training tempo
                            </div>
                            <!-- Arrow pointing left to card -->
                            <div class="absolute top-4 right-full w-0 h-0 border-t-4 border-b-4 border-r-4 border-t-transparent border-b-transparent border-r-green-500/30"></div>
                        </div>
                    </div>
                    
                    <!-- Equipment Readiness -->
                    <div class="glass-card rounded-lg p-6 relative group cursor-pointer hover:scale-105 transition-all duration-300" onclick="showDrillThrough('equipment')">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-slate-300 text-sm font-medium">Equipment Readiness</h3>
                            <span class="status-indicator bg-yellow-500"></span>
                        </div>
                        <div class="text-3xl font-bold text-white mb-2">74%</div>
                        <div class="flex items-center space-x-2 mb-3">
                            <svg class="w-4 h-4 text-red-400" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M14.707 10.293a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L9 12.586V5a1 1 0 012 0v7.586l2.293-2.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                            </svg>
                            <span class="text-red-400 text-sm">-1.2%</span>
                        </div>
                        <!-- Mini sparkline -->
                        <div class="h-8 flex items-end space-x-1">
                            <div class="w-1 bg-yellow-500/50 h-6"></div>
                            <div class="w-1 bg-yellow-500/60 h-5"></div>
                            <div class="w-1 bg-yellow-500/70 h-4"></div>
                            <div class="w-1 bg-yellow-500/80 h-3"></div>
                            <div class="w-1 bg-red-500/60 h-2"></div>
                            <div class="w-1 bg-red-500/70 h-3"></div>
                            <div class="w-1 bg-red-500 h-4"></div>
                        </div>
                        
                        <!-- Floating Popup Insight -->
                        <div class="absolute top-1/2 right-2 transform -translate-y-1/2 w-48 bg-slate-900/95 backdrop-blur-sm rounded-lg p-2.5 opacity-0 group-hover:opacity-100 transition-all duration-300 z-[100] shadow-2xl border border-yellow-500/30 pointer-events-none">
                            <div class="text-yellow-400 text-xs font-semibold mb-1">⚠️ AI ALERT</div>
                            <div class="text-white text-xs font-medium mb-1">Equipment Maintenance Backlog</div>
                            <div class="text-slate-300 text-xs leading-relaxed">
                                • Western Command: 45% operational<br>
                                • 127 vehicles need immediate service<br>
                                • Est. 3 weeks to clear backlog<br>
                                • Recommend resource reallocation
                            </div>
                            <!-- Arrow pointing left to card -->
                            <div class="absolute top-4 right-full w-0 h-0 border-t-4 border-b-4 border-r-4 border-t-transparent border-b-transparent border-r-yellow-500/30"></div>
                        </div>
                    </div>
                    
                    <!-- Training Readiness -->
                    <div class="glass-card rounded-lg p-6 relative group cursor-pointer hover:scale-105 transition-all duration-300" onclick="showDrillThrough('training')">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-slate-300 text-sm font-medium">Training Readiness</h3>
                            <span class="status-indicator bg-green-500"></span>
                        </div>
                        <div class="text-3xl font-bold text-white mb-2">92%</div>
                        <div class="flex items-center space-x-2 mb-3">
                            <svg class="w-4 h-4 text-green-400" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
                            </svg>
                            <span class="text-green-400 text-sm">+0.8%</span>
                        </div>
                        <!-- Mini sparkline -->
                        <div class="h-8 flex items-end space-x-1">
                            <div class="w-1 bg-green-500/40 h-5"></div>
                            <div class="w-1 bg-green-500/50 h-6"></div>
                            <div class="w-1 bg-green-500/60 h-7"></div>
                            <div class="w-1 bg-green-500/70 h-6"></div>
                            <div class="w-1 bg-green-500/80 h-8"></div>
                            <div class="w-1 bg-green-500/90 h-7"></div>
                            <div class="w-1 bg-green-500 h-8"></div>
                        </div>
                        
                        <!-- Floating Popup Insight -->
                        <div class="absolute top-1/2 right-2 transform -translate-y-1/2 w-48 bg-slate-900/95 backdrop-blur-sm rounded-lg p-2.5 opacity-0 group-hover:opacity-100 transition-all duration-300 z-[100] shadow-2xl border border-green-500/30 pointer-events-none">
                            <div class="text-green-400 text-xs font-semibold mb-1">✅ AI INSIGHT</div>
                            <div class="text-white text-xs font-medium mb-1">Excellent Training Progress</div>
                            <div class="text-slate-300 text-xs leading-relaxed">
                                • 96% combat operations certified<br>
                                • Leadership training ahead of schedule<br>
                                • 234 personnel in advanced programs<br>
                                • Continue current training tempo
                            </div>
                            <!-- Arrow pointing left to card -->
                            <div class="absolute top-4 right-full w-0 h-0 border-t-4 border-b-4 border-r-4 border-t-transparent border-b-transparent border-r-green-500/30"></div>
                        </div>
                    </div>
                    
                    <!-- Supply Readiness -->
                    <div class="glass-card rounded-lg p-6 relative group cursor-pointer hover:scale-105 transition-all duration-300" onclick="showDrillThrough('supply')">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-slate-300 text-sm font-medium">Supply Readiness</h3>
                            <span class="status-indicator bg-yellow-500"></span>
                        </div>
                        <div class="text-3xl font-bold text-white mb-2">79%</div>
                        <div class="flex items-center space-x-2 mb-3">
                            <svg class="w-4 h-4 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
                            </svg>
                            <span class="text-yellow-400 text-sm">+0.5%</span>
                        </div>
                        <!-- Mini sparkline -->
                        <div class="h-8 flex items-end space-x-1">
                            <div class="w-1 bg-yellow-500/40 h-4"></div>
                            <div class="w-1 bg-yellow-500/50 h-5"></div>
                            <div class="w-1 bg-yellow-500/60 h-4"></div>
                            <div class="w-1 bg-yellow-500/70 h-6"></div>
                            <div class="w-1 bg-yellow-500/80 h-5"></div>
                            <div class="w-1 bg-yellow-500/90 h-6"></div>
                            <div class="w-1 bg-yellow-500 h-7"></div>
                        </div>
                        
                        <!-- Floating Popup Insight -->
                        <div class="absolute top-1/2 right-2 transform -translate-y-1/2 w-48 bg-slate-900/95 backdrop-blur-sm rounded-lg p-2.5 opacity-0 group-hover:opacity-100 transition-all duration-300 z-[100] shadow-2xl border border-yellow-500/30 pointer-events-none">
                            <div class="text-yellow-400 text-xs font-semibold mb-1">📦 AI INSIGHT</div>
                            <div class="text-white text-xs font-medium mb-1">Supply Chain Optimization</div>
                            <div class="text-slate-300 text-xs leading-relaxed">
                                • Western Command: 12 days fuel left<br>
                                • Emergency resupply en route<br>
                                • Optimize logistics routes needed<br>
                                • Consider strategic reserves
                            </div>
                            <!-- Arrow pointing left to card -->
                            <div class="absolute top-4 right-full w-0 h-0 border-t-4 border-b-4 border-r-4 border-t-transparent border-b-transparent border-r-yellow-500/30"></div>
                        </div>
                    </div>
                </div>

                <!-- Overall Composite Score and Units Distribution -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                    <!-- Overall Composite Score Gauge -->
                    <div class="glass-card rounded-lg p-6">
                        <h2 class="text-lg font-semibold text-white mb-6">Overall Composite Score</h2>
                        <div class="relative">
                            <div class="text-center mb-4">
                                <div class="text-4xl font-bold text-white mb-2">78%</div>
                                <div class="text-yellow-400 font-medium">AT RISK</div>
                            </div>
                            <!-- Gauge Bar -->
                            <div class="w-full bg-slate-700 rounded-full h-4 mb-4">
                                <div class="bg-gradient-to-r from-red-500 via-yellow-500 to-green-500 h-4 rounded-full relative">
                                    <!-- Score indicator -->
                                    <div class="absolute top-0 h-4 w-1 bg-white rounded-full shadow-lg" style="left: 78%;"></div>
                                </div>
                            </div>
                            <div class="flex justify-between text-xs text-slate-400">
                                <span>0%</span>
                                <span class="text-red-400">Critical</span>
                                <span class="text-yellow-400">At Risk</span>
                                <span class="text-green-400">Ready</span>
                                <span>100%</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Units Readiness Distribution -->
                    <div class="lg:col-span-2 glass-card rounded-lg p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-lg font-semibold text-white">Units Readiness Distribution</h2>
                            <div class="text-sm text-slate-400">Click bars for details</div>
                        </div>
                        
                        <!-- Bar Chart -->
                        <div class="relative h-80">
                            <!-- Y-axis with grid lines -->
                            <div class="absolute left-0 top-0 h-full w-12 flex flex-col justify-between text-xs text-slate-400 pr-2">
                                <span class="relative -top-2">100%</span>
                                <span class="relative -top-2">80%</span>
                                <span class="relative -top-2">60%</span>
                                <span class="relative -top-2">40%</span>
                                <span class="relative -top-2">20%</span>
                                <span class="relative -top-2">0%</span>
                            </div>
                            
                            <!-- Grid lines -->
                            <div class="absolute left-12 top-0 right-0 h-full">
                                <div class="absolute top-0 w-full border-t border-slate-600/40"></div>
                                <div class="absolute top-1/5 w-full border-t border-slate-600/20"></div>
                                <div class="absolute top-2/5 w-full border-t border-slate-600/20"></div>
                                <div class="absolute top-3/5 w-full border-t border-slate-600/20"></div>
                                <div class="absolute top-4/5 w-full border-t border-slate-600/20"></div>
                                <div class="absolute bottom-0 w-full border-t border-slate-600/40"></div>
                            </div>
                            
                            <!-- Chart bars area -->
                            <div class="absolute left-12 top-0 right-0 bottom-16 flex items-end justify-around px-4">
                                <!-- Alpha Company Bar -->
                                <div class="flex flex-col items-center cursor-pointer group" onclick="showUnitDetails('Alpha Company', 92)">
                                    <div class="w-16 bg-green-500 rounded-t-lg shadow-lg group-hover:shadow-green-500/30 transition-all group-hover:scale-105" style="height: 230px;"></div>
                                </div>
                                
                                <!-- Bravo Company Bar -->
                                <div class="flex flex-col items-center cursor-pointer group" onclick="showUnitDetails('Bravo Company', 78)">
                                    <div class="w-16 bg-yellow-500 rounded-t-lg shadow-lg group-hover:shadow-yellow-500/30 transition-all group-hover:scale-105" style="height: 195px;"></div>
                                </div>
                                
                                <!-- Charlie Company Bar -->
                                <div class="flex flex-col items-center cursor-pointer group" onclick="showUnitDetails('Charlie Company', 85)">
                                    <div class="w-16 bg-green-500 rounded-t-lg shadow-lg group-hover:shadow-green-500/30 transition-all group-hover:scale-105" style="height: 213px;"></div>
                                </div>
                                
                                <!-- Delta Company Bar -->
                                <div class="flex flex-col items-center cursor-pointer group" onclick="showUnitDetails('Delta Company', 67)">
                                    <div class="w-16 bg-red-500 rounded-t-lg shadow-lg group-hover:shadow-red-500/30 transition-all group-hover:scale-105" style="height: 168px;"></div>
                                </div>
                                
                                <!-- Echo Company Bar -->
                                <div class="flex flex-col items-center cursor-pointer group" onclick="showUnitDetails('Echo Company', 81)">
                                    <div class="w-16 bg-yellow-500 rounded-t-lg shadow-lg group-hover:shadow-yellow-500/30 transition-all group-hover:scale-105" style="height: 203px;"></div>
                                </div>
                                
                                <!-- Support Battalion Bar -->
                                <div class="flex flex-col items-center cursor-pointer group" onclick="showUnitDetails('Support Battalion', 74)">
                                    <div class="w-16 bg-yellow-500 rounded-t-lg shadow-lg group-hover:shadow-yellow-500/30 transition-all group-hover:scale-105" style="height: 185px;"></div>
                                </div>
                            </div>
                            
                            <!-- X-axis labels -->
                            <div class="absolute left-12 bottom-0 right-0 h-16 flex items-center justify-around px-4">
                                <div class="text-center">
                                    <div class="text-xs text-slate-300 font-medium">Alpha Co.</div>
                                    <div class="text-xs text-green-400 font-bold mt-1">92%</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs text-slate-300 font-medium">Bravo Co.</div>
                                    <div class="text-xs text-yellow-400 font-bold mt-1">78%</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs text-slate-300 font-medium">Charlie Co.</div>
                                    <div class="text-xs text-green-400 font-bold mt-1">85%</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs text-slate-300 font-medium">Delta Co.</div>
                                    <div class="text-xs text-red-400 font-bold mt-1">67%</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs text-slate-300 font-medium">Echo Co.</div>
                                    <div class="text-xs text-yellow-400 font-bold mt-1">81%</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs text-slate-300 font-medium">Support Btn.</div>
                                    <div class="text-xs text-yellow-400 font-bold mt-1">74%</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 2. Regional/Unit Readiness Distribution (Middle Panel) -->
            <!-- Regional/Unit Readiness Distribution -->
            <div class="mb-8">
                <h2 class="text-xl font-bold mb-6 flex items-center">
                    <span class="w-3 h-3 bg-blue-500 rounded-full mr-3"></span>
                    Regional/Unit Readiness Distribution
                </h2>
                
                <!-- Overall Statistics -->
                <div class="grid grid-cols-1 md:grid-cols-5 gap-4 mb-6">
                    <div class="glass-card rounded-lg p-4 text-center">
                        <div class="text-2xl font-bold text-white mb-1">12</div>
                        <div class="text-slate-300 text-sm">Total Commands</div>
                    </div>
                    <div class="glass-card rounded-lg p-4 text-center">
                        <div class="text-2xl font-bold text-white mb-1">47</div>
                        <div class="text-slate-300 text-sm">Active Units</div>
                    </div>
                    <div class="glass-card rounded-lg p-4 text-center">
                        <div class="text-2xl font-bold text-white mb-1">78%</div>
                        <div class="text-slate-300 text-sm">Avg Readiness</div>
                    </div>
                    <div class="glass-card rounded-lg p-4 text-center">
                        <div class="text-2xl font-bold text-green-400 mb-1">8</div>
                        <div class="text-slate-300 text-sm">High Ready Commands</div>
                    </div>
                    <div class="glass-card rounded-lg p-4 text-center">
                        <div class="text-2xl font-bold text-red-400 mb-1">4</div>
                        <div class="text-slate-300 text-sm">Needs Attention</div>
                    </div>
                </div>



            </div>

            <div class="glass-card rounded-lg p-6 mb-6">
                <h2 class="text-xl font-bold mb-6 flex items-center">
                    <span class="w-3 h-3 bg-blue-500 rounded-full mr-3"></span>
                    Military Command Zones Readiness Status
                </h2>
                
                <div class="overflow-x-auto">
                    <table class="w-full text-sm">
                        <thead>
                            <tr class="border-b border-slate-700">
                                <th class="text-left py-3 px-3 text-slate-300 font-medium">Command Zone</th>
                                <th class="text-left py-3 px-3 text-slate-300 font-medium">Readiness Level</th>
                                <th class="text-left py-3 px-3 text-slate-300 font-medium">Status</th>
                                <th class="text-left py-3 px-3 text-slate-300 font-medium">Active Units</th>
                                <th class="text-left py-3 px-3 text-slate-300 font-medium">Last Update</th>
                                <th class="text-left py-3 px-3 text-slate-300 font-medium">Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="border-b border-slate-800 hover:bg-slate-800/30 transition-colors">
                                <td class="py-4 px-3 font-medium">Northern Command</td>
                                <td class="py-4 px-3">
                                    <div class="flex items-center space-x-2">
                                        <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                        <span class="text-green-400 font-semibold">94%</span>
                                    </div>
                                </td>
                                <td class="py-4 px-3">
                                    <span class="px-2 py-1 bg-green-500/20 text-green-400 rounded-full text-xs font-medium">Ready</span>
                                </td>
                                <td class="py-4 px-3 font-medium">12</td>
                                <td class="py-4 px-3 text-slate-400">2 min ago</td>
                                <td class="py-4 px-3">
                                    <button onclick="showUnitDetails('Northern Command')" class="px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded text-xs transition-colors">View</button>
                                </td>
                            </tr>
                            <tr class="border-b border-slate-800 hover:bg-slate-800/30 transition-colors">
                                <td class="py-4 px-3 font-medium">Eastern Command</td>
                                <td class="py-4 px-3">
                                    <div class="flex items-center space-x-2">
                                        <div class="w-2 h-2 bg-yellow-500 rounded-full"></div>
                                        <span class="text-yellow-400 font-semibold">76%</span>
                                    </div>
                                </td>
                                <td class="py-4 px-3">
                                    <span class="px-2 py-1 bg-yellow-500/20 text-yellow-400 rounded-full text-xs font-medium">At Risk</span>
                                </td>
                                <td class="py-4 px-3 font-medium">8</td>
                                <td class="py-4 px-3 text-slate-400">5 min ago</td>
                                <td class="py-4 px-3">
                                    <button onclick="showUnitDetails('Eastern Command')" class="px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded text-xs transition-colors">View</button>
                                </td>
                            </tr>
                            <tr class="border-b border-slate-800 hover:bg-slate-800/30 transition-colors">
                                <td class="py-4 px-3 font-medium">Southern Command</td>
                                <td class="py-4 px-3">
                                    <div class="flex items-center space-x-2">
                                        <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                        <span class="text-green-400 font-semibold">89%</span>
                                    </div>
                                </td>
                                <td class="py-4 px-3">
                                    <span class="px-2 py-1 bg-green-500/20 text-green-400 rounded-full text-xs font-medium">Ready</span>
                                </td>
                                <td class="py-4 px-3 font-medium">15</td>
                                <td class="py-4 px-3 text-slate-400">1 min ago</td>
                                <td class="py-4 px-3">
                                    <button onclick="showUnitDetails('Southern Command')" class="px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded text-xs transition-colors">View</button>
                                </td>
                            </tr>
                            <tr class="border-b border-slate-800 hover:bg-slate-800/30 transition-colors">
                                <td class="py-4 px-3 font-medium">Western Command</td>
                                <td class="py-4 px-3">
                                    <div class="flex items-center space-x-2">
                                        <div class="w-2 h-2 bg-red-500 rounded-full"></div>
                                        <span class="text-red-400 font-semibold">68%</span>
                                    </div>
                                </td>
                                <td class="py-4 px-3">
                                    <span class="px-2 py-1 bg-red-500/20 text-red-400 rounded-full text-xs font-medium">Critical</span>
                                </td>
                                <td class="py-4 px-3 font-medium">10</td>
                                <td class="py-4 px-3 text-slate-400">3 min ago</td>
                                <td class="py-4 px-3">
                                    <button onclick="showUnitDetails('Western Command')" class="px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded text-xs transition-colors">View</button>
                                </td>
                            </tr>
                            <tr class="hover:bg-slate-800/30 transition-colors">
                                <td class="py-4 px-3 font-medium">Central Command</td>
                                <td class="py-4 px-3">
                                    <div class="flex items-center space-x-2">
                                        <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                        <span class="text-green-400 font-semibold">91%</span>
                                    </div>
                                </td>
                                <td class="py-4 px-3">
                                    <span class="px-2 py-1 bg-green-500/20 text-green-400 rounded-full text-xs font-medium">Ready</span>
                                </td>
                                <td class="py-4 px-3 font-medium">18</td>
                                <td class="py-4 px-3 text-slate-400">4 min ago</td>
                                <td class="py-4 px-3">
                                    <button onclick="showUnitDetails('Central Command')" class="px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded text-xs transition-colors">View</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Mission Timeline & Risk Indicators -->
            <div class="mb-8">
                <div class="flex items-center mb-6">
                    <span class="text-2xl mr-3">🔹</span>
                    <h2 class="text-xl font-semibold text-white">Mission Timeline & Risk Indicators</h2>
                </div>

                <!-- Mission Overview Stats -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                    <div class="glass-card rounded-lg p-4 text-center">
                        <div class="text-2xl font-bold text-white mb-1">8</div>
                        <div class="text-slate-300 text-sm">Active Missions</div>
                    </div>
                    <div class="glass-card rounded-lg p-4 text-center">
                        <div class="text-2xl font-bold text-green-400 mb-1">5</div>
                        <div class="text-slate-300 text-sm">Ready to Deploy</div>
                    </div>
                    <div class="glass-card rounded-lg p-4 text-center">
                        <div class="text-2xl font-bold text-yellow-400 mb-1">2</div>
                        <div class="text-slate-300 text-sm">At Risk</div>
                    </div>
                    <div class="glass-card rounded-lg p-4 text-center">
                        <div class="text-2xl font-bold text-red-400 mb-1">1</div>
                        <div class="text-slate-300 text-sm">Critical Issues</div>
                    </div>
                </div>

                <!-- Mission Gantt Chart -->
                <div class="glass-card rounded-lg p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-white">Mission Timeline - Gantt Chart</h3>
                        <div class="flex items-center space-x-4 text-sm">
                            <div class="flex items-center space-x-2">
                                <div class="w-3 h-3 bg-blue-500 rounded"></div>
                                <span class="text-slate-300">Planning</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-3 h-3 bg-yellow-500 rounded"></div>
                                <span class="text-slate-300">Preparation</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-3 h-3 bg-green-500 rounded"></div>
                                <span class="text-slate-300">Execution</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-3 h-3 bg-red-500 rounded"></div>
                                <span class="text-slate-300">Critical Path</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Timeline Header -->
                    <div class="mb-4">
                        <div class="grid grid-cols-12 gap-1 text-xs text-slate-400 text-center mb-2">
                            <div class="col-span-3"></div>
                            <div>Dec 15</div>
                            <div>Dec 20</div>
                            <div>Dec 25</div>
                            <div>Dec 30</div>
                            <div>Jan 5</div>
                            <div>Jan 10</div>
                            <div>Jan 15</div>
                            <div>Jan 20</div>
                            <div>Jan 25</div>
                        </div>
                        <div class="grid grid-cols-12 gap-1 mb-4">
                            <div class="col-span-3"></div>
                            <div class="h-px bg-slate-600"></div>
                            <div class="h-px bg-slate-600"></div>
                            <div class="h-px bg-slate-600"></div>
                            <div class="h-px bg-slate-600"></div>
                            <div class="h-px bg-slate-600"></div>
                            <div class="h-px bg-slate-600"></div>
                            <div class="h-px bg-slate-600"></div>
                            <div class="h-px bg-slate-600"></div>
                            <div class="h-px bg-slate-600"></div>
                        </div>
                    </div>
                    
                    <!-- Gantt Chart Rows -->
                    <div class="space-y-3">
                        <!-- Operation Taming Sari -->
                        <div class="grid grid-cols-12 gap-1 items-center group hover:bg-slate-800/30 p-2 rounded transition-colors cursor-pointer" onclick="showMissionDetails('Operation Taming Sari')">
                            <div class="col-span-3 pr-4">
                                <div class="font-medium text-white">Operation Taming Sari</div>
                                <div class="text-xs text-slate-400">Northern Command</div>
                                <div class="flex items-center space-x-1 mt-1">
                                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                    <span class="text-xs text-green-400">94% Ready</span>
                                </div>
                            </div>
                            <!-- Planning Phase -->
                            <div class="relative">
                                <div class="h-6 bg-blue-500 rounded-l-lg opacity-80"></div>
                                <div class="absolute inset-0 flex items-center justify-center text-xs text-white font-medium">P</div>
                            </div>
                            <!-- Preparation Phase -->
                            <div class="relative">
                                <div class="h-6 bg-yellow-500 opacity-80"></div>
                                <div class="absolute inset-0 flex items-center justify-center text-xs text-white font-medium">Prep</div>
                            </div>
                            <div class="relative">
                                <div class="h-6 bg-yellow-500 rounded-r-lg opacity-80"></div>
                            </div>
                            <!-- Execution Phase -->
                            <div class="relative">
                                <div class="h-6 bg-green-500 rounded-l-lg opacity-80"></div>
                                <div class="absolute inset-0 flex items-center justify-center text-xs text-white font-medium">Exec</div>
                            </div>
                            <div class="relative">
                                <div class="h-6 bg-green-500 rounded-r-lg opacity-80"></div>
                            </div>
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                        </div>
                        
                        <!-- Operation Helang -->
                        <div class="grid grid-cols-12 gap-1 items-center group hover:bg-slate-800/30 p-2 rounded transition-colors cursor-pointer" onclick="showMissionDetails('Operation Helang')">
                            <div class="col-span-3 pr-4">
                                <div class="font-medium text-white">Operation Helang</div>
                                <div class="text-xs text-slate-400">Eastern Command</div>
                                <div class="flex items-center space-x-1 mt-1">
                                    <div class="w-2 h-2 bg-yellow-500 rounded-full"></div>
                                    <span class="text-xs text-yellow-400">76% At Risk</span>
                                </div>
                            </div>
                            <div></div>
                            <!-- Planning Phase -->
                            <div class="relative">
                                <div class="h-6 bg-blue-500 rounded-lg opacity-80"></div>
                                <div class="absolute inset-0 flex items-center justify-center text-xs text-white font-medium">Plan</div>
                            </div>
                            <div></div>
                            <!-- Preparation Phase (Critical Path) -->
                            <div class="relative">
                                <div class="h-6 bg-red-500 rounded-l-lg opacity-90 shadow-lg"></div>
                                <div class="absolute inset-0 flex items-center justify-center text-xs text-white font-medium">Prep</div>
                            </div>
                            <div class="relative">
                                <div class="h-6 bg-red-500 opacity-90 shadow-lg"></div>
                            </div>
                            <div class="relative">
                                <div class="h-6 bg-red-500 rounded-r-lg opacity-90 shadow-lg"></div>
                            </div>
                            <!-- Execution Phase -->
                            <div class="relative">
                                <div class="h-6 bg-green-500 rounded-l-lg opacity-80"></div>
                                <div class="absolute inset-0 flex items-center justify-center text-xs text-white font-medium">Exec</div>
                            </div>
                            <div class="relative">
                                <div class="h-6 bg-green-500 rounded-r-lg opacity-80"></div>
                            </div>
                        </div>
                        
                        <!-- Operation Wau -->
                        <div class="grid grid-cols-12 gap-1 items-center group hover:bg-slate-800/30 p-2 rounded transition-colors cursor-pointer" onclick="showMissionDetails('Operation Wau')">
                            <div class="col-span-3 pr-4">
                                <div class="font-medium text-white">Operation Wau</div>
                                <div class="text-xs text-slate-400">Western Command</div>
                                <div class="flex items-center space-x-1 mt-1">
                                    <div class="w-2 h-2 bg-red-500 rounded-full"></div>
                                    <span class="text-xs text-red-400">68% Critical</span>
                                </div>
                            </div>
                            <div></div>
                            <div></div>
                            <!-- Planning Phase -->
                            <div class="relative">
                                <div class="h-6 bg-blue-500 rounded-lg opacity-80"></div>
                                <div class="absolute inset-0 flex items-center justify-center text-xs text-white font-medium">Plan</div>
                            </div>
                            <div></div>
                            <!-- Preparation Phase (Delayed) -->
                            <div class="relative">
                                <div class="h-6 bg-red-500 rounded-l-lg opacity-90 shadow-lg border-2 border-red-300"></div>
                                <div class="absolute inset-0 flex items-center justify-center text-xs text-white font-medium">Prep</div>
                            </div>
                            <div class="relative">
                                <div class="h-6 bg-red-500 opacity-90 shadow-lg border-2 border-red-300"></div>
                            </div>
                            <div class="relative">
                                <div class="h-6 bg-red-500 opacity-90 shadow-lg border-2 border-red-300"></div>
                            </div>
                            <div class="relative">
                                <div class="h-6 bg-red-500 rounded-r-lg opacity-90 shadow-lg border-2 border-red-300"></div>
                            </div>
                        </div>
                        
                        <!-- Training Exercise Alpha -->
                        <div class="grid grid-cols-12 gap-1 items-center group hover:bg-slate-800/30 p-2 rounded transition-colors">
                            <div class="col-span-3 pr-4">
                                <div class="font-medium text-white">Training Exercise Alpha</div>
                                <div class="text-xs text-slate-400">Multi-Command</div>
                                <div class="flex items-center space-x-1 mt-1">
                                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                    <span class="text-xs text-green-400">89% Ready</span>
                                </div>
                            </div>
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                            <!-- Preparation -->
                            <div class="relative">
                                <div class="h-6 bg-yellow-500 rounded-lg opacity-80"></div>
                                <div class="absolute inset-0 flex items-center justify-center text-xs text-white font-medium">Prep</div>
                            </div>
                            <!-- Execution -->
                            <div class="relative">
                                <div class="h-6 bg-green-500 rounded-l-lg opacity-80"></div>
                                <div class="absolute inset-0 flex items-center justify-center text-xs text-white font-medium">Train</div>
                            </div>
                            <div class="relative">
                                <div class="h-6 bg-green-500 rounded-r-lg opacity-80"></div>
                            </div>
                            <div></div>
                            <div></div>
                        </div>
                        
                        <!-- Supply Chain Optimization -->
                        <div class="grid grid-cols-12 gap-1 items-center group hover:bg-slate-800/30 p-2 rounded transition-colors">
                            <div class="col-span-3 pr-4">
                                <div class="font-medium text-white">Supply Chain Optimization</div>
                                <div class="text-xs text-slate-400">Logistics Command</div>
                                <div class="flex items-center space-x-1 mt-1">
                                    <div class="w-2 h-2 bg-blue-500 rounded-full"></div>
                                    <span class="text-xs text-blue-400">Ongoing</span>
                                </div>
                            </div>
                            <!-- Continuous Process -->
                            <div class="relative">
                                <div class="h-6 bg-blue-500 rounded-l-lg opacity-60"></div>
                            </div>
                            <div class="relative">
                                <div class="h-6 bg-blue-500 opacity-60"></div>
                            </div>
                            <div class="relative">
                                <div class="h-6 bg-blue-500 opacity-60"></div>
                            </div>
                            <div class="relative">
                                <div class="h-6 bg-blue-500 opacity-60"></div>
                            </div>
                            <div class="relative">
                                <div class="h-6 bg-blue-500 opacity-60"></div>
                            </div>
                            <div class="relative">
                                <div class="h-6 bg-blue-500 opacity-60"></div>
                            </div>
                            <div class="relative">
                                <div class="h-6 bg-blue-500 opacity-60"></div>
                            </div>
                            <div class="relative">
                                <div class="h-6 bg-blue-500 opacity-60"></div>
                            </div>
                            <div class="relative">
                                <div class="h-6 bg-blue-500 rounded-r-lg opacity-60"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Current Date Indicator -->
                    <div class="relative mt-4">
                        <div class="grid grid-cols-12 gap-1">
                            <div class="col-span-3"></div>
                            <div></div>
                            <div class="relative">
                                <div class="absolute top-0 left-1/2 transform -translate-x-1/2 w-0.5 h-32 bg-red-400 opacity-80 -mt-32"></div>
                                <div class="absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-2 text-xs text-red-400 font-medium whitespace-nowrap -mt-32">
                                    Today
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Risk Indicators -->
                    <div class="mt-6 pt-6 border-t border-slate-700">
                        <h4 class="font-semibold mb-4 text-slate-300">Critical Dependencies & Risk Factors</h4>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="p-3 bg-red-500/10 rounded-lg border border-red-500/20">
                                <div class="flex items-center space-x-2 mb-2">
                                    <div class="w-2 h-2 bg-red-500 rounded-full"></div>
                                    <span class="font-medium text-red-400">High Risk</span>
                                </div>
                                <div class="text-sm text-slate-300">Operation Wau equipment shortages may delay timeline by 2-3 weeks</div>
                            </div>
                            <div class="p-3 bg-yellow-500/10 rounded-lg border border-yellow-500/20">
                                <div class="flex items-center space-x-2 mb-2">
                                    <div class="w-2 h-2 bg-yellow-500 rounded-full"></div>
                                    <span class="font-medium text-yellow-400">Medium Risk</span>
                                </div>
                                <div class="text-sm text-slate-300">Operation Helang depends on equipment reallocation from Northern Command</div>
                            </div>
                            <div class="p-3 bg-blue-500/10 rounded-lg border border-blue-500/20">
                                <div class="flex items-center space-x-2 mb-2">
                                    <div class="w-2 h-2 bg-blue-500 rounded-full"></div>
                                    <span class="font-medium text-blue-400">Monitoring</span>
                                </div>
                                <div class="text-sm text-slate-300">Weather conditions may impact Training Exercise Alpha outdoor activities</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Decision Support Insights -->
            <div class="mb-8">
                <div class="flex items-center mb-6">
                    <span class="text-2xl mr-3">🔹</span>
                    <h2 class="text-xl font-semibold text-white">Decision Support Insights</h2>
                </div>

                <!-- Action Center Grid -->
                <div class="glass-card rounded-lg p-6">
                    <h3 class="text-lg font-semibold text-white mb-6">Action Center</h3>

                    <!-- Action Items Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <!-- Equipment Reallocation -->
                        <div class="group cursor-pointer bg-slate-800/50 hover:bg-slate-700/50 border border-slate-600 hover:border-red-500/50 rounded-lg p-4 transition-all duration-300 hover:scale-105" onclick="showActionDetails('equipment-reallocation')">
                            <div class="flex items-start space-x-3">
                                <div class="w-12 h-12 bg-red-500/20 rounded-lg flex items-center justify-center group-hover:bg-red-500/30 transition-colors">
                                    <svg class="w-6 h-6 text-red-400" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"/>
                                    </svg>
                                </div>
                                <div class="flex-1">
                                    <div class="flex items-center space-x-2 mb-2">
                                        <h4 class="text-white font-medium">Equipment Reallocation</h4>
                                        <span class="px-2 py-1 bg-red-500/20 text-red-400 text-xs rounded-full">Critical</span>
                                    </div>
                                    <p class="text-slate-300 text-sm mb-3">Redistribute equipment from high-ready units to critical missions</p>
                                    <div class="flex items-center justify-between">
                                        <span class="text-slate-400 text-xs">Affects: 3 Commands</span>
                                        <div class="flex items-center space-x-1 text-blue-400 text-xs">
                                            <span>View Workflow</span>
                                            <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"/>
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Training Optimization -->
                        <div class="group cursor-pointer bg-slate-800/50 hover:bg-slate-700/50 border border-slate-600 hover:border-yellow-500/50 rounded-lg p-4 transition-all duration-300 hover:scale-105" onclick="showActionDetails('training-optimization')">
                            <div class="flex items-start space-x-3">
                                <div class="w-12 h-12 bg-yellow-500/20 rounded-lg flex items-center justify-center group-hover:bg-yellow-500/30 transition-colors">
                                    <svg class="w-6 h-6 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                    </svg>
                                </div>
                                <div class="flex-1">
                                    <div class="flex items-center space-x-2 mb-2">
                                        <h4 class="text-white font-medium">Training Optimization</h4>
                                        <span class="px-2 py-1 bg-yellow-500/20 text-yellow-400 text-xs rounded-full">Opportunity</span>
                                    </div>
                                    <p class="text-slate-300 text-sm mb-3">Cross-command training to improve specialist qualifications</p>
                                    <div class="flex items-center justify-between">
                                        <span class="text-slate-400 text-xs">Impact: +8% Readiness</span>
                                        <div class="flex items-center space-x-1 text-blue-400 text-xs">
                                            <span>View Plan</span>
                                            <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"/>
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Supply Chain Resilience -->
                        <div class="group cursor-pointer bg-slate-800/50 hover:bg-slate-700/50 border border-slate-600 hover:border-blue-500/50 rounded-lg p-4 transition-all duration-300 hover:scale-105" onclick="showActionDetails('supply-resilience')">
                            <div class="flex items-start space-x-3">
                                <div class="w-12 h-12 bg-blue-500/20 rounded-lg flex items-center justify-center group-hover:bg-blue-500/30 transition-colors">
                                    <svg class="w-6 h-6 text-blue-400" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"/>
                                    </svg>
                                </div>
                                <div class="flex-1">
                                    <div class="flex items-center space-x-2 mb-2">
                                        <h4 class="text-white font-medium">Supply Chain Resilience</h4>
                                        <span class="px-2 py-1 bg-blue-500/20 text-blue-400 text-xs rounded-full">Strategic</span>
                                    </div>
                                    <p class="text-slate-300 text-sm mb-3">Implement distributed supply model for improved resilience</p>
                                    <div class="flex items-center justify-between">
                                        <span class="text-slate-400 text-xs">Timeline: 6 months</span>
                                        <div class="flex items-center space-x-1 text-blue-400 text-xs">
                                            <span>View Strategy</span>
                                            <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"/>
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Personnel Redistribution -->
                        <div class="group cursor-pointer bg-slate-800/50 hover:bg-slate-700/50 border border-slate-600 hover:border-green-500/50 rounded-lg p-4 transition-all duration-300 hover:scale-105" onclick="showActionDetails('personnel-redistribution')">
                            <div class="flex items-start space-x-3">
                                <div class="w-12 h-12 bg-green-500/20 rounded-lg flex items-center justify-center group-hover:bg-green-500/30 transition-colors">
                                    <svg class="w-6 h-6 text-green-400" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"/>
                                    </svg>
                                </div>
                                <div class="flex-1">
                                    <div class="flex items-center space-x-2 mb-2">
                                        <h4 class="text-white font-medium">Personnel Redistribution</h4>
                                        <span class="px-2 py-1 bg-green-500/20 text-green-400 text-xs rounded-full">Recommended</span>
                                    </div>
                                    <p class="text-slate-300 text-sm mb-3">Reassign specialists to fill critical capability gaps</p>
                                    <div class="flex items-center justify-between">
                                        <span class="text-slate-400 text-xs">Affects: 127 Personnel</span>
                                        <div class="flex items-center space-x-1 text-blue-400 text-xs">
                                            <span>View Details</span>
                                            <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"/>
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Emergency Response Protocol -->
                        <div class="group cursor-pointer bg-slate-800/50 hover:bg-slate-700/50 border border-slate-600 hover:border-purple-500/50 rounded-lg p-4 transition-all duration-300 hover:scale-105" onclick="showActionDetails('emergency-response')">
                            <div class="flex items-start space-x-3">
                                <div class="w-12 h-12 bg-purple-500/20 rounded-lg flex items-center justify-center group-hover:bg-purple-500/30 transition-colors">
                                    <svg class="w-6 h-6 text-purple-400" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                                    </svg>
                                </div>
                                <div class="flex-1">
                                    <div class="flex items-center space-x-2 mb-2">
                                        <h4 class="text-white font-medium">Emergency Response Protocol</h4>
                                        <span class="px-2 py-1 bg-purple-500/20 text-purple-400 text-xs rounded-full">Urgent</span>
                                    </div>
                                    <p class="text-slate-300 text-sm mb-3">Activate emergency supply dispatch to Western Command</p>
                                    <div class="flex items-center justify-between">
                                        <span class="text-slate-400 text-xs">ETA: 18 hours</span>
                                        <div class="flex items-center space-x-1 text-blue-400 text-xs">
                                            <span>Activate</span>
                                            <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"/>
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Mission Timeline Adjustment -->
                        <div class="group cursor-pointer bg-slate-800/50 hover:bg-slate-700/50 border border-slate-600 hover:border-orange-500/50 rounded-lg p-4 transition-all duration-300 hover:scale-105" onclick="showActionDetails('timeline-adjustment')">
                            <div class="flex items-start space-x-3">
                                <div class="w-12 h-12 bg-orange-500/20 rounded-lg flex items-center justify-center group-hover:bg-orange-500/30 transition-colors">
                                    <svg class="w-6 h-6 text-orange-400" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"/>
                                    </svg>
                                </div>
                                <div class="flex-1">
                                    <div class="flex items-center space-x-2 mb-2">
                                        <h4 class="text-white font-medium">Mission Timeline Adjustment</h4>
                                        <span class="px-2 py-1 bg-orange-500/20 text-orange-400 text-xs rounded-full">Planning</span>
                                    </div>
                                    <p class="text-slate-300 text-sm mb-3">Optimize mission schedules based on current readiness levels</p>
                                    <div class="flex items-center justify-between">
                                        <span class="text-slate-400 text-xs">3 Missions Affected</span>
                                        <div class="flex items-center space-x-1 text-blue-400 text-xs">
                                            <span>Review</span>
                                            <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"/>
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>




        </div>

        <!-- Other Tab Placeholders -->
        <div id="human-resources-tab" class="tab-content hidden">
            <!-- Human Resource Tab Content -->
            <div id="humanResourceContent">
                <!-- Personnel Strength Overview -->
                <div class="mb-8">
                    <!-- KPI Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <!-- Active Personnel -->
                        <div class="glass-card rounded-lg p-6 relative group cursor-pointer hover:scale-105 transition-all duration-300">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-slate-300 text-sm font-medium">Active Personnel</h3>
                                <span class="status-indicator bg-green-500"></span>
                            </div>
                            <div class="text-3xl font-bold text-white mb-2">25,400</div>
                            <div class="flex items-center space-x-2 mb-3">
                                <svg class="w-4 h-4 text-red-400" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M14.707 10.293a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L9 12.586V5a1 1 0 012 0v7.586l2.293-2.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                </svg>
                                <span class="text-red-400 text-sm">-1.2%</span>
                            </div>
                            <div class="text-slate-400 text-xs">vs last month</div>
                            <!-- Mini sparkline -->
                            <div class="h-8 flex items-end space-x-1 mt-2">
                                <div class="w-1 bg-red-500/40 h-6"></div>
                                <div class="w-1 bg-red-500/50 h-5"></div>
                                <div class="w-1 bg-red-500/60 h-4"></div>
                                <div class="w-1 bg-red-500/50 h-5"></div>
                                <div class="w-1 bg-red-500/40 h-4"></div>
                                <div class="w-1 bg-red-500/30 h-3"></div>
                                <div class="w-1 bg-red-500/20 h-3"></div>
                            </div>
                            
                            <!-- Floating Popup Insight -->
                            <div class="absolute top-1/2 right-2 transform -translate-y-1/2 w-48 bg-slate-900/95 backdrop-blur-sm rounded-lg p-2.5 opacity-0 group-hover:opacity-100 transition-all duration-300 z-[100] shadow-2xl border border-blue-500/30 pointer-events-none">
                                <div class="text-blue-400 text-xs font-semibold mb-1">🎯 AI INSIGHT</div>
                                <div class="text-white text-xs font-medium mb-1">Personnel Trend Analysis</div>
                                <div class="text-slate-300 text-xs leading-relaxed">
                                    • Seasonal discharge pattern detected<br>
                                    • Retention rates stable at 87%<br>
                                    • New recruitment drive needed<br>
                                    • Focus on critical MOS shortages
                                </div>
                                <!-- Arrow pointing left to card -->
                                <div class="absolute top-4 right-full w-0 h-0 border-t-4 border-b-4 border-r-4 border-t-transparent border-b-transparent border-r-blue-500/30"></div>
                            </div>
                        </div>

                        <!-- Deployment Ready -->
                        <div class="glass-card rounded-lg p-6 relative group cursor-pointer hover:scale-105 transition-all duration-300">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-slate-300 text-sm font-medium">Deployment Ready</h3>
                                <span class="status-indicator bg-green-500"></span>
                            </div>
                            <div class="text-3xl font-bold text-white mb-2">22,100</div>
                            <div class="flex items-center space-x-2 mb-3">
                                <svg class="w-4 h-4 text-green-400" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
                                </svg>
                                <span class="text-green-400 text-sm">+2.1%</span>
                            </div>
                            <div class="text-slate-400 text-xs">87% of active force</div>
                            <!-- Mini sparkline -->
                            <div class="h-8 flex items-end space-x-1 mt-2">
                                <div class="w-1 bg-green-500/40 h-4"></div>
                                <div class="w-1 bg-green-500/50 h-5"></div>
                                <div class="w-1 bg-green-500/60 h-6"></div>
                                <div class="w-1 bg-green-500/70 h-5"></div>
                                <div class="w-1 bg-green-500/80 h-7"></div>
                                <div class="w-1 bg-green-500/90 h-6"></div>
                                <div class="w-1 bg-green-500 h-8"></div>
                            </div>
                            
                            <!-- Floating Popup Insight -->
                            <div class="absolute top-1/2 right-2 transform -translate-y-1/2 w-48 bg-slate-900/95 backdrop-blur-sm rounded-lg p-2.5 opacity-0 group-hover:opacity-100 transition-all duration-300 z-[100] shadow-2xl border border-green-500/30 pointer-events-none">
                                <div class="text-green-400 text-xs font-semibold mb-1">✅ AI INSIGHT</div>
                                <div class="text-white text-xs font-medium mb-1">Deployment Readiness Strong</div>
                                <div class="text-slate-300 text-xs leading-relaxed">
                                    • Medical clearance rate: 94%<br>
                                    • Training compliance: 91%<br>
                                    • Equipment assignment: 89%<br>
                                    • Ready for immediate deployment
                                </div>
                                <!-- Arrow pointing left to card -->
                                <div class="absolute top-4 right-full w-0 h-0 border-t-4 border-b-4 border-r-4 border-t-transparent border-b-transparent border-r-green-500/30"></div>
                            </div>
                        </div>

                        <!-- Critical Specialties -->
                        <div class="glass-card rounded-lg p-6 relative group cursor-pointer hover:scale-105 transition-all duration-300">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-slate-300 text-sm font-medium">Critical Specialties</h3>
                                <span class="status-indicator bg-yellow-500"></span>
                            </div>
                            <div class="text-3xl font-bold text-white mb-2">74%</div>
                            <div class="flex items-center space-x-2 mb-3">
                                <svg class="w-4 h-4 text-red-400" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M14.707 10.293a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L9 12.586V5a1 1 0 012 0v7.586l2.293-2.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                </svg>
                                <span class="text-red-400 text-sm">-3.4%</span>
                            </div>
                            <div class="text-slate-400 text-xs">Fill rate</div>
                            <!-- Mini sparkline -->
                            <div class="h-8 flex items-end space-x-1 mt-2">
                                <div class="w-1 bg-yellow-500/60 h-6"></div>
                                <div class="w-1 bg-yellow-500/50 h-5"></div>
                                <div class="w-1 bg-red-500/40 h-4"></div>
                                <div class="w-1 bg-red-500/50 h-3"></div>
                                <div class="w-1 bg-red-500/60 h-2"></div>
                                <div class="w-1 bg-red-500/70 h-3"></div>
                                <div class="w-1 bg-red-500 h-4"></div>
                            </div>
                            
                            <!-- Floating Popup Insight -->
                            <div class="absolute top-1/2 right-2 transform -translate-y-1/2 w-48 bg-slate-900/95 backdrop-blur-sm rounded-lg p-2.5 opacity-0 group-hover:opacity-100 transition-all duration-300 z-[100] shadow-2xl border border-yellow-500/30 pointer-events-none">
                                <div class="text-yellow-400 text-xs font-semibold mb-1">⚠️ AI ALERT</div>
                                <div class="text-white text-xs font-medium mb-1">Critical Skills Shortage</div>
                                <div class="text-slate-300 text-xs leading-relaxed">
                                    • Cyber specialists: 58% filled<br>
                                    • Medical personnel: 67% filled<br>
                                    • Technical maintenance: 71% filled<br>
                                    • Accelerate training programs
                                </div>
                                <!-- Arrow pointing left to card -->
                                <div class="absolute top-4 right-full w-0 h-0 border-t-4 border-b-4 border-r-4 border-t-transparent border-b-transparent border-r-yellow-500/30"></div>
                            </div>
                        </div>

                        <!-- Retention Rate -->
                        <div class="glass-card rounded-lg p-6 relative group cursor-pointer hover:scale-105 transition-all duration-300">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-slate-300 text-sm font-medium">Retention Rate</h3>
                                <span class="status-indicator bg-green-500"></span>
                            </div>
                            <div class="text-3xl font-bold text-white mb-2">87%</div>
                            <div class="flex items-center space-x-2 mb-3">
                                <svg class="w-4 h-4 text-green-400" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
                                </svg>
                                <span class="text-green-400 text-sm">+1.8%</span>
                            </div>
                            <div class="text-slate-400 text-xs">12-month average</div>
                            <!-- Mini sparkline -->
                            <div class="h-8 flex items-end space-x-1 mt-2">
                                <div class="w-1 bg-green-500/50 h-5"></div>
                                <div class="w-1 bg-green-500/60 h-6"></div>
                                <div class="w-1 bg-green-500/70 h-5"></div>
                                <div class="w-1 bg-green-500/80 h-7"></div>
                                <div class="w-1 bg-green-500/70 h-6"></div>
                                <div class="w-1 bg-green-500/90 h-7"></div>
                                <div class="w-1 bg-green-500 h-8"></div>
                            </div>
                            
                            <!-- Floating Popup Insight -->
                            <div class="absolute top-1/2 right-2 transform -translate-y-1/2 w-48 bg-slate-900/95 backdrop-blur-sm rounded-lg p-2.5 opacity-0 group-hover:opacity-100 transition-all duration-300 z-[100] shadow-2xl border border-green-500/30 pointer-events-none">
                                <div class="text-green-400 text-xs font-semibold mb-1">📈 AI INSIGHT</div>
                                <div class="text-white text-xs font-medium mb-1">Retention Improving</div>
                                <div class="text-slate-300 text-xs leading-relaxed">
                                    • Career development programs effective<br>
                                    • Family support initiatives working<br>
                                    • Competitive compensation package<br>
                                    • Continue current retention strategies
                                </div>
                                <!-- Arrow pointing left to card -->
                                <div class="absolute top-4 right-full w-0 h-0 border-t-4 border-b-4 border-r-4 border-t-transparent border-b-transparent border-r-green-500/30"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Actual vs Required Personnel by Command Chart -->
                    <div class="glass-card rounded-lg p-6 mb-8">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-xl font-semibold text-white">Actual vs Required Personnel by Command</h2>
                            <div class="flex items-center space-x-4">
                                <div class="flex items-center space-x-2 text-sm text-slate-400">
                                    <div class="w-3 h-3 bg-blue-500 rounded"></div>
                                    <span>Actual Personnel</span>
                                </div>
                                <div class="flex items-center space-x-2 text-sm text-slate-400">
                                    <div class="w-3 h-3 bg-slate-600 rounded"></div>
                                    <span>Required Personnel</span>
                                </div>
                            </div>
                        </div>

                        <!-- Horizontal Bar Chart -->
                        <div class="relative h-80 mb-6">
                            <!-- Y-axis labels -->
                            <div class="absolute left-0 top-0 h-full w-32 flex flex-col justify-around text-sm text-slate-300 pr-4">
                                <div class="text-right">Northern Command</div>
                                <div class="text-right">Eastern Command</div>
                                <div class="text-right">Southern Command</div>
                                <div class="text-right">Western Command</div>
                                <div class="text-right">Central Command</div>
                            </div>
                            
                            <!-- Chart area -->
                            <div class="absolute left-32 top-0 right-0 h-full">
                                <!-- X-axis grid lines -->
                                <div class="absolute inset-0">
                                    <div class="absolute left-0 top-0 bottom-0 w-px border-l border-slate-600/40"></div>
                                    <div class="absolute left-1/5 top-0 bottom-0 w-px border-l border-slate-600/20"></div>
                                    <div class="absolute left-2/5 top-0 bottom-0 w-px border-l border-slate-600/20"></div>
                                    <div class="absolute left-3/5 top-0 bottom-0 w-px border-l border-slate-600/20"></div>
                                    <div class="absolute left-4/5 top-0 bottom-0 w-px border-l border-slate-600/20"></div>
                                    <div class="absolute right-0 top-0 bottom-0 w-px border-l border-slate-600/40"></div>
                                </div>
                                
                                <!-- Bars container -->
                                <div class="absolute inset-0 flex flex-col justify-around py-4">
                                    <!-- Northern Command Bar -->
                                    <div class="flex items-center h-10 relative group cursor-pointer" onclick="showPersonnelDetails('Northern Command', 96)">
                                        <div class="relative w-full h-8 bg-slate-700/30 rounded-lg overflow-hidden group-hover:bg-slate-600/40 transition-all">
                                            <!-- Required Personnel Background (5,200) -->
                                            <div class="absolute left-0 top-0 h-full bg-slate-600 rounded-lg" style="width: 84.5%;"></div>
                                            <!-- Actual Personnel (4,987 out of 6,150 max scale) -->
                                            <div class="absolute left-0 top-0 h-full bg-gradient-to-r from-green-500 to-green-400 rounded-lg transition-all duration-1000 group-hover:from-green-400 group-hover:to-green-300" style="width: 81.1%;"></div>
                                        </div>
                                        <!-- Data labels -->
                                        <div class="absolute right-2 top-0 h-full flex items-center text-xs text-white font-medium">
                                            4,987 / 5,200 (96%)
                                        </div>
                                    </div>

                                    <!-- Eastern Command Bar -->
                                    <div class="flex items-center h-10 relative group cursor-pointer" onclick="showPersonnelDetails('Eastern Command', 88)">
                                        <div class="relative w-full h-8 bg-slate-700/30 rounded-lg overflow-hidden group-hover:bg-slate-600/40 transition-all">
                                            <!-- Required Personnel Background (4,800) -->
                                            <div class="absolute left-0 top-0 h-full bg-slate-600 rounded-lg" style="width: 78.0%;"></div>
                                            <!-- Actual Personnel (4,234 out of 6,150 max scale) -->
                                            <div class="absolute left-0 top-0 h-full bg-gradient-to-r from-yellow-500 to-yellow-400 rounded-lg transition-all duration-1000 group-hover:from-yellow-400 group-hover:to-yellow-300" style="width: 68.8%;"></div>
                                        </div>
                                        <!-- Data labels -->
                                        <div class="absolute right-2 top-0 h-full flex items-center text-xs text-white font-medium">
                                            4,234 / 4,800 (88%)
                                        </div>
                                    </div>

                                    <!-- Southern Command Bar -->
                                    <div class="flex items-center h-10 relative group cursor-pointer" onclick="showPersonnelDetails('Southern Command', 96)">
                                        <div class="relative w-full h-8 bg-slate-700/30 rounded-lg overflow-hidden group-hover:bg-slate-600/40 transition-all">
                                            <!-- Required Personnel Background (6,100) -->
                                            <div class="absolute left-0 top-0 h-full bg-slate-600 rounded-lg" style="width: 99.2%;"></div>
                                            <!-- Actual Personnel (5,834 out of 6,150 max scale) -->
                                            <div class="absolute left-0 top-0 h-full bg-gradient-to-r from-green-500 to-green-400 rounded-lg transition-all duration-1000 group-hover:from-green-400 group-hover:to-green-300" style="width: 94.9%;"></div>
                                        </div>
                                        <!-- Data labels -->
                                        <div class="absolute right-2 top-0 h-full flex items-center text-xs text-white font-medium">
                                            5,834 / 6,100 (96%)
                                        </div>
                                    </div>

                                    <!-- Western Command Bar -->
                                    <div class="flex items-center h-10 relative group cursor-pointer" onclick="showPersonnelDetails('Western Command', 84)">
                                        <div class="relative w-full h-8 bg-slate-700/30 rounded-lg overflow-hidden group-hover:bg-slate-600/40 transition-all">
                                            <!-- Required Personnel Background (4,500) -->
                                            <div class="absolute left-0 top-0 h-full bg-slate-600 rounded-lg" style="width: 73.2%;"></div>
                                            <!-- Actual Personnel (3,789 out of 6,150 max scale) -->
                                            <div class="absolute left-0 top-0 h-full bg-gradient-to-r from-red-500 to-red-400 rounded-lg transition-all duration-1000 group-hover:from-red-400 group-hover:to-red-300" style="width: 61.6%;"></div>
                                        </div>
                                        <!-- Data labels -->
                                        <div class="absolute right-2 top-0 h-full flex items-center text-xs text-white font-medium">
                                            3,789 / 4,500 (84%)
                                        </div>
                                    </div>

                                    <!-- Central Command Bar -->
                                    <div class="flex items-center h-10 relative group cursor-pointer" onclick="showPersonnelDetails('Central Command', 93)">
                                        <div class="relative w-full h-8 bg-slate-700/30 rounded-lg overflow-hidden group-hover:bg-slate-600/40 transition-all">
                                            <!-- Required Personnel Background (4,900) -->
                                            <div class="absolute left-0 top-0 h-full bg-slate-600 rounded-lg" style="width: 79.7%;"></div>
                                            <!-- Actual Personnel (4,556 out of 6,150 max scale) -->
                                            <div class="absolute left-0 top-0 h-full bg-gradient-to-r from-green-500 to-green-400 rounded-lg transition-all duration-1000 group-hover:from-green-400 group-hover:to-green-300" style="width: 74.1%;"></div>
                                        </div>
                                        <!-- Data labels -->
                                        <div class="absolute right-2 top-0 h-full flex items-center text-xs text-white font-medium">
                                            4,556 / 4,900 (93%)
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- X-axis labels -->
                                <div class="absolute bottom-0 left-0 right-0 h-8 flex items-center justify-between text-xs text-slate-400 px-2">
                                    <span>0</span>
                                    <span>1,230</span>
                                    <span>2,460</span>
                                    <span>3,690</span>
                                    <span>4,920</span>
                                    <span>6,150</span>
                                </div>
                            </div>
                        </div>

                        <!-- Summary Statistics -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                            <div class="text-center p-3 glass-card rounded-lg">
                                <div class="text-lg font-bold text-white">25,400</div>
                                <div class="text-xs text-slate-400">Total Assigned</div>
                            </div>
                            <div class="text-center p-3 glass-card rounded-lg">
                                <div class="text-lg font-bold text-white">26,500</div>
                                <div class="text-xs text-slate-400">Total Required</div>
                            </div>
                            <div class="text-center p-3 glass-card rounded-lg">
                                <div class="text-lg font-bold text-yellow-400">95.9%</div>
                                <div class="text-xs text-slate-400">Overall Fill Rate</div>
                            </div>
                            <div class="text-center p-3 glass-card rounded-lg">
                                <div class="text-lg font-bold text-red-400">1,100</div>
                                <div class="text-xs text-slate-400">Personnel Shortage</div>
                            </div>
                        </div>
                    </div>

                    <!-- Personnel Trends Over Time Chart -->
                    <div class="glass-card rounded-lg p-6 mb-8">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-xl font-semibold text-white">Personnel Trends Over Time</h2>
                            <div class="flex items-center space-x-4">
                                <div class="flex items-center space-x-2 text-sm text-slate-400">
                                    <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
                                    <span>Active Personnel</span>
                                </div>
                                <div class="flex items-center space-x-2 text-sm text-slate-400">
                                    <div class="w-3 h-3 bg-orange-500 rounded-full"></div>
                                    <span>On Leave</span>
                                </div>
                            </div>
                        </div>

                        <!-- Chart Container -->
                        <div class="relative h-80 mb-6">
                            <!-- Y-axis with grid lines -->
                            <div class="absolute left-0 top-0 h-full w-16 flex flex-col justify-between text-xs text-slate-400 pr-2">
                                <span class="relative -top-2">26,000</span>
                                <span class="relative -top-2">24,000</span>
                                <span class="relative -top-2">22,000</span>
                                <span class="relative -top-2">20,000</span>
                                <span class="relative -top-2">18,000</span>
                                <span class="relative -top-2">16,000</span>
                            </div>
                            
                            <!-- Grid lines -->
                            <div class="absolute left-16 top-0 right-0 h-full">
                                <div class="absolute top-0 w-full border-t border-slate-600/40"></div>
                                <div class="absolute top-1/5 w-full border-t border-slate-600/20"></div>
                                <div class="absolute top-2/5 w-full border-t border-slate-600/20"></div>
                                <div class="absolute top-3/5 w-full border-t border-slate-600/20"></div>
                                <div class="absolute top-4/5 w-full border-t border-slate-600/20"></div>
                                <div class="absolute bottom-0 w-full border-t border-slate-600/40"></div>
                            </div>
                            
                            <!-- Chart area -->
                            <div class="absolute left-16 top-0 right-0 bottom-16">
                                <!-- SVG for line chart -->
                                <svg class="w-full h-full" viewBox="0 0 800 240" preserveAspectRatio="none">
                                    <!-- Active Personnel Line (Blue) -->
                                    <polyline
                                        fill="none"
                                        stroke="#3b82f6"
                                        stroke-width="3"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        points="0,60 80,65 160,58 240,62 320,55 400,68 480,52 560,48 640,45 720,42 800,38"
                                        class="drop-shadow-lg"
                                    />
                                    <!-- Active Personnel Data Points -->
                                    <circle cx="0" cy="60" r="4" fill="#3b82f6" class="hover:r-6 transition-all cursor-pointer" onclick="showDataPoint('Jan', 25400, 1200)"/>
                                    <circle cx="80" cy="65" r="4" fill="#3b82f6" class="hover:r-6 transition-all cursor-pointer" onclick="showDataPoint('Feb', 25300, 1350)"/>
                                    <circle cx="160" cy="58" r="4" fill="#3b82f6" class="hover:r-6 transition-all cursor-pointer" onclick="showDataPoint('Mar', 25500, 1180)"/>
                                    <circle cx="240" cy="62" r="4" fill="#3b82f6" class="hover:r-6 transition-all cursor-pointer" onclick="showDataPoint('Apr', 25450, 1280)"/>
                                    <circle cx="320" cy="55" r="4" fill="#3b82f6" class="hover:r-6 transition-all cursor-pointer" onclick="showDataPoint('May', 25600, 1150)"/>
                                    <circle cx="400" cy="68" r="4" fill="#3b82f6" class="hover:r-6 transition-all cursor-pointer" onclick="showDataPoint('Jun', 25250, 1420)"/>
                                    <circle cx="480" cy="52" r="4" fill="#3b82f6" class="hover:r-6 transition-all cursor-pointer" onclick="showDataPoint('Jul', 25650, 1100)"/>
                                    <circle cx="560" cy="48" r="4" fill="#3b82f6" class="hover:r-6 transition-all cursor-pointer" onclick="showDataPoint('Aug', 25750, 1050)"/>
                                    <circle cx="640" cy="45" r="4" fill="#3b82f6" class="hover:r-6 transition-all cursor-pointer" onclick="showDataPoint('Sep', 25800, 980)"/>
                                    <circle cx="720" cy="42" r="4" fill="#3b82f6" class="hover:r-6 transition-all cursor-pointer" onclick="showDataPoint('Oct', 25850, 920)"/>
                                    <circle cx="800" cy="38" r="4" fill="#3b82f6" class="hover:r-6 transition-all cursor-pointer" onclick="showDataPoint('Nov', 25900, 850)"/>

                                    <!-- On Leave Line (Orange) -->
                                    <polyline
                                        fill="none"
                                        stroke="#f97316"
                                        stroke-width="3"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        points="0,210 80,205 160,215 240,208 320,218 400,195 480,220 560,222 640,225 720,228 800,232"
                                        class="drop-shadow-lg"
                                    />
                                    <!-- On Leave Data Points -->
                                    <circle cx="0" cy="210" r="4" fill="#f97316" class="hover:r-6 transition-all cursor-pointer" onclick="showDataPoint('Jan', 25400, 1200)"/>
                                    <circle cx="80" cy="205" r="4" fill="#f97316" class="hover:r-6 transition-all cursor-pointer" onclick="showDataPoint('Feb', 25300, 1350)"/>
                                    <circle cx="160" cy="215" r="4" fill="#f97316" class="hover:r-6 transition-all cursor-pointer" onclick="showDataPoint('Mar', 25500, 1180)"/>
                                    <circle cx="240" cy="208" r="4" fill="#f97316" class="hover:r-6 transition-all cursor-pointer" onclick="showDataPoint('Apr', 25450, 1280)"/>
                                    <circle cx="320" cy="218" r="4" fill="#f97316" class="hover:r-6 transition-all cursor-pointer" onclick="showDataPoint('May', 25600, 1150)"/>
                                    <circle cx="400" cy="195" r="4" fill="#f97316" class="hover:r-6 transition-all cursor-pointer" onclick="showDataPoint('Jun', 25250, 1420)"/>
                                    <circle cx="480" cy="220" r="4" fill="#f97316" class="hover:r-6 transition-all cursor-pointer" onclick="showDataPoint('Jul', 25650, 1100)"/>
                                    <circle cx="560" cy="222" r="4" fill="#f97316" class="hover:r-6 transition-all cursor-pointer" onclick="showDataPoint('Aug', 25750, 1050)"/>
                                    <circle cx="640" cy="225" r="4" fill="#f97316" class="hover:r-6 transition-all cursor-pointer" onclick="showDataPoint('Sep', 25800, 980)"/>
                                    <circle cx="720" cy="228" r="4" fill="#f97316" class="hover:r-6 transition-all cursor-pointer" onclick="showDataPoint('Oct', 25850, 920)"/>
                                    <circle cx="800" cy="232" r="4" fill="#f97316" class="hover:r-6 transition-all cursor-pointer" onclick="showDataPoint('Nov', 25900, 850)"/>
                                </svg>
                            </div>
                            
                            <!-- X-axis labels -->
                            <div class="absolute left-16 bottom-0 right-0 h-16 flex items-center justify-between px-2">
                                <div class="text-center">
                                    <div class="text-xs text-slate-300 font-medium">Jan</div>
                                    <div class="text-xs text-slate-500 mt-1">2024</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs text-slate-300 font-medium">Feb</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs text-slate-300 font-medium">Mar</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs text-slate-300 font-medium">Apr</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs text-slate-300 font-medium">May</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs text-slate-300 font-medium">Jun</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs text-slate-300 font-medium">Jul</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs text-slate-300 font-medium">Aug</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs text-slate-300 font-medium">Sep</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs text-slate-300 font-medium">Oct</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs text-slate-300 font-medium">Nov</div>
                                    <div class="text-xs text-slate-500 mt-1">Current</div>
                                </div>
                            </div>
                        </div>

                        <!-- Trend Analysis Summary -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                            <div class="text-center p-3 glass-card rounded-lg">
                                <div class="text-lg font-bold text-blue-400">25,900</div>
                                <div class="text-xs text-slate-400">Current Active</div>
                                <div class="text-xs text-green-400 mt-1">↑ +500 vs Jan</div>
                            </div>
                            <div class="text-center p-3 glass-card rounded-lg">
                                <div class="text-lg font-bold text-orange-400">850</div>
                                <div class="text-xs text-slate-400">Currently On Leave</div>
                                <div class="text-xs text-green-400 mt-1">↓ -350 vs Jan</div>
                            </div>
                            <div class="text-center p-3 glass-card rounded-lg">
                                <div class="text-lg font-bold text-green-400">96.8%</div>
                                <div class="text-xs text-slate-400">Availability Rate</div>
                                <div class="text-xs text-green-400 mt-1">↑ +1.5% vs Jan</div>
                            </div>
                            <div class="text-center p-3 glass-card rounded-lg">
                                <div class="text-lg font-bold text-slate-300">3.2%</div>
                                <div class="text-xs text-slate-400">Leave Rate</div>
                                <div class="text-xs text-green-400 mt-1">↓ -1.5% vs Jan</div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <!-- Skill Distribution Donut Chart -->
            <div class="glass-card rounded-lg p-6 mb-8">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-xl font-semibold text-white">Personnel Skill Distribution</h2>
                    <div class="flex items-center space-x-4 text-sm">
                        <div class="flex items-center space-x-2 text-slate-400">
                            <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
                            <span>Combat Operations</span>
                        </div>
                        <div class="flex items-center space-x-2 text-slate-400">
                            <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                            <span>Technical/Engineering</span>
                        </div>
                        <div class="flex items-center space-x-2 text-slate-400">
                            <div class="w-3 h-3 bg-purple-500 rounded-full"></div>
                            <span>Medical/Support</span>
                        </div>
                        <div class="flex items-center space-x-2 text-slate-400">
                            <div class="w-3 h-3 bg-orange-500 rounded-full"></div>
                            <span>Intelligence/Cyber</span>
                        </div>
                        <div class="flex items-center space-x-2 text-slate-400">
                            <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                            <span>Logistics/Admin</span>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Donut Chart -->
                    <div class="flex items-center justify-center">
                        <div class="relative w-80 h-80">
                            <!-- SVG Donut Chart -->
                            <svg class="w-full h-full transform -rotate-90" viewBox="0 0 200 200">
                                <!-- Background circle -->
                                <circle cx="100" cy="100" r="80" fill="none" stroke="#374151" stroke-width="20"/>
                                
                                <!-- Combat Operations - 35% (126 degrees) -->
                                <circle cx="100" cy="100" r="80" fill="none" stroke="#3b82f6" stroke-width="20"
                                    stroke-dasharray="175.9 502.7" stroke-dashoffset="0" 
                                    class="transition-all duration-1000 hover:stroke-width-24 cursor-pointer"
                                    onclick="showSkillDetails('Combat Operations', 35, 8925)"/>
                                
                                <!-- Technical/Engineering - 28% (101 degrees) -->
                                <circle cx="100" cy="100" r="80" fill="none" stroke="#10b981" stroke-width="20"
                                    stroke-dasharray="140.7 502.7" stroke-dashoffset="-175.9"
                                    class="transition-all duration-1000 hover:stroke-width-24 cursor-pointer"
                                    onclick="showSkillDetails('Technical/Engineering', 28, 7140)"/>
                                
                                <!-- Medical/Support - 18% (65 degrees) -->
                                <circle cx="100" cy="100" r="80" fill="none" stroke="#8b5cf6" stroke-width="20"
                                    stroke-dasharray="90.5 502.7" stroke-dashoffset="-316.6"
                                    class="transition-all duration-1000 hover:stroke-width-24 cursor-pointer"
                                    onclick="showSkillDetails('Medical/Support', 18, 4590)"/>
                                
                                <!-- Intelligence/Cyber - 12% (43 degrees) -->
                                <circle cx="100" cy="100" r="80" fill="none" stroke="#f97316" stroke-width="20"
                                    stroke-dasharray="60.3 502.7" stroke-dashoffset="-407.1"
                                    class="transition-all duration-1000 hover:stroke-width-24 cursor-pointer"
                                    onclick="showSkillDetails('Intelligence/Cyber', 12, 3060)"/>
                                
                                <!-- Logistics/Admin - 7% (25 degrees) -->
                                <circle cx="100" cy="100" r="80" fill="none" stroke="#eab308" stroke-width="20"
                                    stroke-dasharray="35.2 502.7" stroke-dashoffset="-467.4"
                                    class="transition-all duration-1000 hover:stroke-width-24 cursor-pointer"
                                    onclick="showSkillDetails('Logistics/Admin', 7, 1785)"/>
                            </svg>
                            
                            <!-- Center content -->
                            <div class="absolute inset-0 flex items-center justify-center">
                                <div class="text-center">
                                    <div class="text-3xl font-bold text-white">25,500</div>
                                    <div class="text-sm text-slate-400">Total Personnel</div>
                                    <div class="text-xs text-green-400 mt-1">Skilled & Qualified</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Skill Breakdown Details -->
                    <div class="space-y-4">
                        <h3 class="text-lg font-semibold text-white mb-4">Detailed Skill Breakdown</h3>
                        
                        <!-- Combat Operations -->
                        <div class="group cursor-pointer bg-slate-800/30 hover:bg-slate-700/40 rounded-lg p-4 transition-all duration-300 border border-transparent hover:border-blue-500/30" onclick="showSkillDetails('Combat Operations', 35, 8925)">
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center space-x-3">
                                    <div class="w-4 h-4 bg-blue-500 rounded-full"></div>
                                    <span class="font-medium text-white">Combat Operations</span>
                                </div>
                                <div class="text-right">
                                    <div class="text-blue-400 font-bold">8,925</div>
                                    <div class="text-xs text-slate-400">35%</div>
                                </div>
                            </div>
                            <div class="w-full bg-slate-700 rounded-full h-2 mb-2">
                                <div class="bg-blue-500 h-2 rounded-full transition-all duration-1000" style="width: 35%"></div>
                            </div>
                            <div class="text-xs text-slate-400">Infantry, Armor, Artillery, Special Forces</div>
                        </div>

                        <!-- Technical/Engineering -->
                        <div class="group cursor-pointer bg-slate-800/30 hover:bg-slate-700/40 rounded-lg p-4 transition-all duration-300 border border-transparent hover:border-green-500/30" onclick="showSkillDetails('Technical/Engineering', 28, 7140)">
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center space-x-3">
                                    <div class="w-4 h-4 bg-green-500 rounded-full"></div>
                                    <span class="font-medium text-white">Technical/Engineering</span>
                                </div>
                                <div class="text-right">
                                    <div class="text-green-400 font-bold">7,140</div>
                                    <div class="text-xs text-slate-400">28%</div>
                                </div>
                            </div>
                            <div class="w-full bg-slate-700 rounded-full h-2 mb-2">
                                <div class="bg-green-500 h-2 rounded-full transition-all duration-1000" style="width: 28%"></div>
                            </div>
                            <div class="text-xs text-slate-400">Maintenance, Engineering, Communications, IT</div>
                        </div>

                        <!-- Medical/Support -->
                        <div class="group cursor-pointer bg-slate-800/30 hover:bg-slate-700/40 rounded-lg p-4 transition-all duration-300 border border-transparent hover:border-purple-500/30" onclick="showSkillDetails('Medical/Support', 18, 4590)">
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center space-x-3">
                                    <div class="w-4 h-4 bg-purple-500 rounded-full"></div>
                                    <span class="font-medium text-white">Medical/Support</span>
                                </div>
                                <div class="text-right">
                                    <div class="text-purple-400 font-bold">4,590</div>
                                    <div class="text-xs text-slate-400">18%</div>
                                </div>
                            </div>
                            <div class="w-full bg-slate-700 rounded-full h-2 mb-2">
                                <div class="bg-purple-500 h-2 rounded-full transition-all duration-1000" style="width: 18%"></div>
                            </div>
                            <div class="text-xs text-slate-400">Medical, Chaplain, Legal, Human Resources</div>
                        </div>

                        <!-- Intelligence/Cyber -->
                        <div class="group cursor-pointer bg-slate-800/30 hover:bg-slate-700/40 rounded-lg p-4 transition-all duration-300 border border-transparent hover:border-orange-500/30" onclick="showSkillDetails('Intelligence/Cyber', 12, 3060)">
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center space-x-3">
                                    <div class="w-4 h-4 bg-orange-500 rounded-full"></div>
                                    <span class="font-medium text-white">Intelligence/Cyber</span>
                                </div>
                                <div class="text-right">
                                    <div class="text-orange-400 font-bold">3,060</div>
                                    <div class="text-xs text-slate-400">12%</div>
                                </div>
                            </div>
                            <div class="w-full bg-slate-700 rounded-full h-2 mb-2">
                                <div class="bg-orange-500 h-2 rounded-full transition-all duration-1000" style="width: 12%"></div>
                            </div>
                            <div class="text-xs text-slate-400">Intelligence, Cyber Operations, Surveillance</div>
                        </div>

                        <!-- Logistics/Admin -->
                        <div class="group cursor-pointer bg-slate-800/30 hover:bg-slate-700/40 rounded-lg p-4 transition-all duration-300 border border-transparent hover:border-yellow-500/30" onclick="showSkillDetails('Logistics/Admin', 7, 1785)">
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center space-x-3">
                                    <div class="w-4 h-4 bg-yellow-500 rounded-full"></div>
                                    <span class="font-medium text-white">Logistics/Admin</span>
                                </div>
                                <div class="text-right">
                                    <div class="text-yellow-400 font-bold">1,785</div>
                                    <div class="text-xs text-slate-400">7%</div>
                                </div>
                            </div>
                            <div class="w-full bg-slate-700 rounded-full h-2 mb-2">
                                <div class="bg-yellow-500 h-2 rounded-full transition-all duration-1000" style="width: 7%"></div>
                            </div>
                            <div class="text-xs text-slate-400">Supply, Transportation, Finance, Administration</div>
                        </div>
                    </div>
                </div>

                <!-- Skill Gap Analysis -->
                <div class="mt-8 pt-6 border-t border-slate-700">
                    <h3 class="text-lg font-semibold text-white mb-4">Critical Skill Gap Analysis</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="p-4 bg-red-500/10 rounded-lg border border-red-500/20">
                            <div class="flex items-center space-x-2 mb-2">
                                <div class="w-2 h-2 bg-red-500 rounded-full"></div>
                                <span class="font-medium text-red-400">High Priority Gaps</span>
                            </div>
                            <div class="text-sm text-slate-300 space-y-1">
                                <div>• Cyber Security Specialists: 58% filled</div>
                                <div>• Advanced Medical Personnel: 67% filled</div>
                                <div>• Technical Maintenance: 71% filled</div>
                            </div>
                        </div>
                        <div class="p-4 bg-yellow-500/10 rounded-lg border border-yellow-500/20">
                            <div class="flex items-center space-x-2 mb-2">
                                <div class="w-2 h-2 bg-yellow-500 rounded-full"></div>
                                <span class="font-medium text-yellow-400">Medium Priority</span>
                            </div>
                            <div class="text-sm text-slate-300 space-y-1">
                                <div>• Intelligence Analysts: 78% filled</div>
                                <div>• Communications Specialists: 82% filled</div>
                                <div>• Engineering Corps: 85% filled</div>
                            </div>
                        </div>
                        <div class="p-4 bg-green-500/10 rounded-lg border border-green-500/20">
                            <div class="flex items-center space-x-2 mb-2">
                                <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                <span class="font-medium text-green-400">Well Staffed</span>
                            </div>
                            <div class="text-sm text-slate-300 space-y-1">
                                <div>• Combat Operations: 96% filled</div>
                                <div>• Basic Medical: 94% filled</div>
                                <div>• Administrative: 91% filled</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Attrition Analysis Section -->
            <div class="glass-card rounded-lg p-6 mb-8">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-xl font-semibold text-white">Attrition Analysis & Forecast</h2>
                    <div class="flex items-center space-x-4 text-sm">
                        <div class="flex items-center space-x-2 text-slate-400">
                            <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                            <span>Historical Attrition</span>
                        </div>
                        <div class="flex items-center space-x-2 text-slate-400">
                            <div class="w-3 h-3 bg-orange-500 rounded-full"></div>
                            <span>Forecast</span>
                        </div>
                        <div class="flex items-center space-x-2 text-slate-400">
                            <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
                            <span>Target Rate</span>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                    <!-- Key Metrics -->
                    <div class="space-y-4">
                        <div class="glass-card p-4 rounded-lg">
                            <div class="text-center">
                                <div class="text-2xl font-bold text-red-400 mb-1">4.2%</div>
                                <div class="text-sm text-slate-400">Current Monthly Rate</div>
                                <div class="text-xs text-red-400 mt-1">↑ +0.3% vs target</div>
                            </div>
                        </div>
                        <div class="glass-card p-4 rounded-lg">
                            <div class="text-center">
                                <div class="text-2xl font-bold text-orange-400 mb-1">4.8%</div>
                                <div class="text-sm text-slate-400">Projected 6-Month</div>
                                <div class="text-xs text-orange-400 mt-1">↑ +0.9% vs target</div>
                            </div>
                        </div>
                        <div class="glass-card p-4 rounded-lg">
                            <div class="text-center">
                                <div class="text-2xl font-bold text-blue-400 mb-1">3.9%</div>
                                <div class="text-sm text-slate-400">Target Rate</div>
                                <div class="text-xs text-slate-400 mt-1">Organizational Goal</div>
                            </div>
                        </div>
                    </div>

                    <!-- Attrition Trend Chart -->
                    <div class="lg:col-span-2">
                        <h3 class="text-lg font-semibold text-white mb-4">Monthly Attrition Rate Trend & Forecast</h3>
                        <div class="relative h-80 glass-card p-4 rounded-lg">
                            <!-- Y-axis with grid lines -->
                            <div class="absolute left-0 top-4 h-full w-12 flex flex-col justify-between text-xs text-slate-400 pr-2">
                                <span class="relative -top-2">6.0%</span>
                                <span class="relative -top-2">5.0%</span>
                                <span class="relative -top-2">4.0%</span>
                                <span class="relative -top-2">3.0%</span>
                                <span class="relative -top-2">2.0%</span>
                                <span class="relative -top-2">1.0%</span>
                            </div>
                            
                            <!-- Grid lines -->
                            <div class="absolute left-12 top-4 right-4 h-full">
                                <div class="absolute top-0 w-full border-t border-slate-600/40"></div>
                                <div class="absolute top-1/5 w-full border-t border-slate-600/20"></div>
                                <div class="absolute top-2/5 w-full border-t border-slate-600/20"></div>
                                <div class="absolute top-3/5 w-full border-t border-slate-600/20"></div>
                                <div class="absolute top-4/5 w-full border-t border-slate-600/20"></div>
                                <div class="absolute bottom-16 w-full border-t border-slate-600/40"></div>
                            </div>
                            
                            <!-- Chart area -->
                            <div class="absolute left-12 top-4 right-4 bottom-16">
                                <!-- SVG for line chart -->
                                <svg class="w-full h-full" viewBox="0 0 1000 240" preserveAspectRatio="none">
                                    <!-- Target Rate Line (Blue) -->
                                    <line x1="0" y1="146" x2="1000" y2="146" stroke="#3b82f6" stroke-width="2" stroke-dasharray="5,5" opacity="0.7"/>
                                    
                                    <!-- Historical Attrition Line (Red) -->
                                    <polyline
                                        fill="none"
                                        stroke="#ef4444"
                                        stroke-width="3"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        points="0,170 71,165 143,172 214,168 286,175 357,180 429,178 500,185 571,182 643,188 714,190"
                                        class="drop-shadow-lg"
                                    />
                                    
                                    <!-- Forecast Line (Orange) -->
                                    <polyline
                                        fill="none"
                                        stroke="#f97316"
                                        stroke-width="3"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        stroke-dasharray="8,4"
                                        points="714,190 786,195 857,200 929,205 1000,210"
                                        class="drop-shadow-lg"
                                    />
                                    
                                    <!-- Historical Data Points -->
                                    <circle cx="0" cy="170" r="4" fill="#ef4444" class="hover:r-6 transition-all cursor-pointer" onclick="showAttritionPoint('Jan', 3.5)"/>
                                    <circle cx="71" cy="165" r="4" fill="#ef4444" class="hover:r-6 transition-all cursor-pointer" onclick="showAttritionPoint('Feb', 3.7)"/>
                                    <circle cx="143" cy="172" r="4" fill="#ef4444" class="hover:r-6 transition-all cursor-pointer" onclick="showAttritionPoint('Mar', 3.4)"/>
                                    <circle cx="214" cy="168" r="4" fill="#ef4444" class="hover:r-6 transition-all cursor-pointer" onclick="showAttritionPoint('Apr', 3.6)"/>
                                    <circle cx="286" cy="175" r="4" fill="#ef4444" class="hover:r-6 transition-all cursor-pointer" onclick="showAttritionPoint('May', 3.2)"/>
                                    <circle cx="357" cy="180" r="4" fill="#ef4444" class="hover:r-6 transition-all cursor-pointer" onclick="showAttritionPoint('Jun', 3.0)"/>
                                    <circle cx="429" cy="178" r="4" fill="#ef4444" class="hover:r-6 transition-all cursor-pointer" onclick="showAttritionPoint('Jul', 3.1)"/>
                                    <circle cx="500" cy="185" r="4" fill="#ef4444" class="hover:r-6 transition-all cursor-pointer" onclick="showAttritionPoint('Aug', 2.8)"/>
                                    <circle cx="571" cy="182" r="4" fill="#ef4444" class="hover:r-6 transition-all cursor-pointer" onclick="showAttritionPoint('Sep', 2.9)"/>
                                    <circle cx="643" cy="188" r="4" fill="#ef4444" class="hover:r-6 transition-all cursor-pointer" onclick="showAttritionPoint('Oct', 2.6)"/>
                                    <circle cx="714" cy="190" r="4" fill="#ef4444" class="hover:r-6 transition-all cursor-pointer" onclick="showAttritionPoint('Nov', 4.2)"/>

                                    <!-- Forecast Data Points -->
                                    <circle cx="786" cy="195" r="4" fill="#f97316" class="hover:r-6 transition-all cursor-pointer" onclick="showAttritionPoint('Dec (F)', 4.4)"/>
                                    <circle cx="857" cy="200" r="4" fill="#f97316" class="hover:r-6 transition-all cursor-pointer" onclick="showAttritionPoint('Jan (F)', 4.6)"/>
                                    <circle cx="929" cy="205" r="4" fill="#f97316" class="hover:r-6 transition-all cursor-pointer" onclick="showAttritionPoint('Feb (F)', 4.8)"/>
                                    <circle cx="1000" cy="210" r="4" fill="#f97316" class="hover:r-6 transition-all cursor-pointer" onclick="showAttritionPoint('Mar (F)', 5.0)"/>
                                    
                                    <!-- Vertical line separator between historical and forecast -->
                                    <line x1="714" y1="0" x2="714" y2="240" stroke="#64748b" stroke-width="2" stroke-dasharray="3,3" opacity="0.5"/>
                                    
                                    <!-- Labels for sections -->
                                    <text x="357" y="20" fill="#94a3b8" text-anchor="middle" font-size="12" font-weight="bold">Historical Data</text>
                                    <text x="857" y="20" fill="#94a3b8" text-anchor="middle" font-size="12" font-weight="bold">Forecast</text>
                                </svg>
                            </div>
                            
                            <!-- X-axis labels -->
                            <div class="absolute left-12 bottom-0 right-4 h-16 flex items-center justify-between px-2">
                                <div class="text-center">
                                    <div class="text-xs text-slate-300 font-medium">Jan</div>
                                    <div class="text-xs text-slate-500 mt-1">2024</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs text-slate-300 font-medium">Feb</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs text-slate-300 font-medium">Mar</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs text-slate-300 font-medium">Apr</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs text-slate-300 font-medium">May</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs text-slate-300 font-medium">Jun</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs text-slate-300 font-medium">Jul</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs text-slate-300 font-medium">Aug</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs text-slate-300 font-medium">Sep</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs text-slate-300 font-medium">Oct</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs text-slate-300 font-medium">Nov</div>
                                    <div class="text-xs text-slate-500 mt-1">Current</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs text-orange-400 font-medium">Dec</div>
                                    <div class="text-xs text-orange-500 mt-1">Forecast</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs text-orange-400 font-medium">Jan</div>
                                    <div class="text-xs text-orange-500 mt-1">2025</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs text-orange-400 font-medium">Feb</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs text-orange-400 font-medium">Mar</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Attrition Analysis Details -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <!-- Attrition by Reason -->
                    <div class="glass-card p-4 rounded-lg">
                        <h4 class="font-semibold mb-4 text-slate-300">Attrition by Reason (Current Month)</h4>
                        <div class="space-y-3">
                            <div class="flex justify-between items-center">
                                <span class="text-slate-300 text-sm">End of Service</span>
                                <div class="flex items-center space-x-2">
                                    <div class="w-16 bg-slate-700 rounded-full h-2">
                                        <div class="bg-blue-500 h-2 rounded-full" style="width: 45%"></div>
                                    </div>
                                    <span class="text-blue-400 font-semibold text-sm">45%</span>
                                </div>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-slate-300 text-sm">Voluntary Resignation</span>
                                <div class="flex items-center space-x-2">
                                    <div class="w-16 bg-slate-700 rounded-full h-2">
                                        <div class="bg-red-500 h-2 rounded-full" style="width: 28%"></div>
                                    </div>
                                    <span class="text-red-400 font-semibold text-sm">28%</span>
                                </div>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-slate-300 text-sm">Medical Discharge</span>
                                <div class="flex items-center space-x-2">
                                    <div class="w-16 bg-slate-700 rounded-full h-2">
                                        <div class="bg-yellow-500 h-2 rounded-full" style="width: 15%"></div>
                                    </div>
                                    <span class="text-yellow-400 font-semibold text-sm">15%</span>
                                </div>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-slate-300 text-sm">Disciplinary Action</span>
                                <div class="flex items-center space-x-2">
                                    <div class="w-16 bg-slate-700 rounded-full h-2">
                                        <div class="bg-orange-500 h-2 rounded-full" style="width: 8%"></div>
                                    </div>
                                    <span class="text-orange-400 font-semibold text-sm">8%</span>
                                </div>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-slate-300 text-sm">Other</span>
                                <div class="flex items-center space-x-2">
                                    <div class="w-16 bg-slate-700 rounded-full h-2">
                                        <div class="bg-purple-500 h-2 rounded-full" style="width: 4%"></div>
                                    </div>
                                    <span class="text-purple-400 font-semibold text-sm">4%</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Attrition by Command -->
                    <div class="glass-card p-4 rounded-lg">
                        <h4 class="font-semibold mb-4 text-slate-300">Attrition by Command (Current Month)</h4>
                        <div class="space-y-3">
                            <div class="flex justify-between items-center">
                                <span class="text-slate-300 text-sm">Western Command</span>
                                <div class="flex items-center space-x-2">
                                    <div class="w-2 h-2 bg-red-500 rounded-full"></div>
                                    <span class="text-red-400 font-semibold text-sm">6.8%</span>
                                </div>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-slate-300 text-sm">Eastern Command</span>
                                <div class="flex items-center space-x-2">
                                    <div class="w-2 h-2 bg-yellow-500 rounded-full"></div>
                                    <span class="text-yellow-400 font-semibold text-sm">4.9%</span>
                                </div>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-slate-300 text-sm">Central Command</span>
                                <div class="flex items-center space-x-2">
                                    <div class="w-2 h-2 bg-yellow-500 rounded-full"></div>
                                    <span class="text-yellow-400 font-semibold text-sm">4.1%</span>
                                </div>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-slate-300 text-sm">Southern Command</span>
                                <div class="flex items-center space-x-2">
                                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                    <span class="text-green-400 font-semibold text-sm">3.2%</span>
                                </div>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-slate-300 text-sm">Northern Command</span>
                                <div class="flex items-center space-x-2">
                                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                    <span class="text-green-400 font-semibold text-sm">2.8%</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Risk Factors & Mitigation -->
                    <div class="glass-card p-4 rounded-lg">
                        <h4 class="font-semibold mb-4 text-slate-300">Risk Factors & Mitigation</h4>
                        <div class="space-y-3">
                            <div class="p-3 bg-red-500/10 rounded-lg border border-red-500/20">
                                <div class="font-medium text-red-400 text-sm mb-1">High Risk</div>
                                <div class="text-xs text-slate-300">Voluntary resignations increasing in technical specialties</div>
                            </div>
                            <div class="p-3 bg-yellow-500/10 rounded-lg border border-yellow-500/20">
                                <div class="font-medium text-yellow-400 text-sm mb-1">Medium Risk</div>
                                <div class="text-xs text-slate-300">Western Command retention challenges due to remote locations</div>
                            </div>
                            <div class="p-3 bg-blue-500/10 rounded-lg border border-blue-500/20">
                                <div class="font-medium text-blue-400 text-sm mb-1">Mitigation</div>
                                <div class="text-xs text-slate-300">Enhanced retention bonuses and family support programs</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Forecast Assumptions -->
                <div class="mt-6 p-4 bg-slate-800/30 rounded-lg border border-slate-600/30">
                    <h4 class="font-semibold text-slate-300 mb-2">Forecast Assumptions & Methodology</h4>
                    <div class="text-sm text-slate-400 space-y-1">
                        <div>• Forecast based on 12-month historical trend analysis and seasonal patterns</div>
                        <div>• Accounts for upcoming end-of-service cycles and known voluntary resignations</div>
                        <div>• Includes impact of current retention initiatives and policy changes</div>
                        <div>• Confidence interval: ±0.3% for 3-month forecast, ±0.7% for 6-month forecast</div>
                    </div>
                </div>
            </div>

            <!-- Operation-Based Skill Matching Section -->
            <div class="glass-card rounded-lg p-6 mb-8">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-xl font-semibold text-white">Operation-Based Skill Matching</h2>
                    <div class="flex items-center space-x-4 text-sm">
                        <div class="flex items-center space-x-2 text-slate-400">
                            <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                            <span>Fully Matched</span>
                        </div>
                        <div class="flex items-center space-x-2 text-slate-400">
                            <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                            <span>Partially Matched</span>
                        </div>
                        <div class="flex items-center space-x-2 text-slate-400">
                            <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                            <span>Skill Gap</span>
                        </div>
                    </div>
                </div>

                <!-- Operation Overview Cards -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <!-- Operation Taming Sari -->
                    <div class="group cursor-pointer bg-slate-800/50 hover:bg-slate-700/50 border border-slate-600 hover:border-green-500/50 rounded-lg p-6 transition-all duration-300 hover:scale-105" onclick="showOperationSkillMatch('Operation Taming Sari')">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-white">Operation Taming Sari</h3>
                            <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                        </div>
                        <div class="space-y-3">
                            <div class="flex justify-between items-center">
                                <span class="text-slate-300 text-sm">Personnel Required</span>
                                <span class="text-green-400 font-semibold">1,250</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-slate-300 text-sm">Skills Matched</span>
                                <span class="text-green-400 font-semibold">96%</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-slate-300 text-sm">Ready Personnel</span>
                                <span class="text-green-400 font-semibold">1,198</span>
                            </div>
                        </div>
                        <div class="mt-4 pt-4 border-t border-slate-600">
                            <div class="text-xs text-slate-400">Northern Command • Ready for Deployment</div>
                        </div>
                    </div>

                    <!-- Operation Helang -->
                    <div class="group cursor-pointer bg-slate-800/50 hover:bg-slate-700/50 border border-slate-600 hover:border-yellow-500/50 rounded-lg p-6 transition-all duration-300 hover:scale-105" onclick="showOperationSkillMatch('Operation Helang')">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-white">Operation Helang</h3>
                            <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                        </div>
                        <div class="space-y-3">
                            <div class="flex justify-between items-center">
                                <span class="text-slate-300 text-sm">Personnel Required</span>
                                <span class="text-yellow-400 font-semibold">980</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-slate-300 text-sm">Skills Matched</span>
                                <span class="text-yellow-400 font-semibold">78%</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-slate-300 text-sm">Ready Personnel</span>
                                <span class="text-yellow-400 font-semibold">764</span>
                            </div>
                        </div>
                        <div class="mt-4 pt-4 border-t border-slate-600">
                            <div class="text-xs text-slate-400">Eastern Command • Skill Gaps Identified</div>
                        </div>
                    </div>

                    <!-- Operation Wau -->
                    <div class="group cursor-pointer bg-slate-800/50 hover:bg-slate-700/50 border border-slate-600 hover:border-red-500/50 rounded-lg p-6 transition-all duration-300 hover:scale-105" onclick="showOperationSkillMatch('Operation Wau')">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-white">Operation Wau</h3>
                            <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                        </div>
                        <div class="space-y-3">
                            <div class="flex justify-between items-center">
                                <span class="text-slate-300 text-sm">Personnel Required</span>
                                <span class="text-red-400 font-semibold">1,450</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-slate-300 text-sm">Skills Matched</span>
                                <span class="text-red-400 font-semibold">68%</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-slate-300 text-sm">Ready Personnel</span>
                                <span class="text-red-400 font-semibold">986</span>
                            </div>
                        </div>
                        <div class="mt-4 pt-4 border-t border-slate-600">
                            <div class="text-xs text-slate-400">Western Command • Critical Shortages</div>
                        </div>
                    </div>
                </div>

                <!-- Skill Matching Matrix -->
                <div class="mb-8">
                    <h3 class="text-lg font-semibold text-white mb-6">Operation-Skill Matching Matrix</h3>
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm">
                            <thead>
                                <tr class="border-b border-slate-700">
                                    <th class="text-left py-3 px-3 text-slate-300 font-medium">Operation</th>
                                    <th class="text-center py-3 px-3 text-slate-300 font-medium">Combat Ops</th>
                                    <th class="text-center py-3 px-3 text-slate-300 font-medium">Technical</th>
                                    <th class="text-center py-3 px-3 text-slate-300 font-medium">Medical</th>
                                    <th class="text-center py-3 px-3 text-slate-300 font-medium">Intelligence</th>
                                    <th class="text-center py-3 px-3 text-slate-300 font-medium">Logistics</th>
                                    <th class="text-center py-3 px-3 text-slate-300 font-medium">Overall Match</th>
                                    <th class="text-center py-3 px-3 text-slate-300 font-medium">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b border-slate-800 hover:bg-slate-800/30 transition-colors">
                                    <td class="py-4 px-3 font-medium">Operation Taming Sari</td>
                                    <td class="py-4 px-3 text-center">
                                        <div class="flex items-center justify-center space-x-1">
                                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                            <span class="text-green-400 font-semibold">98%</span>
                                        </div>
                                    </td>
                                    <td class="py-4 px-3 text-center">
                                        <div class="flex items-center justify-center space-x-1">
                                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                            <span class="text-green-400 font-semibold">94%</span>
                                        </div>
                                    </td>
                                    <td class="py-4 px-3 text-center">
                                        <div class="flex items-center justify-center space-x-1">
                                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                            <span class="text-green-400 font-semibold">96%</span>
                                        </div>
                                    </td>
                                    <td class="py-4 px-3 text-center">
                                        <div class="flex items-center justify-center space-x-1">
                                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                            <span class="text-green-400 font-semibold">92%</span>
                                        </div>
                                    </td>
                                    <td class="py-4 px-3 text-center">
                                        <div class="flex items-center justify-center space-x-1">
                                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                            <span class="text-green-400 font-semibold">97%</span>
                                        </div>
                                    </td>
                                    <td class="py-4 px-3 text-center">
                                        <span class="px-2 py-1 bg-green-500/20 text-green-400 rounded-full text-xs font-medium">96%</span>
                                    </td>
                                    <td class="py-4 px-3 text-center">
                                        <button onclick="showOperationSkillMatch('Operation Taming Sari')" class="px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-xs transition-colors">Deploy</button>
                                    </td>
                                </tr>
                                <tr class="border-b border-slate-800 hover:bg-slate-800/30 transition-colors">
                                    <td class="py-4 px-3 font-medium">Operation Helang</td>
                                    <td class="py-4 px-3 text-center">
                                        <div class="flex items-center justify-center space-x-1">
                                            <div class="w-2 h-2 bg-yellow-500 rounded-full"></div>
                                            <span class="text-yellow-400 font-semibold">85%</span>
                                        </div>
                                    </td>
                                    <td class="py-4 px-3 text-center">
                                        <div class="flex items-center justify-center space-x-1">
                                            <div class="w-2 h-2 bg-red-500 rounded-full"></div>
                                            <span class="text-red-400 font-semibold">68%</span>
                                        </div>
                                    </td>
                                    <td class="py-4 px-3 text-center">
                                        <div class="flex items-center justify-center space-x-1">
                                            <div class="w-2 h-2 bg-yellow-500 rounded-full"></div>
                                            <span class="text-yellow-400 font-semibold">78%</span>
                                        </div>
                                    </td>
                                    <td class="py-4 px-3 text-center">
                                        <div class="flex items-center justify-center space-x-1">
                                            <div class="w-2 h-2 bg-yellow-500 rounded-full"></div>
                                            <span class="text-yellow-400 font-semibold">82%</span>
                                        </div>
                                    </td>
                                    <td class="py-4 px-3 text-center">
                                        <div class="flex items-center justify-center space-x-1">
                                            <div class="w-2 h-2 bg-yellow-500 rounded-full"></div>
                                            <span class="text-yellow-400 font-semibold">76%</span>
                                        </div>
                                    </td>
                                    <td class="py-4 px-3 text-center">
                                        <span class="px-2 py-1 bg-yellow-500/20 text-yellow-400 rounded-full text-xs font-medium">78%</span>
                                    </td>
                                    <td class="py-4 px-3 text-center">
                                        <button onclick="showOperationSkillMatch('Operation Helang')" class="px-3 py-1 bg-yellow-600 hover:bg-yellow-700 text-white rounded text-xs transition-colors">Review</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-slate-800/30 transition-colors">
                                    <td class="py-4 px-3 font-medium">Operation Wau</td>
                                    <td class="py-4 px-3 text-center">
                                        <div class="flex items-center justify-center space-x-1">
                                            <div class="w-2 h-2 bg-red-500 rounded-full"></div>
                                            <span class="text-red-400 font-semibold">72%</span>
                                        </div>
                                    </td>
                                    <td class="py-4 px-3 text-center">
                                        <div class="flex items-center justify-center space-x-1">
                                            <div class="w-2 h-2 bg-red-500 rounded-full"></div>
                                            <span class="text-red-400 font-semibold">58%</span>
                                        </div>
                                    </td>
                                    <td class="py-4 px-3 text-center">
                                        <div class="flex items-center justify-center space-x-1">
                                            <div class="w-2 h-2 bg-red-500 rounded-full"></div>
                                            <span class="text-red-400 font-semibold">65%</span>
                                        </div>
                                    </td>
                                    <td class="py-4 px-3 text-center">
                                        <div class="flex items-center justify-center space-x-1">
                                            <div class="w-2 h-2 bg-red-500 rounded-full"></div>
                                            <span class="text-red-400 font-semibold">61%</span>
                                        </div>
                                    </td>
                                    <td class="py-4 px-3 text-center">
                                        <div class="flex items-center justify-center space-x-1">
                                            <div class="w-2 h-2 bg-red-500 rounded-full"></div>
                                            <span class="text-red-400 font-semibold">69%</span>
                                        </div>
                                    </td>
                                    <td class="py-4 px-3 text-center">
                                        <span class="px-2 py-1 bg-red-500/20 text-red-400 rounded-full text-xs font-medium">68%</span>
                                    </td>
                                    <td class="py-4 px-3 text-center">
                                        <button onclick="showOperationSkillMatch('Operation Wau')" class="px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-xs transition-colors">Reassign</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Personnel Availability Pool -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Available Personnel by Skill -->
                    <div class="glass-card p-6 rounded-lg">
                        <h3 class="text-lg font-semibold text-white mb-4">Available Personnel Pool by Skill</h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between p-3 bg-slate-800/30 rounded-lg">
                                <div class="flex items-center space-x-3">
                                    <div class="w-4 h-4 bg-blue-500 rounded-full"></div>
                                    <span class="text-slate-300">Combat Operations</span>
                                </div>
                                <div class="text-right">
                                    <div class="text-blue-400 font-bold">2,847</div>
                                    <div class="text-xs text-slate-400">Available</div>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-slate-800/30 rounded-lg">
                                <div class="flex items-center space-x-3">
                                    <div class="w-4 h-4 bg-green-500 rounded-full"></div>
                                    <span class="text-slate-300">Technical/Engineering</span>
                                </div>
                                <div class="text-right">
                                    <div class="text-green-400 font-bold">1,923</div>
                                    <div class="text-xs text-slate-400">Available</div>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-slate-800/30 rounded-lg">
                                <div class="flex items-center space-x-3">
                                    <div class="w-4 h-4 bg-purple-500 rounded-full"></div>
                                    <span class="text-slate-300">Medical/Support</span>
                                </div>
                                <div class="text-right">
                                    <div class="text-purple-400 font-bold">1,456</div>
                                    <div class="text-xs text-slate-400">Available</div>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-slate-800/30 rounded-lg">
                                <div class="flex items-center space-x-3">
                                    <div class="w-4 h-4 bg-orange-500 rounded-full"></div>
                                    <span class="text-slate-300">Intelligence/Cyber</span>
                                </div>
                                <div class="text-right">
                                    <div class="text-orange-400 font-bold">789</div>
                                    <div class="text-xs text-slate-400">Available</div>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-slate-800/30 rounded-lg">
                                <div class="flex items-center space-x-3">
                                    <div class="w-4 h-4 bg-yellow-500 rounded-full"></div>
                                    <span class="text-slate-300">Logistics/Admin</span>
                                </div>
                                <div class="text-right">
                                    <div class="text-yellow-400 font-bold">567</div>
                                    <div class="text-xs text-slate-400">Available</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Cross-Command Personnel Transfer Recommendations -->
                    <div class="glass-card p-6 rounded-lg">
                        <h3 class="text-lg font-semibold text-white mb-4">Transfer Recommendations</h3>
                        <div class="space-y-4">
                            <div class="p-4 bg-green-500/10 rounded-lg border border-green-500/20">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="font-medium text-green-400">Northern → Eastern</span>
                                    <span class="text-xs text-slate-400">Recommended</span>
                                </div>
                                <div class="text-sm text-slate-300 mb-2">Transfer 45 technical specialists for Operation Helang</div>
                                <div class="flex justify-between text-xs">
                                    <span class="text-slate-400">Impact: +12% readiness</span>
                                    <span class="text-green-400">Low risk</span>
                                </div>
                            </div>
                            <div class="p-4 bg-yellow-500/10 rounded-lg border border-yellow-500/20">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="font-medium text-yellow-400">Central → Western</span>
                                    <span class="text-xs text-slate-400">Under Review</span>
                                </div>
                                <div class="text-sm text-slate-300 mb-2">Transfer 78 combat personnel for Operation Wau</div>
                                <div class="flex justify-between text-xs">
                                    <span class="text-slate-400">Impact: +8% readiness</span>
                                    <span class="text-yellow-400">Medium risk</span>
                                </div>
                            </div>
                            <div class="p-4 bg-blue-500/10 rounded-lg border border-blue-500/20">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="font-medium text-blue-400">Multi-Command Pool</span>
                                    <span class="text-xs text-slate-400">Strategic</span>
                                </div>
                                <div class="text-sm text-slate-300 mb-2">Create flexible specialist reserve for critical operations</div>
                                <div class="flex justify-between text-xs">
                                    <span class="text-slate-400">Personnel: 156 specialists</span>
                                    <span class="text-blue-400">Long-term</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

        <div id="mobility-tab" class="tab-content hidden"> <div id="mobilityContent">
        <div class="mb-8">
            <h2 class="text-xl font-bold mb-6 flex items-center">
                <span class="w-3 h-3 bg-blue-500 rounded-full mr-3"></span>
                Fleet Management Overview - Key Performance Indicators
            </h2>
                    
                    <!-- KPI Cards with Sparklines -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <!-- Fleet Availability -->
                        <div class="glass-card rounded-lg p-6 relative group cursor-pointer hover:scale-105 transition-all duration-300" onclick="showFleetDetails('availability')">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-slate-300 text-sm font-medium">Fleet Availability</h3>
                                <span class="status-indicator bg-yellow-500"></span>
                            </div>
                            <div class="text-3xl font-bold text-white mb-2">74%</div>
                            <div class="flex items-center space-x-2 mb-3">
                                <svg class="w-4 h-4 text-red-400" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M14.707 10.293a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L9 12.586V5a1 1 0 012 0v7.586l2.293-2.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                </svg>
                                <span class="text-red-400 text-sm">-2.1%</span>
                            </div>
                            <div class="text-slate-400 text-xs mb-4">vs last month</div>
                            
                            <!-- 5-day Sparkline -->
                            <div class="h-8 flex items-end space-x-1">
                                <div class="w-1 bg-red-500/70 h-4" title="Day 25: 74%"></div>
                                <div class="w-1 bg-red-500/60 h-4" title="Day 26: 74%"></div>
                                <div class="w-1 bg-red-500/50 h-4" title="Day 27: 74%"></div>
                                <div class="w-1 bg-red-500/60 h-4" title="Day 28: 74%"></div>
                                <div class="w-1 bg-red-500/70 h-4" title="Day 29: 74%"></div>
                                <div class="w-1 bg-red-500/80 h-4" title="Day 30: 74%"></div>
                            </div>
                            
                            <!-- Floating Popup Insight -->
                            <div class="absolute top-1/2 right-2 transform -translate-y-1/2 w-48 bg-slate-900/95 backdrop-blur-sm rounded-lg p-2.5 opacity-0 group-hover:opacity-100 transition-all duration-300 z-[100] shadow-2xl border border-yellow-500/30 pointer-events-none">
                                <div class="text-yellow-400 text-xs font-semibold mb-1">⚠️ AI ALERT</div>
                                <div class="text-white text-xs font-medium mb-1">Fleet Availability Declining</div>
                                <div class="text-slate-300 text-xs leading-relaxed">
                                    • Western Command: 45% operational<br>
                                    • 127 vehicles need maintenance<br>
                                    • Maintenance backlog increasing<br>
                                    • Recommend resource reallocation
                                </div>
                                <!-- Arrow pointing left to card -->
                                <div class="absolute top-4 right-full w-0 h-0 border-t-4 border-b-4 border-r-4 border-t-transparent border-b-transparent border-r-yellow-500/30"></div>
                            </div>
                        </div>
                        
                        <!-- Vehicles in Maintenance -->
                        <div class="glass-card rounded-lg p-6 relative group cursor-pointer hover:scale-105 transition-all duration-300" onclick="showFleetDetails('maintenance')">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-slate-300 text-sm font-medium">Vehicles in Maintenance</h3>
                                <span class="status-indicator bg-red-500"></span>
                            </div>
                            <div class="text-3xl font-bold text-white mb-2">127</div>
                            <div class="flex items-center space-x-2 mb-3">
                                <svg class="w-4 h-4 text-red-400" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
                                </svg>
                                <span class="text-red-400 text-sm">+15</span>
                            </div>
                            <div class="text-slate-400 text-xs mb-4">vs last week</div>
                            
                            <!-- 30-day Sparkline -->
                            <div class="h-8 flex items-end space-x-1">
                                <div class="w-1 bg-red-500/80 h-7" title="Day 25: 125 vehicles"></div>
                                <div class="w-1 bg-red-500/90 h-8" title="Day 26: 127 vehicles"></div>
                                <div class="w-1 bg-red-500/80 h-7" title="Day 27: 126 vehicles"></div>
                                <div class="w-1 bg-red-500/90 h-8" title="Day 28: 128 vehicles"></div>
                                <div class="w-1 bg-red-500/80 h-7" title="Day 29: 125 vehicles"></div>
                                <div class="w-1 bg-red-500 h-8" title="Day 30: 127 vehicles"></div>
                            </div>
                            
                            <!-- Floating Popup Insight -->
                            <div class="absolute top-1/2 right-2 transform -translate-y-1/2 w-48 bg-slate-900/95 backdrop-blur-sm rounded-lg p-2.5 opacity-0 group-hover:opacity-100 transition-all duration-300 z-[100] shadow-2xl border border-red-500/30 pointer-events-none">
                                <div class="text-red-400 text-xs font-semibold mb-1">🚨 AI ALERT</div>
                                <div class="text-white text-xs font-medium mb-1">Maintenance Backlog Critical</div>
                                <div class="text-slate-300 text-xs leading-relaxed">
                                    • 30% increase in 2 weeks<br>
                                    • Western Command most affected<br>
                                    • Average repair time: 8.5 days<br>
                                    • Deploy mobile maintenance teams
                                </div>
                                <!-- Arrow pointing left to card -->
                                <div class="absolute top-4 right-full w-0 h-0 border-t-4 border-b-4 border-r-4 border-t-transparent border-b-transparent border-r-red-500/30"></div>
                            </div>
                        </div>
                        
                        <!-- Mean Time Between Failures (MTBF) -->
                        <div class="glass-card rounded-lg p-6 relative group cursor-pointer hover:scale-105 transition-all duration-300" onclick="showFleetDetails('mtbf')">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-slate-300 text-sm font-medium">Mean Time Between Failures</h3>
                                <span class="status-indicator bg-yellow-500"></span>
                            </div>
                            <div class="text-3xl font-bold text-white mb-2">342</div>
                            <div class="flex items-center space-x-2 mb-3">
                                <svg class="w-4 h-4 text-red-400" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M14.707 10.293a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L9 12.586V5a1 1 0 012 0v7.586l2.293-2.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                </svg>
                                <span class="text-red-400 text-sm">-23 hrs</span>
                            </div>
                            <div class="text-slate-400 text-xs mb-4">hours average</div>
                            
                            <!-- 30-day Sparkline -->
                            <div class="h-8 flex items-end space-x-1">
                                <div class="w-1 bg-yellow-500/60 h-5" title="Day 25: 345 hrs"></div>
                                <div class="w-1 bg-yellow-500/50 h-4" title="Day 26: 338 hrs"></div>
                                <div class="w-1 bg-yellow-500/60 h-5" title="Day 27: 344 hrs"></div>
                                <div class="w-1 bg-yellow-500/50 h-4" title="Day 28: 340 hrs"></div>
                                <div class="w-1 bg-yellow-500/60 h-5" title="Day 29: 343 hrs"></div>
                                <div class="w-1 bg-yellow-500 h-4" title="Day 30: 342 hrs"></div>
                            </div>
                            
                            <!-- Floating Popup Insight -->
                            <div class="absolute top-1/2 right-2 transform -translate-y-1/2 w-48 bg-slate-900/95 backdrop-blur-sm rounded-lg p-2.5 opacity-0 group-hover:opacity-100 transition-all duration-300 z-[100] shadow-2xl border border-yellow-500/30 pointer-events-none">
                                <div class="text-yellow-400 text-xs font-semibold mb-1">📊 AI INSIGHT</div>
                                <div class="text-white text-xs font-medium mb-1">MTBF Declining Trend</div>
                                <div class="text-slate-300 text-xs leading-relaxed">
                                    • 6% decrease over 30 days<br>
                                    • Older vehicles showing wear<br>
                                    • Preventive maintenance needed<br>
                                    • Target MTBF: 400+ hours
                                </div>
                                <!-- Arrow pointing left to card -->
                                <div class="absolute top-4 right-full w-0 h-0 border-t-4 border-b-4 border-r-4 border-t-transparent border-b-transparent border-r-yellow-500/30"></div>
                            </div>
                        </div>
                        
                        <!-- Predictive Downtime Risk -->
                        <div class="glass-card rounded-lg p-6 relative group cursor-pointer hover:scale-105 transition-all duration-300" onclick="showFleetDetails('downtime')">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-slate-300 text-sm font-medium">Predictive Downtime Risk</h3>
                                <span class="status-indicator bg-red-500"></span>
                            </div>
                            <div class="text-3xl font-bold text-white mb-2">68%</div>
                            <div class="flex items-center space-x-2 mb-3">
                                <svg class="w-4 h-4 text-red-400" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
                                </svg>
                                <span class="text-red-400 text-sm">+12%</span>
                            </div>
                            <div class="text-slate-400 text-xs mb-4">high risk vehicles</div>
                            
                            <!-- 30-day Sparkline -->
                            <div class="h-8 flex items-end space-x-1">
                                <div class="w-1 bg-red-500/90 h-8" title="Day 25: 69% risk"></div>
                                <div class="w-1 bg-red-500/80 h-7" title="Day 26: 67% risk"></div>
                                <div class="w-1 bg-red-500/90 h-8" title="Day 27: 68% risk"></div>
                                <div class="w-1 bg-red-500/80 h-7" title="Day 28: 66% risk"></div>
                                <div class="w-1 bg-red-500/90 h-8" title="Day 29: 69% risk"></div>
                                <div class="w-1 bg-red-500 h-8" title="Day 30: 68% risk"></div>
                            </div>
                            
                            <!-- Floating Popup Insight -->
                            <div class="absolute top-1/2 right-2 transform -translate-y-1/2 w-48 bg-slate-900/95 backdrop-blur-sm rounded-lg p-2.5 opacity-0 group-hover:opacity-100 transition-all duration-300 z-[100] shadow-2xl border border-red-500/30 pointer-events-none">
                                <div class="text-red-400 text-xs font-semibold mb-1">🔮 AI PREDICTION</div>
                                <div class="text-white text-xs font-medium mb-1">High Downtime Risk Alert</div>
                                <div class="text-slate-300 text-xs leading-relaxed">
                                    • 89 vehicles at high failure risk<br>
                                    • Predicted failures next 7 days: 12<br>
                                    • Recommend immediate inspection<br>
                                    • Schedule preventive maintenance
                                </div>
                                <!-- Arrow pointing left to card -->
                                <div class="absolute top-4 right-full w-0 h-0 border-t-4 border-b-4 border-r-4 border-t-transparent border-b-transparent border-r-red-500/30"></div>
                            </div>
                        </div> <!-- This closes the KPI card -->
                    </div> <!-- This closes the KPI cards grid -->
                </div> <!-- This closes the mb-8 div -->
            </div> <!-- This closes the mobilityContent div -->
            
            <!-- Vehicle Fleet Composition Pie Chart -->
<div class="glass-card rounded-lg p-6 mb-6">
    <h2 class="text-xl font-bold mb-6 flex items-center">
        <span class="w-3 h-3 bg-blue-500 rounded-full mr-3"></span>
        Vehicle Fleet Composition by Type
    </h2>
    
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <!-- Pie Chart -->
        <div class="relative">
            <div class="w-80 h-80 mx-auto relative">
                <!-- SVG Pie Chart -->
                <svg class="w-full h-full transform -rotate-90" viewBox="0 0 200 200">
                    <!-- Background circle -->
                    <circle cx="100" cy="100" r="80" fill="none" stroke="rgb(51, 65, 85)" stroke-width="2" opacity="0.3"/>
                    
                    <!-- Humvee M1151 - 45 vehicles (31.5%) -->
                    <circle cx="100" cy="100" r="70" fill="none" stroke="#3b82f6" stroke-width="20" 
                            stroke-dasharray="157 500" stroke-dashoffset="0" 
                            class="cursor-pointer hover:stroke-blue-400 transition-all duration-300"
                            onclick="showFleetTypeDetails('Humvee M1151', 45, 31.5)"/>
                    
                    <!-- Stryker Combat Vehicle - 32 vehicles (22.4%) -->
                    <circle cx="100" cy="100" r="70" fill="none" stroke="#10b981" stroke-width="20" 
                            stroke-dasharray="112 500" stroke-dashoffset="-157" 
                            class="cursor-pointer hover:stroke-emerald-400 transition-all duration-300"
                            onclick="showFleetTypeDetails('Stryker Combat Vehicle', 32, 22.4)"/>
                    
                    <!-- MRAP All-Terrain - 28 vehicles (19.6%) -->
                    <circle cx="100" cy="100" r="70" fill="none" stroke="#f59e0b" stroke-width="20" 
                            stroke-dasharray="98 500" stroke-dashoffset="-269" 
                            class="cursor-pointer hover:stroke-amber-400 transition-all duration-300"
                            onclick="showFleetTypeDetails('MRAP All-Terrain', 28, 19.6)"/>
                    
                    <!-- M1A2 Abrams Tank - 24 vehicles (16.8%) -->
                    <circle cx="100" cy="100" r="70" fill="none" stroke="#ef4444" stroke-width="20" 
                            stroke-dasharray="84 500" stroke-dashoffset="-367" 
                            class="cursor-pointer hover:stroke-red-400 transition-all duration-300"
                            onclick="showFleetTypeDetails('M1A2 Abrams Tank', 24, 16.8)"/>
                    
                    <!-- M88 Recovery Vehicle - 12 vehicles (8.4%) -->
                    <circle cx="100" cy="100" r="70" fill="none" stroke="#8b5cf6" stroke-width="20" 
                            stroke-dasharray="42 500" stroke-dashoffset="-451" 
                            class="cursor-pointer hover:stroke-violet-400 transition-all duration-300"
                            onclick="showFleetTypeDetails('M88 Recovery Vehicle', 12, 8.4)"/>
                    
                    <!-- Bradley Fighting Vehicle - 2 vehicles (1.4%) -->
                    <circle cx="100" cy="100" r="70" fill="none" stroke="#06b6d4" stroke-width="20" 
                            stroke-dasharray="7 500" stroke-dashoffset="-493" 
                            class="cursor-pointer hover:stroke-cyan-400 transition-all duration-300"
                            onclick="showFleetTypeDetails('Bradley Fighting Vehicle', 2, 1.4)"/>
                </svg>
                
                <!-- Center label -->
                <div class="absolute inset-0 flex items-center justify-center">
                    <div class="text-center">
                        <div class="text-3xl font-bold text-white">143</div>
                        <div class="text-sm text-slate-400">Total Vehicles</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Legend and Details -->
        <div class="space-y-4">
            <h3 class="text-lg font-semibold text-white mb-4">Fleet Breakdown</h3>
            
            <!-- Vehicle Type List -->
            <div class="space-y-3">
                <div class="flex items-center justify-between p-3 glass-card rounded-lg cursor-pointer hover:bg-slate-700/30 transition-all"
                     onclick="showFleetTypeDetails('Humvee M1151', 45, 31.5)">
                    <div class="flex items-center space-x-3">
                        <div class="w-4 h-4 bg-blue-500 rounded"></div>
                        <span class="text-white font-medium">Humvee M1151</span>
                    </div>
                    <div class="text-right">
                        <div class="text-white font-bold">45</div>
                        <div class="text-xs text-slate-400">31.5%</div>
                    </div>
                </div>
                
                <div class="flex items-center justify-between p-3 glass-card rounded-lg cursor-pointer hover:bg-slate-700/30 transition-all"
                                         onclick="showFleetTypeDetails('Stryker Combat Vehicle', 32, 22.4)">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-4 h-4 bg-emerald-500 rounded"></div>
                                            <span class="text-white font-medium">Stryker Combat Vehicle</span>
                                        </div>
                                        <div class="text-right">
                                            <div class="text-white font-bold">32</div>
                                            <div class="text-xs text-slate-400">22.4%</div>
                                        </div>
                                    </div>
                                    
                                    <div class="flex items-center justify-between p-3 glass-card rounded-lg cursor-pointer hover:bg-slate-700/30 transition-all"
                                         onclick="showFleetTypeDetails('MRAP All-Terrain', 28, 19.6)">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-4 h-4 bg-amber-500 rounded"></div>
                                            <span class="text-white font-medium">MRAP All-Terrain</span>
                                        </div>
                                        <div class="text-right">
                                            <div class="text-white font-bold">28</div>
                                            <div class="text-xs text-slate-400">19.6%</div>
                                        </div>
                                    </div>
                                    
                                    <div class="flex items-center justify-between p-3 glass-card rounded-lg cursor-pointer hover:bg-slate-700/30 transition-all"
                                         onclick="showFleetTypeDetails('M1A2 Abrams Tank', 24, 16.8)">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-4 h-4 bg-red-500 rounded"></div>
                                            <span class="text-white font-medium">M1A2 Abrams Tank</span>
                                        </div>
                                        <div class="text-right">
                                            <div class="text-white font-bold">24</div>
                                            <div class="text-xs text-slate-400">16.8%</div>
                                        </div>
                                    </div>
                                    
                                    <div class="flex items-center justify-between p-3 glass-card rounded-lg cursor-pointer hover:bg-slate-700/30 transition-all"
                                         onclick="showFleetTypeDetails('M88 Recovery Vehicle', 12, 8.4)">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-4 h-4 bg-violet-500 rounded"></div>
                                            <span class="text-white font-medium">M88 Recovery Vehicle</span>
                                        </div>
                                        <div class="text-right">
                                            <div class="text-white font-bold">12</div>
                                            <div class="text-xs text-slate-400">8.4%</div>
                                        </div>
                                    </div>
                                    
                                    <div class="flex items-center justify-between p-3 glass-card rounded-lg cursor-pointer hover:bg-slate-700/30 transition-all"
                                         onclick="showFleetTypeDetails('Bradley Fighting Vehicle', 2, 1.4)">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-4 h-4 bg-cyan-500 rounded"></div>
                                            <span class="text-white font-medium">Bradley Fighting Vehicle</span>
                                        </div>
                                        <div class="text-right">
                                            <div class="text-white font-bold">2</div>
                                            <div class="text-xs text-slate-400">1.4%</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Quick Stats -->
                                <div class="mt-6 p-4 glass-card rounded-lg">
                                    <h4 class="text-sm font-semibold text-white mb-3">Fleet Summary</h4>
                                    <div class="grid grid-cols-2 gap-4 text-sm">
                                        <div>
                                            <div class="text-slate-400">Most Common</div>
                                            <div class="text-white font-medium">Humvee M1151</div>
                                        </div>
                                        <div>
                                            <div class="text-slate-400">Least Common</div>
                                            <div class="text-white font-medium">Bradley Fighting</div>
                                        </div>
                                        <div>
                                            <div class="text-slate-400">Heavy Vehicles</div>
                                            <div class="text-white font-medium">26 (18.2%)</div>
                                        </div>
                                        <div>
                                            <div class="text-slate-400">Light Vehicles</div>
                                            <div class="text-white font-medium">117 (81.8%)</div>
                                        </div>
                </div>
                <!-- Additional legend items with same pattern -->
                <!-- Stryker Combat Vehicle, MRAP All-Terrain, M1A2 Abrams Tank, etc. -->
            </div>
        </div>
    </div>
</div>

                    <!-- Asset Location Distribution Chart -->
                    <div class="glass-card rounded-lg p-6 mb-6">
                        <h2 class="text-xl font-bold mb-6 flex items-center">
                            <span class="w-3 h-3 bg-green-500 rounded-full mr-3"></span>
                            Asset Location Distribution
                        </h2>
                        
                        <div class="relative h-96">
                            <!-- Y-axis labels -->
                            <div class="absolute left-0 top-0 h-full w-56 flex flex-col justify-around text-sm text-slate-300 pr-4">
                                <div class="text-right">Kem Terendak</div>
                                <div class="text-right">Kem Sungai Besi</div>
                                <div class="text-right">Kem Perdana</div>
                                <div class="text-right">Pangkalan TLDM Lumut</div>
                                <div class="text-right">Pangkalan TUDM Kuantan</div>
                                <div class="text-right">Kem Mahkota</div>
                                <div class="text-right">Pangkalan TUDM Labuan</div>
                            </div>
                            
                            <!-- Chart area -->
                            <div class="absolute left-56 top-0 right-0 h-full">
                                <!-- Grid lines -->
                                <div class="absolute inset-0">
                                    <div class="absolute left-0 top-0 bottom-0 w-px border-l border-slate-600/40"></div>
                                    <div class="absolute left-1/6 top-0 bottom-0 w-px border-l border-slate-600/20"></div>
                                    <div class="absolute left-2/6 top-0 bottom-0 w-px border-l border-slate-600/20"></div>
                                    <div class="absolute left-3/6 top-0 bottom-0 w-px border-l border-slate-600/20"></div>
                                    <div class="absolute left-4/6 top-0 bottom-0 w-px border-l border-slate-600/20"></div>
                                    <div class="absolute left-5/6 top-0 bottom-0 w-px border-l border-slate-600/20"></div>
                                    <div class="absolute right-0 top-0 bottom-0 w-px border-l border-slate-600/40"></div>
                                </div>
                                
                                <!-- Bars container -->
                                <div class="absolute inset-0 flex flex-col justify-around py-4">
                                    <!-- Kem Terendak -->
                                    <div class="flex items-center h-10 relative group cursor-pointer" onclick="showLocationDetails('Kem Terendak', 42)">
                                        <div class="relative w-full h-6 bg-slate-700/30 rounded-full overflow-hidden group-hover:bg-slate-600/40 transition-all">
                                            <div class="absolute left-0 top-0 h-full bg-gradient-to-r from-blue-600 to-blue-500 rounded-full transition-all duration-1000 group-hover:from-blue-500 group-hover:to-blue-400" style="width: 84%;"></div>
                                        </div>
                                        <div class="absolute right-2 top-0 h-full flex items-center text-sm text-white font-medium">
                                            42 Assets
                                        </div>
                                    </div>

                                    <!-- Kem Sungai Besi -->
                                    <div class="flex items-center h-10 relative group cursor-pointer" onclick="showLocationDetails('Kem Sungai Besi', 38)">
                                        <div class="relative w-full h-6 bg-slate-700/30 rounded-full overflow-hidden group-hover:bg-slate-600/40 transition-all">
                                            <div class="absolute left-0 top-0 h-full bg-gradient-to-r from-emerald-600 to-emerald-500 rounded-full transition-all duration-1000 group-hover:from-emerald-500 group-hover:to-emerald-400" style="width: 76%;"></div>
                                        </div>
                                        <div class="absolute right-2 top-0 h-full flex items-center text-sm text-white font-medium">
                                            38 Assets
                                        </div>
                                    </div>

                                    <!-- Kem Perdana -->
                                    <div class="flex items-center h-10 relative group cursor-pointer" onclick="showLocationDetails('Kem Perdana', 35)">
                                        <div class="relative w-full h-6 bg-slate-700/30 rounded-full overflow-hidden group-hover:bg-slate-600/40 transition-all">
                                            <div class="absolute left-0 top-0 h-full bg-gradient-to-r from-purple-600 to-purple-500 rounded-full transition-all duration-1000 group-hover:from-purple-500 group-hover:to-purple-400" style="width: 70%;"></div>
                                        </div>
                                        <div class="absolute right-2 top-0 h-full flex items-center text-sm text-white font-medium">
                                            35 Assets
                                        </div>
                                    </div>

                                    <!-- Pangkalan TLDM Lumut -->
                                    <div class="flex items-center h-10 relative group cursor-pointer" onclick="showLocationDetails('Pangkalan TLDM Lumut', 28)">
                                        <div class="relative w-full h-6 bg-slate-700/30 rounded-full overflow-hidden group-hover:bg-slate-600/40 transition-all">
                                            <div class="absolute left-0 top-0 h-full bg-gradient-to-r from-cyan-600 to-cyan-500 rounded-full transition-all duration-1000 group-hover:from-cyan-500 group-hover:to-cyan-400" style="width: 56%;"></div>
                                        </div>
                                        <div class="absolute right-2 top-0 h-full flex items-center text-sm text-white font-medium">
                                            28 Assets
                                        </div>
                                    </div>

                                    <!-- Pangkalan TUDM Kuantan -->
                                    <div class="flex items-center h-10 relative group cursor-pointer" onclick="showLocationDetails('Pangkalan TUDM Kuantan', 22)">
                                        <div class="relative w-full h-6 bg-slate-700/30 rounded-full overflow-hidden group-hover:bg-slate-600/40 transition-all">
                                            <div class="absolute left-0 top-0 h-full bg-gradient-to-r from-orange-600 to-orange-500 rounded-full transition-all duration-1000 group-hover:from-orange-500 group-hover:to-orange-400" style="width: 44%;"></div>
                                        </div>
                                        <div class="absolute right-2 top-0 h-full flex items-center text-sm text-white font-medium">
                                            22 Assets
                                        </div>
                                    </div>

                                    <!-- Kem Mahkota -->
                                    <div class="flex items-center h-10 relative group cursor-pointer" onclick="showLocationDetails('Kem Mahkota', 18)">
                                        <div class="relative w-full h-6 bg-slate-700/30 rounded-full overflow-hidden group-hover:bg-slate-600/40 transition-all">
                                            <div class="absolute left-0 top-0 h-full bg-gradient-to-r from-red-600 to-red-500 rounded-full transition-all duration-1000 group-hover:from-red-500 group-hover:to-red-400" style="width: 36%;"></div>
                                        </div>
                                        <div class="absolute right-2 top-0 h-full flex items-center text-sm text-white font-medium">
                                            18 Assets
                                        </div>
                                    </div>

                                    <!-- Pangkalan TUDM Labuan -->
                                    <div class="flex items-center h-10 relative group cursor-pointer" onclick="showLocationDetails('Pangkalan TUDM Labuan', 12)">
                                        <div class="relative w-full h-6 bg-slate-700/30 rounded-full overflow-hidden group-hover:bg-slate-600/40 transition-all">
                                            <div class="absolute left-0 top-0 h-full bg-gradient-to-r from-yellow-600 to-yellow-500 rounded-full transition-all duration-1000 group-hover:from-yellow-500 group-hover:to-yellow-400" style="width: 24%;"></div>
                                        </div>
                                        <div class="absolute right-2 top-0 h-full flex items-center text-sm text-white font-medium">
                                            12 Assets
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- X-axis labels -->
                                <div class="absolute left-0 bottom-0 right-0 flex justify-between text-xs text-slate-400 pt-2">
                                    <span>0</span>
                                    <span>10</span>
                                    <span>20</span>
                                    <span>30</span>
                                    <span>40</span>
                                    <span>50</span>
                                </div>
                            </div>
                        </div>
                    </div>
                        
            <!-- Add this code right after the KPI cards in the Mobility tab -->
<div class="glass-card rounded-lg p-6 mb-6">
    <h2 class="text-xl font-bold mb-6 flex items-center">
        <span class="w-3 h-3 bg-red-500 rounded-full mr-3"></span>
        Top 5 Vehicle Types - Highest Predicted Maintenance Risk
    </h2>
    
    <div class="relative h-80">
        <!-- Y-axis labels -->
        <div class="absolute left-0 top-0 h-full w-48 flex flex-col justify-around text-sm text-slate-300 pr-4">
            <div class="text-right">M1A2 Abrams Tank</div>
            <div class="text-right">Stryker Combat Vehicle</div>
            <div class="text-right">Humvee M1151</div>
            <div class="text-right">M88 Recovery Vehicle</div>
            <div class="text-right">MRAP All-Terrain</div>
        </div>
        
        <!-- Chart area -->
        <div class="absolute left-48 top-0 right-0 h-full">
            <!-- Grid lines -->
            <div class="absolute inset-0">
                <div class="absolute left-0 top-0 bottom-0 w-px border-l border-slate-600/40"></div>
                <div class="absolute left-1/5 top-0 bottom-0 w-px border-l border-slate-600/20"></div>
                <div class="absolute left-2/5 top-0 bottom-0 w-px border-l border-slate-600/20"></div>
                <div class="absolute left-3/5 top-0 bottom-0 w-px border-l border-slate-600/20"></div>
                <div class="absolute left-4/5 top-0 bottom-0 w-px border-l border-slate-600/20"></div>
                <div class="absolute right-0 top-0 bottom-0 w-px border-l border-slate-600/40"></div>
            </div>
            
            <!-- Bars container -->
            <div class="absolute inset-0 flex flex-col justify-around py-4">
                <!-- M1A2 Abrams Tank -->
                <div class="flex items-center h-12 relative group cursor-pointer" onclick="showVehicleMaintenanceDetails('M1A2 Abrams Tank', 89)">
                    <div class="relative w-full h-8 bg-slate-700/30 rounded-lg overflow-hidden group-hover:bg-slate-600/40 transition-all">
                        <!-- Risk percentage bar -->
                        <div class="absolute left-0 top-0 h-full bg-gradient-to-r from-red-600 to-red-500 rounded-lg transition-all duration-1000 group-hover:from-red-500 group-hover:to-red-400" style="width: 89%;"></div>
                    </div>
                    <!-- Data labels -->
                    <div class="absolute right-2 top-0 h-full flex items-center text-sm text-white font-medium">
                        89% Risk
                    </div>
                    <!-- Risk indicator -->
                    <div class="absolute left-1 top-0 h-full flex items-center">
                        <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                    </div>
                </div>

                <!-- Stryker Combat Vehicle -->
                <div class="flex items-center h-12 relative group cursor-pointer" onclick="showVehicleMaintenanceDetails('Stryker Combat Vehicle', 76)">
                    <div class="relative w-full h-8 bg-slate-700/30 rounded-lg overflow-hidden group-hover:bg-slate-600/40 transition-all">
                        <!-- Risk percentage bar -->
                        <div class="absolute left-0 top-0 h-full bg-gradient-to-r from-red-500 to-red-400 rounded-lg transition-all duration-1000 group-hover:from-red-400 group-hover:to-red-300" style="width: 76%;"></div>
                    </div>
                    <!-- Data labels -->
                    <div class="absolute right-2 top-0 h-full flex items-center text-sm text-white font-medium">
                        76% Risk
                    </div>
                    <!-- Risk indicator -->
                    <div class="absolute left-1 top-0 h-full flex items-center">
                        <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                    </div>
                </div>

                <!-- Humvee M1151 -->
                <div class="flex items-center h-12 relative group cursor-pointer" onclick="showVehicleMaintenanceDetails('Humvee M1151', 72)">
                    <div class="relative w-full h-8 bg-slate-700/30 rounded-lg overflow-hidden group-hover:bg-slate-600/40 transition-all">
                        <!-- Risk percentage bar -->
                        <div class="absolute left-0 top-0 h-full bg-gradient-to-r from-orange-500 to-orange-400 rounded-lg transition-all duration-1000 group-hover:from-orange-400 group-hover:to-orange-300" style="width: 72%;"></div>
                    </div>
                    <!-- Data labels -->
                    <div class="absolute right-2 top-0 h-full flex items-center text-sm text-white font-medium">
                        72% Risk
                    </div>
                    <!-- Risk indicator -->
                    <div class="absolute left-1 top-0 h-full flex items-center">
                        <div class="w-3 h-3 bg-orange-500 rounded-full"></div>
                    </div>
                </div>

                <!-- M88 Recovery Vehicle -->
                <div class="flex items-center h-12 relative group cursor-pointer" onclick="showVehicleMaintenanceDetails('M88 Recovery Vehicle', 68)">
                    <div class="relative w-full h-8 bg-slate-700/30 rounded-lg overflow-hidden group-hover:bg-slate-600/40 transition-all">
                        <!-- Risk percentage bar -->
                        <div class="absolute left-0 top-0 h-full bg-gradient-to-r from-orange-500 to-orange-400 rounded-lg transition-all duration-1000 group-hover:from-orange-400 group-hover:to-orange-300" style="width: 68%;"></div>
                    </div>
                    <!-- Data labels -->
                    <div class="absolute right-2 top-0 h-full flex items-center text-sm text-white font-medium">
                        68% Risk
                    </div>
                    <!-- Risk indicator -->
                    <div class="absolute left-1 top-0 h-full flex items-center">
                        <div class="w-3 h-3 bg-orange-500 rounded-full"></div>
                    </div>
                </div>

                <!-- MRAP All-Terrain -->
                <div class="flex items-center h-12 relative group cursor-pointer" onclick="showVehicleMaintenanceDetails('MRAP All-Terrain', 65)">
                    <div class="relative w-full h-8 bg-slate-700/30 rounded-lg overflow-hidden group-hover:bg-slate-600/40 transition-all">
                        <!-- Risk percentage bar -->
                        <div class="absolute left-0 top-0 h-full bg-gradient-to-r from-yellow-500 to-yellow-400 rounded-lg transition-all duration-1000 group-hover:from-yellow-400 group-hover:to-yellow-300" style="width: 65%;"></div>
                    </div>
                    <!-- Data labels -->
                    <div class="absolute right-2 top-0 h-full flex items-center text-sm text-white font-medium">
                        65% Risk
                    </div>
                    <!-- Risk indicator -->
                    <div class="absolute left-1 top-0 h-full flex items-center">
                        <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- X-axis labels -->
        <div class="absolute left-48 bottom-0 right-0 h-8 flex items-center justify-between text-xs text-slate-400 px-2">
            <span>0%</span>
            <span>20%</span>
            <span>40%</span>
            <span>60%</span>
            <span>80%</span>
            <span>100%</span>
        </div>
        
        <!-- Legend -->
        <div class="absolute top-0 right-0 flex items-center space-x-4 text-xs">
            <div class="flex items-center space-x-2">
                <div class="w-3 h-3 bg-red-500 rounded"></div>
                <span class="text-slate-400">Critical Risk (70%+)</span>
            </div>
            <div class="flex items-center space-x-2">
                <div class="w-3 h-3 bg-orange-500 rounded"></div>
                <span class="text-slate-400">High Risk (60-69%)</span>
            </div>
            <div class="flex items-center space-x-2">
                <div class="w-3 h-3 bg-yellow-500 rounded"></div>
                <span class="text-slate-400">Medium Risk (50-59%)</span>
            </div>
        </div>
    </div>
    
    <!-- Summary Statistics -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mt-6">
        <div class="text-center p-3 glass-card rounded-lg">
            <div class="text-lg font-bold text-red-400">89%</div>
            <div class="text-xs text-slate-400">Highest Risk</div>
        </div>
        <div class="text-center p-3 glass-card rounded-lg">
            <div class="text-lg font-bold text-yellow-400">74%</div>
            <div class="text-xs text-slate-400">Average Risk</div>
        </div>
        <div class="text-center p-3 glass-card rounded-lg">
            <div class="text-lg font-bold text-red-400">34</div>
            <div class="text-xs text-slate-400">Vehicles at Risk</div>
        </div>
        <div class="text-center p-3 glass-card rounded-lg">
            <div class="text-lg font-bold text-blue-400">7 days</div>
            <div class="text-xs text-slate-400">Avg Time to Failure</div>
        </div>
    </div>
</div>

<!-- Route Optimization Section -->
<div class="glass-card rounded-lg p-6 mb-6">
    <h2 class="text-xl font-bold mb-6 flex items-center">
        <span class="w-3 h-3 bg-blue-500 rounded-full mr-3"></span>
        Route Optimization - Active Operations
    </h2>
    
    <!-- Route Selection Tabs -->
    <div class="flex space-x-2 mb-6">
        <button onclick="showRouteView('current')" id="current-routes-btn" class="route-tab-btn active px-4 py-2 rounded-lg glass-card text-white font-medium transition-all">
            Current Routes
        </button>
        <button onclick="showRouteView('optimized')" id="optimized-routes-btn" class="route-tab-btn px-4 py-2 rounded-lg text-slate-300 hover:text-white transition-all">
            AI Optimized
        </button>
        <button onclick="showRouteView('comparison')" id="comparison-routes-btn" class="route-tab-btn px-4 py-2 rounded-lg text-slate-300 hover:text-white transition-all">
            Comparison
        </button>
    </div>

    <!-- Current Routes View -->
    <div id="current-routes" class="route-content">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- Route Map Visualization -->
            <div class="glass-card p-4 rounded-lg">
                <h3 class="text-lg font-semibold text-white mb-4">Current Route Network</h3>
                <div class="relative h-80 bg-slate-800/50 rounded-lg overflow-hidden">
                    <!-- Map Background -->
                    <div class="absolute inset-0 bg-gradient-to-br from-slate-700/30 to-slate-800/50"></div>
                    
                    <!-- Base Locations -->
                    <div class="absolute top-4 left-6 w-3 h-3 bg-blue-500 rounded-full shadow-lg" title="Kem Terendak"></div>
                    <div class="absolute top-12 right-8 w-3 h-3 bg-green-500 rounded-full shadow-lg" title="Kem Sungai Besi"></div>
                    <div class="absolute bottom-16 left-12 w-3 h-3 bg-purple-500 rounded-full shadow-lg" title="Kem Perdana"></div>
                    <div class="absolute top-20 left-20 w-3 h-3 bg-cyan-500 rounded-full shadow-lg" title="TLDM Lumut"></div>
                    <div class="absolute bottom-8 right-16 w-3 h-3 bg-orange-500 rounded-full shadow-lg" title="TUDM Kuantan"></div>
                    <div class="absolute bottom-20 left-32 w-3 h-3 bg-red-500 rounded-full shadow-lg" title="Kem Mahkota"></div>
                    <div class="absolute top-32 right-20 w-3 h-3 bg-yellow-500 rounded-full shadow-lg" title="TUDM Labuan"></div>
                    
                    <!-- Route Lines -->
                    <svg class="absolute inset-0 w-full h-full">
                        <!-- Route 1: High Risk -->
                        <path d="M 24 16 Q 120 40 312 32" stroke="#ef4444" stroke-width="3" fill="none" stroke-dasharray="5,5" opacity="0.8"/>
                        <!-- Route 2: Medium Risk -->
                        <path d="M 48 256 Q 180 180 368 128" stroke="#f59e0b" stroke-width="3" fill="none" opacity="0.7"/>
                        <!-- Route 3: Low Risk -->
                        <path d="M 80 80 Q 200 120 128 208" stroke="#22c55e" stroke-width="3" fill="none" opacity="0.8"/>
                        <!-- Route 4: Medium Risk -->
                        <path d="M 312 32 Q 280 100 368 272" stroke="#f59e0b" stroke-width="3" fill="none" stroke-dasharray="3,3" opacity="0.7"/>
                    </svg>
                    
                    <!-- Route Labels -->
                    <div class="absolute top-8 left-32 text-xs text-white bg-red-500/80 px-2 py-1 rounded">Route A - High Risk</div>
                    <div class="absolute top-24 right-24 text-xs text-white bg-amber-500/80 px-2 py-1 rounded">Route B - Medium</div>
                    <div class="absolute bottom-32 left-16 text-xs text-white bg-green-500/80 px-2 py-1 rounded">Route C - Low Risk</div>
                    <div class="absolute bottom-12 right-32 text-xs text-white bg-amber-500/80 px-2 py-1 rounded">Route D - Medium</div>
                </div>
            </div>
            
            <!-- Route Statistics -->
            <div class="space-y-4">
                <h3 class="text-lg font-semibold text-white mb-4">Route Performance Metrics</h3>
                
                <!-- Route A -->
                <div class="glass-card p-4 rounded-lg border-l-4 border-red-500 cursor-pointer hover:bg-slate-700/30 transition-all" onclick="showRouteDetails('A')">
                    <div class="flex justify-between items-start mb-2">
                        <div>
                            <h4 class="font-semibold text-white">Route A: Kem Terendak → Kem Sungai Besi</h4>
                            <p class="text-sm text-slate-400">Primary supply corridor</p>
                        </div>
                        <span class="text-xs bg-red-500/20 text-red-400 px-2 py-1 rounded">HIGH RISK</span>
                    </div>
                    <div class="grid grid-cols-3 gap-4 text-sm">
                        <div>
                            <div class="text-slate-400">Duration</div>
                            <div class="text-white font-medium">4.2 hrs</div>
                        </div>
                        <div>
                            <div class="text-slate-400">Distance</div>
                            <div class="text-white font-medium">185 km</div>
                        </div>
                        <div>
                            <div class="text-slate-400">Risk Score</div>
                            <div class="text-red-400 font-medium">8.5/10</div>
                        </div>
                    </div>
                </div>
                
                <!-- Route B -->
                <div class="glass-card p-4 rounded-lg border-l-4 border-amber-500 cursor-pointer hover:bg-slate-700/30 transition-all" onclick="showRouteDetails('B')">
                    <div class="flex justify-between items-start mb-2">
                        <div>
                            <h4 class="font-semibold text-white">Route B: Kem Perdana → TUDM Kuantan</h4>
                            <p class="text-sm text-slate-400">Equipment transport</p>
                        </div>
                        <span class="text-xs bg-amber-500/20 text-amber-400 px-2 py-1 rounded">MEDIUM</span>
                    </div>
                    <div class="grid grid-cols-3 gap-4 text-sm">
                        <div>
                            <div class="text-slate-400">Duration</div>
                            <div class="text-white font-medium">3.8 hrs</div>
                        </div>
                        <div>
                            <div class="text-slate-400">Distance</div>
                            <div class="text-white font-medium">162 km</div>
                        </div>
                        <div>
                            <div class="text-slate-400">Risk Score</div>
                            <div class="text-amber-400 font-medium">5.2/10</div>
                        </div>
                    </div>
                </div>
                
                <!-- Route C -->
                <div class="glass-card p-4 rounded-lg border-l-4 border-green-500 cursor-pointer hover:bg-slate-700/30 transition-all" onclick="showRouteDetails('C')">
                    <div class="flex justify-between items-start mb-2">
                        <div>
                            <h4 class="font-semibold text-white">Route C: TLDM Lumut → Kem Perdana</h4>
                            <p class="text-sm text-slate-400">Personnel transfer</p>
                        </div>
                        <span class="text-xs bg-green-500/20 text-green-400 px-2 py-1 rounded">LOW RISK</span>
                    </div>
                    <div class="grid grid-cols-3 gap-4 text-sm">
                        <div>
                            <div class="text-slate-400">Duration</div>
                            <div class="text-white font-medium">2.1 hrs</div>
                        </div>
                        <div>
                            <div class="text-slate-400">Distance</div>
                            <div class="text-white font-medium">98 km</div>
                        </div>
                        <div>
                            <div class="text-slate-400">Risk Score</div>
                            <div class="text-green-400 font-medium">2.8/10</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- AI Optimized Routes View -->
    <div id="optimized-routes" class="route-content hidden">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- Optimized Map -->
            <div class="glass-card p-4 rounded-lg">
                <h3 class="text-lg font-semibold text-white mb-4">AI Optimized Network</h3>
                <div class="relative h-80 bg-slate-800/50 rounded-lg overflow-hidden">
                    <!-- Map Background -->
                    <div class="absolute inset-0 bg-gradient-to-br from-slate-700/30 to-slate-800/50"></div>
                    
                    <!-- Base Locations (same as current) -->
                    <div class="absolute top-4 left-6 w-3 h-3 bg-blue-500 rounded-full shadow-lg" title="Kem Terendak"></div>
                    <div class="absolute top-12 right-8 w-3 h-3 bg-green-500 rounded-full shadow-lg" title="Kem Sungai Besi"></div>
                    <div class="absolute bottom-16 left-12 w-3 h-3 bg-purple-500 rounded-full shadow-lg" title="Kem Perdana"></div>
                    <div class="absolute top-20 left-20 w-3 h-3 bg-cyan-500 rounded-full shadow-lg" title="TLDM Lumut"></div>
                    <div class="absolute bottom-8 right-16 w-3 h-3 bg-orange-500 rounded-full shadow-lg" title="TUDM Kuantan"></div>
                    <div class="absolute bottom-20 left-32 w-3 h-3 bg-red-500 rounded-full shadow-lg" title="Kem Mahkota"></div>
                    <div class="absolute top-32 right-20 w-3 h-3 bg-yellow-500 rounded-full shadow-lg" title="TUDM Labuan"></div>
                    
                    <!-- Optimized Route Lines -->
                    <svg class="absolute inset-0 w-full h-full">
                        <!-- Optimized Route 1: Now Low Risk -->
                        <path d="M 24 16 Q 80 60 312 32" stroke="#22c55e" stroke-width="4" fill="none" opacity="0.9"/>
                        <!-- Optimized Route 2: Improved -->
                        <path d="M 48 256 Q 140 200 368 128" stroke="#22c55e" stroke-width="4" fill="none" opacity="0.8"/>
                        <!-- Optimized Route 3: Enhanced -->
                        <path d="M 80 80 Q 160 100 128 208" stroke="#22c55e" stroke-width="4" fill="none" opacity="0.9"/>
                        <!-- New Optimized Route -->
                        <path d="M 312 32 Q 320 140 368 272" stroke="#10b981" stroke-width="4" fill="none" opacity="0.8"/>
                    </svg>
                    
                    <!-- Optimized Route Labels -->
                    <div class="absolute top-8 left-32 text-xs text-white bg-green-500/80 px-2 py-1 rounded">Route A+ - Optimized</div>
                    <div class="absolute top-24 right-24 text-xs text-white bg-green-500/80 px-2 py-1 rounded">Route B+ - Enhanced</div>
                    <div class="absolute bottom-32 left-16 text-xs text-white bg-green-500/80 px-2 py-1 rounded">Route C+ - Improved</div>
                    <div class="absolute bottom-12 right-32 text-xs text-white bg-emerald-500/80 px-2 py-1 rounded">Route D+ - New</div>
                    
                    <!-- AI Badge -->
                    <div class="absolute top-2 right-2 text-xs text-white bg-blue-500/80 px-2 py-1 rounded flex items-center">
                        <span class="w-2 h-2 bg-white rounded-full mr-1 animate-pulse"></span>
                        AI Optimized
                    </div>
                </div>
            </div>
            
            <!-- Optimized Statistics -->
            <div class="space-y-4">
                <h3 class="text-lg font-semibold text-white mb-4">Optimization Results</h3>
                
                <!-- Route A+ -->
                <div class="glass-card p-4 rounded-lg border-l-4 border-green-500 cursor-pointer hover:bg-slate-700/30 transition-all" onclick="showOptimizedRouteDetails('A+')">
                    <div class="flex justify-between items-start mb-2">
                        <div>
                            <h4 class="font-semibold text-white">Route A+: Kem Terendak → Kem Sungai Besi</h4>
                            <p class="text-sm text-slate-400">Optimized supply corridor</p>
                        </div>
                        <span class="text-xs bg-green-500/20 text-green-400 px-2 py-1 rounded">OPTIMIZED</span>
                    </div>
                    <div class="grid grid-cols-3 gap-4 text-sm">
                        <div>
                            <div class="text-slate-400">Duration</div>
                            <div class="text-green-400 font-medium">3.1 hrs <span class="text-xs">(-26%)</span></div>
                        </div>
                        <div>
                            <div class="text-slate-400">Distance</div>
                            <div class="text-green-400 font-medium">142 km <span class="text-xs">(-23%)</span></div>
                        </div>
                        <div>
                            <div class="text-slate-400">Risk Score</div>
                            <div class="text-green-400 font-medium">3.2/10 <span class="text-xs">(-62%)</span></div>
                        </div>
                    </div>
                </div>
                
                <!-- Route B+ -->
                <div class="glass-card p-4 rounded-lg border-l-4 border-green-500 cursor-pointer hover:bg-slate-700/30 transition-all" onclick="showOptimizedRouteDetails('B+')">
                    <div class="flex justify-between items-start mb-2">
                        <div>
                            <h4 class="font-semibold text-white">Route B+: Kem Perdana → TUDM Kuantan</h4>
                            <p class="text-sm text-slate-400">Enhanced equipment transport</p>
                        </div>
                        <span class="text-xs bg-green-500/20 text-green-400 px-2 py-1 rounded">ENHANCED</span>
                    </div>
                    <div class="grid grid-cols-3 gap-4 text-sm">
                        <div>
                            <div class="text-slate-400">Duration</div>
                            <div class="text-green-400 font-medium">2.9 hrs <span class="text-xs">(-24%)</span></div>
                        </div>
                        <div>
                            <div class="text-slate-400">Distance</div>
                            <div class="text-green-400 font-medium">138 km <span class="text-xs">(-15%)</span></div>
                        </div>
                        <div>
                            <div class="text-slate-400">Risk Score</div>
                            <div class="text-green-400 font-medium">2.8/10 <span class="text-xs">(-46%)</span></div>
                        </div>
                    </div>
                </div>
                
                <!-- Route C+ -->
                <div class="glass-card p-4 rounded-lg border-l-4 border-emerald-500 cursor-pointer hover:bg-slate-700/30 transition-all" onclick="showOptimizedRouteDetails('C+')">
                    <div class="flex justify-between items-start mb-2">
                        <div>
                            <h4 class="font-semibold text-white">Route C+: TLDM Lumut → Kem Perdana</h4>
                            <p class="text-sm text-slate-400">Improved personnel transfer</p>
                        </div>
                        <span class="text-xs bg-emerald-500/20 text-emerald-400 px-2 py-1 rounded">IMPROVED</span>
                    </div>
                    <div class="grid grid-cols-3 gap-4 text-sm">
                        <div>
                            <div class="text-slate-400">Duration</div>
                            <div class="text-emerald-400 font-medium">1.8 hrs <span class="text-xs">(-14%)</span></div>
                        </div>
                        <div>
                            <div class="text-slate-400">Distance</div>
                            <div class="text-emerald-400 font-medium">89 km <span class="text-xs">(-9%)</span></div>
                        </div>
                        <div>
                            <div class="text-slate-400">Risk Score</div>
                            <div class="text-emerald-400 font-medium">1.9/10 <span class="text-xs">(-32%)</span></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Comparison View -->
    <div id="comparison-routes" class="route-content hidden">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
            <!-- Efficiency Comparison Chart -->
            <div class="glass-card p-4 rounded-lg">
                <h3 class="text-lg font-semibold text-white mb-4">Efficiency Comparison</h3>
                <div class="space-y-4">
                    <!-- Time Savings -->
                    <div>
                        <div class="flex justify-between text-sm mb-2">
                            <span class="text-slate-400">Time Savings</span>
                            <span class="text-green-400 font-medium">-21% Average</span>
                        </div>
                        <div class="w-full bg-slate-700/50 rounded-full h-3">
                            <div class="bg-gradient-to-r from-green-600 to-green-400 h-3 rounded-full" style="width: 78%;"></div>
                        </div>
                    </div>
                    
                    <!-- Distance Reduction -->
                    <div>
                        <div class="flex justify-between text-sm mb-2">
                            <span class="text-slate-400">Distance Reduction</span>
                            <span class="text-blue-400 font-medium">-16% Average</span>
                        </div>
                        <div class="w-full bg-slate-700/50 rounded-full h-3">
                            <div class="bg-gradient-to-r from-blue-600 to-blue-400 h-3 rounded-full" style="width: 84%;"></div>
                        </div>
                    </div>
                    
                    <!-- Risk Reduction -->
                    <div>
                        <div class="flex justify-between text-sm mb-2">
                            <span class="text-slate-400">Risk Reduction</span>
                            <span class="text-purple-400 font-medium">-47% Average</span>
                        </div>
                        <div class="w-full bg-slate-700/50 rounded-full h-3">
                            <div class="bg-gradient-to-r from-purple-600 to-purple-400 h-3 rounded-full" style="width: 53%;"></div>
                        </div>
                    </div>
                    
                    <!-- Fuel Efficiency -->
                    <div>
                        <div class="flex justify-between text-sm mb-2">
                            <span class="text-slate-400">Fuel Efficiency</span>
                            <span class="text-orange-400 font-medium">+18% Improvement</span>
                        </div>
                        <div class="w-full bg-slate-700/50 rounded-full h-3">
                            <div class="bg-gradient-to-r from-orange-600 to-orange-400 h-3 rounded-full" style="width: 82%;"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Cost Analysis -->
            <div class="glass-card p-4 rounded-lg">
                <h3 class="text-lg font-semibold text-white mb-4">Cost Impact Analysis</h3>
                <div class="space-y-4">
                    <div class="flex justify-between items-center p-3 bg-slate-700/30 rounded-lg">
                        <div>
                            <div class="text-white font-medium">Monthly Fuel Savings</div>
                            <div class="text-sm text-slate-400">Optimized routes</div>
                        </div>
                        <div class="text-green-400 font-bold">RM 24,500</div>
                    </div>
                    
                    <div class="flex justify-between items-center p-3 bg-slate-700/30 rounded-lg">
                        <div>
                            <div class="text-white font-medium">Maintenance Reduction</div>
                            <div class="text-sm text-slate-400">Lower vehicle wear</div>
                        </div>
                        <div class="text-blue-400 font-bold">RM 18,200</div>
                    </div>
                    
                    <div class="flex justify-between items-center p-3 bg-slate-700/30 rounded-lg">
                        <div>
                            <div class="text-white font-medium">Risk Mitigation</div>
                            <div class="text-sm text-slate-400">Avoided incidents</div>
                        </div>
                        <div class="text-purple-400 font-bold">RM 45,800</div>
                    </div>
                    
                    <div class="border-t border-slate-600 pt-3">
                        <div class="flex justify-between items-center">
                            <div class="text-white font-semibold">Total Monthly Savings</div>
                            <div class="text-green-400 font-bold text-lg">RM 88,500</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Detailed Comparison Table -->
        <div class="glass-card p-4 rounded-lg">
            <h3 class="text-lg font-semibold text-white mb-4">Route-by-Route Comparison</h3>
            <div class="overflow-x-auto">
                <table class="w-full text-sm">
                    <thead>
                        <tr class="border-b border-slate-600">
                            <th class="text-left text-slate-400 pb-2">Route</th>
                            <th class="text-center text-slate-400 pb-2">Current Time</th>
                            <th class="text-center text-slate-400 pb-2">Optimized Time</th>
                            <th class="text-center text-slate-400 pb-2">Time Saved</th>
                            <th class="text-center text-slate-400 pb-2">Risk Reduction</th>
                            <th class="text-center text-slate-400 pb-2">Status</th>
                        </tr>
                    </thead>
                    <tbody class="space-y-2">
                        <tr class="border-b border-slate-700/50">
                            <td class="py-3 text-white font-medium">Route A</td>
                            <td class="py-3 text-center text-slate-300">4.2 hrs</td>
                            <td class="py-3 text-center text-green-400">3.1 hrs</td>
                            <td class="py-3 text-center text-green-400 font-medium">1.1 hrs (26%)</td>
                            <td class="py-3 text-center text-purple-400 font-medium">62%</td>
                            <td class="py-3 text-center">
                                <span class="bg-green-500/20 text-green-400 px-2 py-1 rounded text-xs">Ready</span>
                            </td>
                        </tr>
                        <tr class="border-b border-slate-700/50">
                            <td class="py-3 text-white font-medium">Route B</td>
                            <td class="py-3 text-center text-slate-300">3.8 hrs</td>
                            <td class="py-3 text-center text-green-400">2.9 hrs</td>
                            <td class="py-3 text-center text-green-400 font-medium">0.9 hrs (24%)</td>
                            <td class="py-3 text-center text-purple-400 font-medium">46%</td>
                            <td class="py-3 text-center">
                                <span class="bg-green-500/20 text-green-400 px-2 py-1 rounded text-xs">Ready</span>
                            </td>
                        </tr>
                        <tr>
                            <td class="py-3 text-white font-medium">Route C</td>
                            <td class="py-3 text-center text-slate-300">2.1 hrs</td>
                            <td class="py-3 text-center text-green-400">1.8 hrs</td>
                            <td class="py-3 text-center text-green-400 font-medium">0.3 hrs (14%)</td>
                            <td class="py-3 text-center text-purple-400 font-medium">32%</td>
                            <td class="py-3 text-center">
                                <span class="bg-blue-500/20 text-blue-400 px-2 py-1 rounded text-xs">Testing</span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    
    <!-- Action Buttons -->
    <div class="flex justify-end space-x-3 mt-6">
        <button class="px-4 py-2 glass-card rounded-lg text-slate-300 hover:text-white transition-all" onclick="exportRouteData()">
            Export Data
        </button>
        <button class="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-white font-medium transition-all" onclick="implementOptimization()">
            Implement Optimization
        </button>
    </div>
</div>

<!-- Predictive Asset Allocation Section -->
<div class="glass-card rounded-lg p-6 mb-6">
    <h2 class="text-xl font-bold mb-6 flex items-center">
        <span class="w-3 h-3 bg-purple-500 rounded-full mr-3"></span>
        Predictive Asset Allocation - Strategic Optimization View
    </h2>

    <!-- Mission Overview Cards -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
        <!-- Operation Thunder -->
        <div class="glass-card rounded-lg p-6 border-l-4 border-red-500">
            <div class="flex justify-between items-start mb-4">
                <div>
                    <h3 class="text-lg font-bold text-white">Operation Thunder</h3>
                    <p class="text-slate-400 text-sm">Combat Training Exercise</p>
                </div>
                <span class="px-2 py-1 bg-red-500/20 text-red-400 rounded-full text-xs font-medium">Priority 1</span>
            </div>
            <div class="space-y-2 text-sm">
                <div class="flex justify-between">
                    <span class="text-slate-400">Date:</span>
                    <span class="text-white">Dec 28 - Jan 5</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-slate-400">Duration:</span>
                    <span class="text-white">9 days</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-slate-400">Personnel:</span>
                    <span class="text-white">850</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-slate-400">Location:</span>
                    <span class="text-white">Northern Command</span>
                </div>
            </div>
        </div>

        <!-- Humanitarian Aid -->
        <div class="glass-card rounded-lg p-6 border-l-4 border-blue-500">
            <div class="flex justify-between items-start mb-4">
                <div>
                    <h3 class="text-lg font-bold text-white">Humanitarian Aid</h3>
                    <p class="text-slate-400 text-sm">Flood Relief Operation</p>
                </div>
                <span class="px-2 py-1 bg-blue-500/20 text-blue-400 rounded-full text-xs font-medium">Priority 2</span>
            </div>
            <div class="space-y-2 text-sm">
                <div class="flex justify-between">
                    <span class="text-slate-400">Date:</span>
                    <span class="text-white">Jan 8 - Jan 15</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-slate-400">Duration:</span>
                    <span class="text-white">8 days</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-slate-400">Personnel:</span>
                    <span class="text-white">450</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-slate-400">Location:</span>
                    <span class="text-white">Eastern Command</span>
                </div>
            </div>
        </div>

        <!-- Border Patrol -->
        <div class="glass-card rounded-lg p-6 border-l-4 border-green-500">
            <div class="flex justify-between items-start mb-4">
                <div>
                    <h3 class="text-lg font-bold text-white">Border Patrol</h3>
                    <p class="text-slate-400 text-sm">Security Operations</p>
                </div>
                <span class="px-2 py-1 bg-green-500/20 text-green-400 rounded-full text-xs font-medium">Priority 3</span>
            </div>
            <div class="space-y-2 text-sm">
                <div class="flex justify-between">
                    <span class="text-slate-400">Date:</span>
                    <span class="text-white">Jan 12 - Ongoing</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-slate-400">Duration:</span>
                    <span class="text-white">Continuous</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-slate-400">Personnel:</span>
                    <span class="text-white">320</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-slate-400">Location:</span>
                    <span class="text-white">Western Command</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Asset Allocation Comparison -->
    <div class="glass-card rounded-lg p-6 mb-8">
        <h3 class="text-lg font-semibold text-white mb-6">Asset Allocation Optimization - Current vs Recommended</h3>
        
        <div class="space-y-6">
            <!-- Humvee M1151 -->
            <div class="group cursor-pointer" onclick="showAssetAllocationDetails('Humvee M1151')">
                <div class="flex justify-between items-center mb-3">
                    <div class="flex items-center space-x-3">
                        <div class="w-4 h-4 bg-blue-500 rounded"></div>
                        <span class="font-medium text-white">Humvee M1151</span>
                    </div>
                    <div class="text-right">
                        <span class="text-green-400 font-semibold">+15% Efficiency</span>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="flex-1">
                        <div class="text-xs text-slate-400 mb-1">Current Allocation</div>
                        <div class="w-full bg-slate-700 rounded-full h-4">
                            <div class="bg-blue-500 h-4 rounded-full transition-all duration-1000" style="width: 65%"></div>
                        </div>
                        <div class="text-xs text-slate-400 mt-1 text-center">65% Utilized</div>
                    </div>
                    <div class="text-2xl text-slate-400">→</div>
                    <div class="flex-1">
                        <div class="text-xs text-slate-400 mb-1">AI Recommended</div>
                        <div class="w-full bg-slate-700 rounded-full h-4">
                            <div class="bg-green-500 h-4 rounded-full transition-all duration-1000" style="width: 80%"></div>
                        </div>
                        <div class="text-xs text-slate-400 mt-1 text-center">80% Optimized</div>
                    </div>
                </div>
            </div>

            <!-- Stryker Combat Vehicle -->
            <div class="group cursor-pointer" onclick="showAssetAllocationDetails('Stryker Combat Vehicle')">
                <div class="flex justify-between items-center mb-3">
                    <div class="flex items-center space-x-3">
                        <div class="w-4 h-4 bg-green-500 rounded"></div>
                        <span class="font-medium text-white">Stryker Combat Vehicle</span>
                    </div>
                    <div class="text-right">
                        <span class="text-green-400 font-semibold">+22% Efficiency</span>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="flex-1">
                        <div class="text-xs text-slate-400 mb-1">Current Allocation</div>
                        <div class="w-full bg-slate-700 rounded-full h-4">
                            <div class="bg-green-500 h-4 rounded-full transition-all duration-1000" style="width: 58%"></div>
                        </div>
                        <div class="text-xs text-slate-400 mt-1 text-center">58% Utilized</div>
                    </div>
                    <div class="text-2xl text-slate-400">→</div>
                    <div class="flex-1">
                        <div class="text-xs text-slate-400 mb-1">AI Recommended</div>
                        <div class="w-full bg-slate-700 rounded-full h-4">
                            <div class="bg-green-500 h-4 rounded-full transition-all duration-1000" style="width: 80%"></div>
                        </div>
                        <div class="text-xs text-slate-400 mt-1 text-center">80% Optimized</div>
                    </div>
                </div>
            </div>

            <!-- MRAP All-Terrain -->
            <div class="group cursor-pointer" onclick="showAssetAllocationDetails('MRAP All-Terrain')">
                <div class="flex justify-between items-center mb-3">
                    <div class="flex items-center space-x-3">
                        <div class="w-4 h-4 bg-yellow-500 rounded"></div>
                        <span class="font-medium text-white">MRAP All-Terrain</span>
                    </div>
                    <div class="text-right">
                        <span class="text-green-400 font-semibold">+18% Efficiency</span>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="flex-1">
                        <div class="text-xs text-slate-400 mb-1">Current Allocation</div>
                        <div class="w-full bg-slate-700 rounded-full h-4">
                            <div class="bg-yellow-500 h-4 rounded-full transition-all duration-1000" style="width: 72%"></div>
                        </div>
                        <div class="text-xs text-slate-400 mt-1 text-center">72% Utilized</div>
                    </div>
                    <div class="text-2xl text-slate-400">→</div>
                    <div class="flex-1">
                        <div class="text-xs text-slate-400 mb-1">AI Recommended</div>
                        <div class="w-full bg-slate-700 rounded-full h-4">
                            <div class="bg-green-500 h-4 rounded-full transition-all duration-1000" style="width: 90%"></div>
                        </div>
                        <div class="text-xs text-slate-400 mt-1 text-center">90% Optimized</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mission Readiness Timeline -->
    <div class="glass-card rounded-lg p-6 mb-8">
        <h3 class="text-lg font-semibold text-white mb-6">Mission Readiness Timeline</h3>
        
        <div class="relative h-32">
            <!-- Timeline -->
            <div class="absolute inset-0 flex items-center">
                <!-- Operation Thunder -->
                <div class="flex-1 relative group cursor-pointer" onclick="showMissionReadinessDetails('Operation Thunder')">
                    <div class="absolute top-0 left-0 right-0 h-4 bg-slate-700 rounded-full">
                        <div class="h-4 bg-red-500 rounded-full transition-all duration-1000" style="width: 85%"></div>
                    </div>
                    <div class="absolute top-6 left-0 text-center w-full">
                        <div class="text-xs text-slate-300">Operation Thunder</div>
                        <div class="text-xs text-red-400 font-semibold">85% Ready</div>
                    </div>
                    <div class="absolute -top-8 left-1/2 transform -translate-x-1/2 bg-slate-800 px-2 py-1 rounded text-xs text-white opacity-0 group-hover:opacity-100 transition-opacity">
                        9 days • 850 personnel
                    </div>
                </div>

                <!-- Humanitarian Aid -->
                <div class="flex-1 relative group cursor-pointer mx-8" onclick="showMissionReadinessDetails('Humanitarian Aid')">
                    <div class="absolute top-0 left-0 right-0 h-4 bg-slate-700 rounded-full">
                        <div class="h-4 bg-blue-500 rounded-full transition-all duration-1000" style="width: 65%"></div>
                    </div>
                    <div class="absolute top-6 left-0 text-center w-full">
                        <div class="text-xs text-slate-300">Humanitarian Aid</div>
                        <div class="text-xs text-blue-400 font-semibold">65% Ready</div>
                    </div>
                    <div class="absolute -top-8 left-1/2 transform -translate-x-1/2 bg-slate-800 px-2 py-1 rounded text-xs text-white opacity-0 group-hover:opacity-100 transition-opacity">
                        8 days • 450 personnel
                    </div>
                </div>

                <!-- Border Patrol -->
                <div class="flex-1 relative group cursor-pointer" onclick="showMissionReadinessDetails('Border Patrol')">
                    <div class="absolute top-0 left-0 right-0 h-4 bg-slate-700 rounded-full">
                        <div class="h-4 bg-green-500 rounded-full transition-all duration-1000" style="width: 92%"></div>
                    </div>
                    <div class="absolute top-6 left-0 text-center w-full">
                        <div class="text-xs text-slate-300">Border Patrol</div>
                        <div class="text-xs text-green-400 font-semibold">92% Ready</div>
                    </div>
                    <div class="absolute -top-8 left-1/2 transform -translate-x-1/2 bg-slate-800 px-2 py-1 rounded text-xs text-white opacity-0 group-hover:opacity-100 transition-opacity">
                        Continuous • 320 personnel
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Asset Availability Heatmap -->
    <div class="glass-card rounded-lg p-6 mb-8">
        <div class="flex justify-between items-center mb-6">
            <h3 class="text-lg font-semibold text-white">Asset Availability Heatmap - 30-Day Forecast</h3>
            <div class="flex items-center space-x-4 text-sm">
                <div class="flex items-center space-x-2">
                    <div class="w-3 h-3 bg-green-500 rounded"></div>
                    <span class="text-slate-400">High Availability</span>
                </div>
                <div class="flex items-center space-x-2">
                    <div class="w-3 h-3 bg-yellow-500 rounded"></div>
                    <span class="text-slate-400">Medium</span>
                </div>
                <div class="flex items-center space-x-2">
                    <div class="w-3 h-3 bg-red-500 rounded"></div>
                    <span class="text-slate-400">Critical</span>
                </div>
            </div>
        </div>

        <div class="overflow-x-auto">
            <table class="w-full text-sm">
                <thead>
                    <tr class="border-b border-slate-700">
                        <th class="text-left py-3 px-3 text-slate-300 font-medium">Asset Type</th>
                        <th class="text-center py-3 px-2 text-slate-300 font-medium">Week 1</th>
                        <th class="text-center py-3 px-2 text-slate-300 font-medium">Week 2</th>
                        <th class="text-center py-3 px-2 text-slate-300 font-medium">Week 3</th>
                        <th class="text-center py-3 px-2 text-slate-300 font-medium">Week 4</th>
                        <th class="text-center py-3 px-3 text-slate-300 font-medium">Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="border-b border-slate-800 hover:bg-slate-800/30 transition-colors">
                        <td class="py-4 px-3 font-medium">Humvee M1151</td>
                        <td class="py-4 px-2 text-center">
                            <div class="w-8 h-8 bg-green-500/80 rounded mx-auto cursor-pointer hover:scale-110 transition-transform" onclick="showAssetAvailabilityDetails('Humvee M1151', 'Week 1')"></div>
                        </td>
                        <td class="py-4 px-2 text-center">
                            <div class="w-8 h-8 bg-yellow-500/80 rounded mx-auto cursor-pointer hover:scale-110 transition-transform" onclick="showAssetAvailabilityDetails('Humvee M1151', 'Week 2')"></div>
                        </td>
                        <td class="py-4 px-2 text-center">
                            <div class="w-8 h-8 bg-red-500/80 rounded mx-auto cursor-pointer hover:scale-110 transition-transform" onclick="showAssetAvailabilityDetails('Humvee M1151', 'Week 3')"></div>
                        </td>
                        <td class="py-4 px-2 text-center">
                            <div class="w-8 h-8 bg-green-500/80 rounded mx-auto cursor-pointer hover:scale-110 transition-transform" onclick="showAssetAvailabilityDetails('Humvee M1151', 'Week 4')"></div>
                        </td>
                        <td class="py-4 px-3 text-center">
                            <button onclick="showReallocationPlan('Humvee M1151')" class="px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded text-xs transition-colors">Optimize</button>
                        </td>
                    </tr>
                    <tr class="border-b border-slate-800 hover:bg-slate-800/30 transition-colors">
                        <td class="py-4 px-3 font-medium">Stryker Combat Vehicle</td>
                        <td class="py-4 px-2 text-center">
                            <div class="w-8 h-8 bg-green-500/80 rounded mx-auto cursor-pointer hover:scale-110 transition-transform" onclick="showAssetAvailabilityDetails('Stryker Combat Vehicle', 'Week 1')"></div>
                        </td>
                        <td class="py-4 px-2 text-center">
                            <div class="w-8 h-8 bg-green-500/80 rounded mx-auto cursor-pointer hover:scale-110 transition-transform" onclick="showAssetAvailabilityDetails('Stryker Combat Vehicle', 'Week 2')"></div>
                        </td>
                        <td class="py-4 px-2 text-center">
                            <div class="w-8 h-8 bg-yellow-500/80 rounded mx-auto cursor-pointer hover:scale-110 transition-transform" onclick="showAssetAvailabilityDetails('Stryker Combat Vehicle', 'Week 3')"></div>
                        </td>
                        <td class="py-4 px-2 text-center">
                            <div class="w-8 h-8 bg-red-500/80 rounded mx-auto cursor-pointer hover:scale-110 transition-transform" onclick="showAssetAvailabilityDetails('Stryker Combat Vehicle', 'Week 4')"></div>
                        </td>
                        <td class="py-4 px-3 text-center">
                            <button onclick="showReallocationPlan('Stryker Combat Vehicle')" class="px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded text-xs transition-colors">Optimize</button>
                        </td>
                    </tr>
                    <tr class="hover:bg-slate-800/30 transition-colors">
                        <td class="py-4 px-3 font-medium">MRAP All-Terrain</td>
                        <td class="py-4 px-2 text-center">
                            <div class="w-8 h-8 bg-red-500/80 rounded mx-auto cursor-pointer hover:scale-110 transition-transform" onclick="showAssetAvailabilityDetails('MRAP All-Terrain', 'Week 1')"></div>
                        </td>
                        <td class="py-4 px-2 text-center">
                            <div class="w-8 h-8 bg-yellow-500/80 rounded mx-auto cursor-pointer hover:scale-110 transition-transform" onclick="showAssetAvailabilityDetails('MRAP All-Terrain', 'Week 2')"></div>
                        </td>
                        <td class="py-4 px-2 text-center">
                            <div class="w-8 h-8 bg-green-500/80 rounded mx-auto cursor-pointer hover:scale-110 transition-transform" onclick="showAssetAvailabilityDetails('MRAP All-Terrain', 'Week 3')"></div>
                        </td>
                        <td class="py-4 px-2 text-center">
                            <div class="w-8 h-8 bg-green-500/80 rounded mx-auto cursor-pointer hover:scale-110 transition-transform" onclick="showAssetAvailabilityDetails('MRAP All-Terrain', 'Week 4')"></div>
                        </td>
                        <td class="py-4 px-3 text-center">
                            <button onclick="showReallocationPlan('MRAP All-Terrain')" class="px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded text-xs transition-colors">Optimize</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Optimization Cards -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
        <!-- Asset Reallocation -->
        <div class="glass-card rounded-lg p-6">
            <div class="flex items-center space-x-3 mb-4">
                <div class="w-12 h-12 bg-purple-500/20 rounded-lg flex items-center justify-center">
                    <span class="text-2xl">🔄</span>
                </div>
                <div>
                    <h4 class="font-semibold text-white">Asset Reallocation</h4>
                    <p class="text-slate-400 text-sm">Smart redistribution</p>
                </div>
            </div>
            <div class="space-y-3">
                <div class="flex justify-between text-sm">
                    <span class="text-slate-400">Move from Northern → Western</span>
                    <span class="text-green-400">8 Humvees</span>
                </div>
                <div class="flex justify-between text-sm">
                    <span class="text-slate-400">Eastern → Southern</span>
                    <span class="text-green-400">5 Strykers</span>
                </div>
                <div class="flex justify-between text-sm">
                    <span class="text-slate-400">Central → Eastern</span>
                    <span class="text-green-400">3 MRAPs</span>
                </div>
            </div>
        </div>

        <!-- Efficiency Gains -->
        <div class="glass-card rounded-lg p-6">
            <div class="flex items-center space-x-3 mb-4">
                <div class="w-12 h-12 bg-green-500/20 rounded-lg flex items-center justify-center">
                    <span class="text-2xl">📈</span>
                </div>
                <div>
                    <h4 class="font-semibold text-white">Efficiency Gains</h4>
                    <p class="text-slate-400 text-sm">Optimization impact</p>
                </div>
            </div>
            <div class="space-y-3">
                <div class="flex justify-between text-sm">
                    <span class="text-slate-400">Mission Readiness</span>
                    <span class="text-green-400 font-semibold">+23%</span>
                </div>
                <div class="flex justify-between text-sm">
                    <span class="text-slate-400">Resource Utilization</span>
                    <span class="text-green-400 font-semibold">+18%</span>
                </div>
                <div class="flex justify-between text-sm">
                    <span class="text-slate-400">Cost Savings</span>
                    <span class="text-green-400 font-semibold">+15%</span>
                </div>
            </div>
        </div>

        <!-- Risk Mitigation -->
        <div class="glass-card rounded-lg p-6">
            <div class="flex items-center space-x-3 mb-4">
                <div class="w-12 h-12 bg-blue-500/20 rounded-lg flex items-center justify-center">
                    <span class="text-2xl">🛡️</span>
                </div>
                <div>
                    <h4 class="font-semibold text-white">Risk Mitigation</h4>
                    <p class="text-slate-400 text-sm">Critical shortages</p>
                </div>
            </div>
            <div class="space-y-3">
                <div class="flex justify-between text-sm">
                    <span class="text-slate-400">Critical Periods</span>
                    <span class="text-red-400 font-semibold">3</span>
                </div>
                <div class="flex justify-between text-sm">
                    <span class="text-slate-400">Assets at Risk</span>
                    <span class="text-yellow-400 font-semibold">12</span>
                </div>
                <div class="flex justify-between text-sm">
                    <span class="text-slate-400">Resolved Issues</span>
                    <span class="text-green-400 font-semibold">8</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Action Buttons -->
    <div class="flex flex-wrap gap-3 justify-end">
        <button onclick="exportAllocationData()" class="px-4 py-2 glass-card rounded-lg text-slate-300 hover:text-white transition-all">
            Export Data
        </button>
        <button onclick="scheduleReallocation()" class="px-4 py-2 bg-yellow-600 hover:bg-yellow-700 rounded-lg text-white font-medium transition-all">
            Schedule Reallocation
        </button>
        <button onclick="implementOptimization()" class="px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg text-white font-medium transition-all">
            Implement Recommendations
        </button>
        <button onclick="runSimulation()" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-white font-medium transition-all">
            Run Simulation
        </button>
    </div>
</div>
        </div><!-- This closes the logistics-tab -->

        <div id="intelligence-tab" class="tab-content hidden">
            
        <!-- KPI Cards with Sparklines -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
            <!-- Ammunition Stock -->
            <div class="glass-card rounded-lg p-6 relative group cursor-pointer hover:scale-105 transition-all duration-300" onclick="showDrillThrough('ammunition')">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-slate-300 text-sm font-medium">Ammunition Stock</h3>
                    <span class="status-indicator bg-yellow-500"></span>
                </div>
                <div class="text-3xl font-bold text-white mb-2">73%</div>
                <div class="flex items-center space-x-2 mb-3">
                    <svg class="w-4 h-4 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M14.707 10.293a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L9 12.586V5a1 1 0 012 0v7.586l2.293-2.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                    </svg>
                    <span class="text-yellow-400 text-sm">-5.2%</span>
                </div>
                <!-- Mini sparkline -->
                <div class="h-8 flex items-end space-x-1">
                    <div class="w-1 bg-yellow-500/30 h-6"></div>
                    <div class="w-1 bg-yellow-500/40 h-7"></div>
                    <div class="w-1 bg-yellow-500/50 h-5"></div>
                    <div class="w-1 bg-yellow-500/60 h-4"></div>
                    <div class="w-1 bg-yellow-500/70 h-3"></div>
                    <div class="w-1 bg-yellow-500/80 h-4"></div>
                    <div class="w-1 bg-yellow-500 h-3"></div>
                </div>
                
                <!-- Floating Popup Insight -->
                <div class="absolute top-1/2 right-2 transform -translate-y-1/2 w-48 bg-slate-900/95 backdrop-blur-sm rounded-lg p-2.5 opacity-0 group-hover:opacity-100 transition-all duration-300 z-[100] shadow-2xl border border-yellow-500/30 pointer-events-none">
                    <div class="text-yellow-400 text-xs font-semibold mb-1">⚠️ AI INSIGHT</div>
                    <div class="text-white text-xs font-medium mb-1">Ammunition Depletion Alert</div>
                    <div class="text-slate-300 text-xs leading-relaxed">
                        • Current consumption rate: 4.2%/week<br>
                        • Resupply needed within 18 days<br>
                        • Priority: Small arms ammunition<br>
                        • Recommend immediate procurement
                    </div>
                    <!-- Arrow pointing left to card -->
                    <div class="absolute top-4 right-full w-0 h-0 border-t-4 border-b-4 border-r-4 border-t-transparent border-b-transparent border-r-yellow-500/30"></div>
                </div>
            </div>

            <!-- Weapon System Readiness -->
            <div class="glass-card rounded-lg p-6 relative group cursor-pointer hover:scale-105 transition-all duration-300" onclick="showDrillThrough('weapons')">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-slate-300 text-sm font-medium">Weapon Readiness</h3>
                    <span class="status-indicator bg-green-500"></span>
                </div>
                <div class="text-3xl font-bold text-white mb-2">91%</div>
                <div class="flex items-center space-x-2 mb-3">
                    <svg class="w-4 h-4 text-green-400" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
                    </svg>
                    <span class="text-green-400 text-sm">+2.1%</span>
                </div>
                <!-- Mini sparkline -->
                <div class="h-8 flex items-end space-x-1">
                    <div class="w-1 bg-green-500/30 h-5"></div>
                    <div class="w-1 bg-green-500/40 h-6"></div>
                    <div class="w-1 bg-green-500/50 h-4"></div>
                    <div class="w-1 bg-green-500/60 h-7"></div>
                    <div class="w-1 bg-green-500/70 h-6"></div>
                    <div class="w-1 bg-green-500/80 h-8"></div>
                    <div class="w-1 bg-green-500 h-8"></div>
                </div>
                
                <!-- Floating Popup Insight -->
                <div class="absolute top-1/2 right-2 transform -translate-y-1/2 w-48 bg-slate-900/95 backdrop-blur-sm rounded-lg p-2.5 opacity-0 group-hover:opacity-100 transition-all duration-300 z-[100] shadow-2xl border border-green-500/30 pointer-events-none">
                    <div class="text-green-400 text-xs font-semibold mb-1">🎯 AI INSIGHT</div>
                    <div class="text-white text-xs font-medium mb-1">Excellent Weapon Status</div>
                    <div class="text-slate-300 text-xs leading-relaxed">
                        • 94% systems fully operational<br>
                        • Recent maintenance cycle complete<br>
                        • Zero critical failures this month<br>
                        • Maintain current service schedule
                    </div>
                    <!-- Arrow pointing left to card -->
                    <div class="absolute top-4 right-full w-0 h-0 border-t-4 border-b-4 border-r-4 border-t-transparent border-b-transparent border-r-green-500/30"></div>
                </div>
            </div>

            <!-- Average Weapon Health -->
            <div class="glass-card rounded-lg p-6 relative group cursor-pointer hover:scale-105 transition-all duration-300" onclick="showDrillThrough('health')">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-slate-300 text-sm font-medium">Weapon Health</h3>
                    <span class="status-indicator bg-green-500"></span>
                </div>
                <div class="text-3xl font-bold text-white mb-2">8.7</div>
                <div class="flex items-center space-x-2 mb-3">
                    <svg class="w-4 h-4 text-green-400" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
                    </svg>
                    <span class="text-green-400 text-sm">+0.3</span>
                </div>
                <!-- Mini sparkline -->
                <div class="h-8 flex items-end space-x-1">
                    <div class="w-1 bg-green-500/30 h-6"></div>
                    <div class="w-1 bg-green-500/40 h-5"></div>
                    <div class="w-1 bg-green-500/50 h-7"></div>
                    <div class="w-1 bg-green-500/60 h-6"></div>
                    <div class="w-1 bg-green-500/70 h-7"></div>
                    <div class="w-1 bg-green-500/80 h-8"></div>
                    <div class="w-1 bg-green-500 h-8"></div>
                </div>
                
                <!-- Floating Popup Insight -->
                <div class="absolute top-1/2 right-2 transform -translate-y-1/2 w-48 bg-slate-900/95 backdrop-blur-sm rounded-lg p-2.5 opacity-0 group-hover:opacity-100 transition-all duration-300 z-[100] shadow-2xl border border-green-500/30 pointer-events-none">
                    <div class="text-green-400 text-xs font-semibold mb-1">💚 AI INSIGHT</div>
                    <div class="text-white text-xs font-medium mb-1">Strong Health Metrics</div>
                    <div class="text-slate-300 text-xs leading-relaxed">
                        • Average score improved 0.3 points<br>
                        • Preventive maintenance effective<br>
                        • 12% reduction in repair incidents<br>
                        • Continue current protocols
                    </div>
                    <!-- Arrow pointing left to card -->
                    <div class="absolute top-4 right-full w-0 h-0 border-t-4 border-b-4 border-r-4 border-t-transparent border-b-transparent border-r-green-500/30"></div>
                </div>
            </div>

            <!-- Predicted Ammo Depletion -->
            <div class="glass-card rounded-lg p-6 relative group cursor-pointer hover:scale-105 transition-all duration-300" onclick="showDrillThrough('depletion')">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-slate-300 text-sm font-medium">Ammo Depletion</h3>
                    <span class="status-indicator bg-red-500"></span>
                </div>
                <div class="text-3xl font-bold text-white mb-2">18</div>
                <div class="flex items-center space-x-2 mb-3">
                    <svg class="w-4 h-4 text-red-400" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M14.707 10.293a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L9 12.586V5a1 1 0 012 0v7.586l2.293-2.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                    </svg>
                    <span class="text-red-400 text-sm">-3 days</span>
                </div>
                <!-- Mini sparkline -->
                <div class="h-8 flex items-end space-x-1">
                    <div class="w-1 bg-red-500/30 h-8"></div>
                    <div class="w-1 bg-red-500/40 h-7"></div>
                    <div class="w-1 bg-red-500/50 h-6"></div>
                    <div class="w-1 bg-red-500/60 h-5"></div>
                    <div class="w-1 bg-red-500/70 h-4"></div>
                    <div class="w-1 bg-red-500/80 h-3"></div>
                    <div class="w-1 bg-red-500 h-2"></div>
                </div>
                
                <!-- Floating Popup Insight -->
                <div class="absolute top-1/2 right-2 transform -translate-y-1/2 w-48 bg-slate-900/95 backdrop-blur-sm rounded-lg p-2.5 opacity-0 group-hover:opacity-100 transition-all duration-300 z-[100] shadow-2xl border border-red-500/30 pointer-events-none">
                    <div class="text-red-400 text-xs font-semibold mb-1">🚨 AI INSIGHT</div>
                    <div class="text-white text-xs font-medium mb-1">Critical Supply Alert</div>
                    <div class="text-slate-300 text-xs leading-relaxed">
                        • Accelerated consumption detected<br>
                        • Emergency resupply required<br>
                        • Contact logistics immediately<br>
                        • Consider rationing protocols
                    </div>
                    <!-- Arrow pointing left to card -->
                    <div class="absolute top-4 right-full w-0 h-0 border-t-4 border-b-4 border-r-4 border-t-transparent border-b-transparent border-r-red-500/30"></div>
                </div>
            </div>
        </div>
        
                <!-- Predictive Ammunition Usage Section -->
                <div class="flex items-center justify-between mb-6">
                    <div>
                        <h2 class="text-xl font-semibold text-white mb-2">Predictive Ammunition Usage</h2>
                        <p class="text-slate-300 text-sm">Forecast ammunition consumption to anticipate resupply needs</p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <div class="flex items-center space-x-2">
                            <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
                            <span class="text-slate-300 text-sm">Historical</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                            <span class="text-slate-300 text-sm">Forecast</span>
                        </div>
                    </div>
                </div>

                <!-- Chart Container -->
                <div class="relative h-80 bg-slate-800/30 rounded-lg p-4">
                    <!-- Y-axis labels -->
                    <div class="absolute left-0 top-0 h-full flex flex-col justify-between text-slate-400 text-xs py-4">
                        <span>100%</span>
                        <span>80%</span>
                        <span>60%</span>
                        <span>40%</span>
                        <span>20%</span>
                        <span>0%</span>
                    </div>

                    <!-- Chart area -->
                    <div class="ml-8 mr-4 h-full relative">
                        <!-- Grid lines -->
                        <div class="absolute inset-0">
                            <div class="h-full flex flex-col justify-between">
                                <div class="border-t border-slate-600/30"></div>
                                <div class="border-t border-slate-600/30"></div>
                                <div class="border-t border-slate-600/30"></div>
                                <div class="border-t border-slate-600/30"></div>
                                <div class="border-t border-slate-600/30"></div>
                                <div class="border-t border-slate-600/30"></div>
                            </div>
                        </div>

                        <!-- SVG Chart -->
                        <svg class="w-full h-full" viewBox="0 0 800 300" preserveAspectRatio="none" id="ammoChart">
                            <!-- Historical data line (blue) -->
                            <polyline
                                fill="none"
                                stroke="#3b82f6"
                                stroke-width="3"
                                points="0,120 80,110 160,125 240,115 320,130 400,140 480,155 560,170"
                            />
                            
                            <!-- Forecast line (yellow, dashed) -->
                            <polyline
                                fill="none"
                                stroke="#eab308"
                                stroke-width="3"
                                stroke-dasharray="8,4"
                                points="560,170 640,190 720,215 800,245"
                            />
                            
                            <!-- Interactive data points for historical -->
                            <circle cx="0" cy="120" r="6" fill="#3b82f6" class="chart-point cursor-pointer hover:r-8 transition-all" 
                                    data-month="Jun 2024" data-value="60%" data-type="Historical" data-details="Training exercises: 2,400 rounds consumed"/>
                            <circle cx="80" cy="110" r="6" fill="#3b82f6" class="chart-point cursor-pointer hover:r-8 transition-all"
                                    data-month="Jul 2024" data-value="63%" data-type="Historical" data-details="Combat readiness drills: 2,100 rounds consumed"/>
                            <circle cx="160" cy="125" r="6" fill="#3b82f6" class="chart-point cursor-pointer hover:r-8 transition-all"
                                    data-month="Aug 2024" data-value="58%" data-type="Historical" data-details="Field training: 2,800 rounds consumed"/>
                            <circle cx="240" cy="115" r="6" fill="#3b82f6" class="chart-point cursor-pointer hover:r-8 transition-all"
                                    data-month="Sep 2024" data-value="62%" data-type="Historical" data-details="Marksmanship training: 2,200 rounds consumed"/>
                            <circle cx="320" cy="130" r="6" fill="#3b82f6" class="chart-point cursor-pointer hover:r-8 transition-all"
                                    data-month="Oct 2024" data-value="57%" data-type="Historical" data-details="Joint operations: 3,100 rounds consumed"/>
                            <circle cx="400" cy="140" r="6" fill="#3b82f6" class="chart-point cursor-pointer hover:r-8 transition-all"
                                    data-month="Nov 2024" data-value="53%" data-type="Historical" data-details="Urban warfare training: 3,400 rounds consumed"/>
                            <circle cx="480" cy="155" r="6" fill="#3b82f6" class="chart-point cursor-pointer hover:r-8 transition-all"
                                    data-month="Dec 2024" data-value="48%" data-type="Historical" data-details="Live fire exercises: 3,600 rounds consumed"/>
                            <circle cx="560" cy="170" r="6" fill="#3b82f6" class="chart-point cursor-pointer hover:r-8 transition-all"
                                    data-month="Jan 2025" data-value="43%" data-type="Current" data-details="Current stock level: 18 days remaining"/>
                            
                            <!-- Interactive forecast points -->
                            <circle cx="640" cy="190" r="6" fill="#eab308" class="chart-point cursor-pointer hover:r-8 transition-all"
                                    data-month="Feb 2025" data-value="37%" data-type="Forecast" data-details="Predicted consumption: 3,800 rounds"/>
                            <circle cx="720" cy="215" r="6" fill="#eab308" class="chart-point cursor-pointer hover:r-8 transition-all"
                                    data-month="Mar 2025" data-value="28%" data-type="Forecast" data-details="Predicted consumption: 4,200 rounds"/>
                            <circle cx="800" cy="245" r="6" fill="#eab308" class="chart-point cursor-pointer hover:r-8 transition-all"
                                    data-month="Apr 2025" data-value="18%" data-type="Forecast" data-details="CRITICAL: Resupply required immediately"/>
                            
                            <!-- Critical threshold line -->
                            <line x1="0" y1="240" x2="800" y2="240" stroke="#ef4444" stroke-width="2" stroke-dasharray="4,4" opacity="0.7"/>
                            
                            <!-- Vertical divider between historical and forecast -->
                            <line x1="560" y1="0" x2="560" y2="300" stroke="#64748b" stroke-width="1" stroke-dasharray="2,2" opacity="0.5"/>
                        </svg>
                    </div>

                    <!-- Tooltip -->
                    <div id="chartTooltip" class="absolute bg-slate-900/95 backdrop-blur-sm rounded-lg p-3 border border-slate-600 shadow-2xl opacity-0 pointer-events-none transition-all duration-200 z-50 min-w-48">
                        <div id="tooltipMonth" class="text-white font-semibold text-sm mb-1"></div>
                        <div id="tooltipValue" class="text-2xl font-bold mb-1"></div>
                        <div id="tooltipType" class="text-xs font-medium mb-2 px-2 py-1 rounded-full inline-block"></div>
                        <div id="tooltipDetails" class="text-slate-300 text-xs"></div>
                    </div>

                    <!-- Critical threshold label -->
                    <div class="absolute bottom-12 right-4 text-red-400 text-xs">
                        Critical Level (20%)
                    </div>

                    <!-- Current position indicator -->
                    <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
                        <div class="bg-slate-700/80 backdrop-blur-sm rounded-lg p-2 border border-slate-600">
                            <div class="text-white text-xs font-medium">Current: 43%</div>
                            <div class="text-slate-300 text-xs">18 days remaining</div>
                        </div>
                    </div>
                </div>

                <!-- X-axis labels -->
                <div class="flex justify-between text-slate-400 text-xs mt-2 ml-8 mr-4">
                    <span>Jun</span>
                    <span>Jul</span>
                    <span>Aug</span>
                    <span>Sep</span>
                    <span>Oct</span>
                    <span>Nov</span>
                    <span>Dec</span>
                    <span class="text-yellow-400">Jan</span>
                    <span class="text-yellow-400">Feb</span>
                    <span class="text-yellow-400">Mar</span>
                </div>

                <!-- Ammunition Usage by Weapon Category -->
                <div class="mt-8 pt-8 border-t border-slate-600/30">
                    <div class="flex items-center justify-between mb-6">
                        <div>
                            <h3 class="text-lg font-semibold text-white mb-2">Ammunition Usage by Weapon Category</h3>
                            <p class="text-slate-300 text-sm">Current month consumption breakdown - Click bars for detailed analysis</p>
                        </div>
                        <div class="flex items-center space-x-4">
                            <div class="flex items-center space-x-2">
                                <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
                                <span class="text-slate-300 text-sm">Actual Usage</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-3 h-3 bg-orange-500 rounded-full"></div>
                                <span class="text-slate-300 text-sm">Forecasted Usage</span>
                            </div>
                        </div>
                    </div>

                    <!-- Chart Container -->
                    <div class="relative h-80 bg-slate-800/30 rounded-lg p-4">
                        <!-- Y-axis labels -->
                        <div class="absolute left-0 top-0 h-full flex flex-col justify-between text-slate-400 text-xs py-4">
                            <span>5000</span>
                            <span>4000</span>
                            <span>3000</span>
                            <span>2000</span>
                            <span>1000</span>
                            <span>0</span>
                        </div>

                        <!-- Chart area -->
                        <div class="ml-12 mr-4 h-full relative">
                            <!-- Grid lines -->
                            <div class="absolute inset-0">
                                <div class="h-full flex flex-col justify-between">
                                    <div class="border-t border-slate-600/30"></div>
                                    <div class="border-t border-slate-600/30"></div>
                                    <div class="border-t border-slate-600/30"></div>
                                    <div class="border-t border-slate-600/30"></div>
                                    <div class="border-t border-slate-600/30"></div>
                                    <div class="border-t border-slate-600/30"></div>
                                </div>
                            </div>

                            <!-- Column Chart Bars -->
                            <div class="absolute inset-0 flex items-end justify-around pb-8">
                                <!-- Rifles -->
                                <div class="flex flex-col items-center space-y-2">
                                    <div class="flex space-x-1 items-end">
                                        <div class="bg-blue-500 hover:bg-blue-400 cursor-pointer transition-all duration-200 w-8 rounded-t-sm chart-bar" 
                                             style="height: 180px;" 
                                             data-category="Rifles" 
                                             data-actual="4500" 
                                             data-forecast="4200"
                                             data-type="actual"
                                             data-details='{"5.56mm": 2800, "7.62mm": 1200, "Training": 500}'>
                                        </div>
                                        <div class="bg-orange-500 hover:bg-orange-400 cursor-pointer transition-all duration-200 w-8 rounded-t-sm chart-bar" 
                                             style="height: 168px;" 
                                             data-category="Rifles" 
                                             data-actual="4500" 
                                             data-forecast="4200"
                                             data-type="forecast"
                                             data-details='{"5.56mm": 2600, "7.62mm": 1100, "Training": 500}'>
                                        </div>
                                    </div>
                                    <span class="text-slate-400 text-xs">Rifles</span>
                                </div>

                                <!-- Artillery -->
                                <div class="flex flex-col items-center space-y-2">
                                    <div class="flex space-x-1 items-end">
                                        <div class="bg-blue-500 hover:bg-blue-400 cursor-pointer transition-all duration-200 w-8 rounded-t-sm chart-bar" 
                                             style="height: 120px;" 
                                             data-category="Artillery" 
                                             data-actual="3000" 
                                             data-forecast="2800"
                                             data-type="actual"
                                             data-details='{"155mm": 1800, "105mm": 800, "Mortar": 400}'>
                                        </div>
                                        <div class="bg-orange-500 hover:bg-orange-400 cursor-pointer transition-all duration-200 w-8 rounded-t-sm chart-bar" 
                                             style="height: 112px;" 
                                             data-category="Artillery" 
                                             data-actual="3000" 
                                             data-forecast="2800"
                                             data-type="forecast"
                                             data-details='{"155mm": 1700, "105mm": 750, "Mortar": 350}'>
                                        </div>
                                    </div>
                                    <span class="text-slate-400 text-xs">Artillery</span>
                                </div>

                                <!-- Tanks -->
                                <div class="flex flex-col items-center space-y-2">
                                    <div class="flex space-x-1 items-end">
                                        <div class="bg-blue-500 hover:bg-blue-400 cursor-pointer transition-all duration-200 w-8 rounded-t-sm chart-bar" 
                                             style="height: 96px;" 
                                             data-category="Tanks" 
                                             data-actual="2400" 
                                             data-forecast="2200"
                                             data-type="actual"
                                             data-details='{"120mm": 1500, "25mm": 600, "Coax": 300}'>
                                        </div>
                                        <div class="bg-orange-500 hover:bg-orange-400 cursor-pointer transition-all duration-200 w-8 rounded-t-sm chart-bar" 
                                             style="height: 88px;" 
                                             data-category="Tanks" 
                                             data-actual="2400" 
                                             data-forecast="2200"
                                             data-type="forecast"
                                             data-details='{"120mm": 1400, "25mm": 550, "Coax": 250}'>
                                        </div>
                                    </div>
                                    <span class="text-slate-400 text-xs">Tanks</span>
                                </div>

                                <!-- Air Systems -->
                                <div class="flex flex-col items-center space-y-2">
                                    <div class="flex space-x-1 items-end">
                                        <div class="bg-blue-500 hover:bg-blue-400 cursor-pointer transition-all duration-200 w-8 rounded-t-sm chart-bar" 
                                             style="height: 72px;" 
                                             data-category="Air Systems" 
                                             data-actual="1800" 
                                             data-forecast="1600"
                                             data-type="actual"
                                             data-details='{"20mm": 900, "Missiles": 600, "Flares": 300}'>
                                        </div>
                                        <div class="bg-orange-500 hover:bg-orange-400 cursor-pointer transition-all duration-200 w-8 rounded-t-sm chart-bar" 
                                             style="height: 64px;" 
                                             data-category="Air Systems" 
                                             data-actual="1800" 
                                             data-forecast="1600"
                                             data-type="forecast"
                                             data-details='{"20mm": 800, "Missiles": 550, "Flares": 250}'>
                                        </div>
                                    </div>
                                    <span class="text-slate-400 text-xs">Air Systems</span>
                                </div>
                            </div>
                        </div>

                        <!-- Bar Chart Tooltip -->
                        <div id="barTooltip" class="absolute bg-slate-900/95 backdrop-blur-sm rounded-lg p-3 border border-slate-600 shadow-2xl opacity-0 pointer-events-none transition-all duration-200 z-50 min-w-56">
                            <div id="barTooltipCategory" class="text-white font-semibold text-sm mb-2"></div>
                            <div class="space-y-1 mb-2">
                                <div class="flex items-center justify-between">
                                    <span class="text-blue-400 text-xs">Actual Usage:</span>
                                    <span id="barTooltipActual" class="text-blue-400 font-semibold text-sm">0</span>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-orange-400 text-xs">Forecasted Usage:</span>
                                    <span id="barTooltipForecast" class="text-orange-400 font-semibold text-sm">0</span>
                                </div>
                            </div>
                            <div class="text-slate-300 text-xs">Click to view detailed breakdown</div>
                        </div>
                    </div>
                </div>

                <!-- Ammunition Usage Summary -->
                <div class="mt-8 pt-8 border-t border-slate-600/30">
                <div class="flex items-center justify-between mb-4">
                    <div>
                        <h2 class="text-lg font-semibold text-white mb-1">Ammunition Usage Summary</h2>
                        <p class="text-slate-300 text-xs">Current month breakdown and key insights</p>
                    </div>
                    <div class="text-slate-400 text-xs">
                        Last updated: <span class="text-white font-medium">Jan 25, 2025</span>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Usage Breakdown -->
                    <div>
                        <h3 class="text-sm font-medium text-white mb-3">Usage by Category</h3>
                        <div class="space-y-2">
                            <div class="flex items-center justify-between p-2 bg-slate-800/30 rounded">
                                <div class="flex items-center space-x-2">
                                    <div class="w-2 h-2 bg-blue-500 rounded-full"></div>
                                    <span class="text-slate-300 text-sm">Rifles</span>
                                </div>
                                <div class="text-right">
                                    <div class="text-white font-semibold text-sm">4,500 rounds</div>
                                    <div class="text-slate-400 text-xs">35.4% of total</div>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-2 bg-slate-800/30 rounded">
                                <div class="flex items-center space-x-2">
                                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                    <span class="text-slate-300 text-sm">Artillery</span>
                                </div>
                                <div class="text-right">
                                    <div class="text-white font-semibold text-sm">3,000 rounds</div>
                                    <div class="text-slate-400 text-xs">23.6% of total</div>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-2 bg-slate-800/30 rounded">
                                <div class="flex items-center space-x-2">
                                    <div class="w-2 h-2 bg-yellow-500 rounded-full"></div>
                                    <span class="text-slate-300 text-sm">Tanks</span>
                                </div>
                                <div class="text-right">
                                    <div class="text-white font-semibold text-sm">2,400 rounds</div>
                                    <div class="text-slate-400 text-xs">18.9% of total</div>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-2 bg-slate-800/30 rounded">
                                <div class="flex items-center space-x-2">
                                    <div class="w-2 h-2 bg-purple-500 rounded-full"></div>
                                    <span class="text-slate-300 text-sm">Air Systems</span>
                                </div>
                                <div class="text-right">
                                    <div class="text-white font-semibold text-sm">1,800 rounds</div>
                                    <div class="text-slate-400 text-xs">14.2% of total</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Key Insights -->
                    <div>
                        <h3 class="text-sm font-medium text-white mb-3">Key Insights</h3>
                        <div class="space-y-2">
                            <div class="p-2 bg-red-500/10 border border-red-500/20 rounded">
                                <div class="flex items-start space-x-2">
                                    <div class="w-1.5 h-1.5 bg-red-400 rounded-full mt-1.5"></div>
                                    <div>
                                        <div class="text-red-400 font-medium text-xs mb-1">Critical Alert</div>
                                        <div class="text-slate-300 text-xs">Rifle ammunition consumption is 12% above forecast.</div>
                                    </div>
                                </div>
                            </div>
                            <div class="p-2 bg-yellow-500/10 border border-yellow-500/20 rounded">
                                <div class="flex items-start space-x-2">
                                    <div class="w-1.5 h-1.5 bg-yellow-400 rounded-full mt-1.5"></div>
                                    <div>
                                        <div class="text-yellow-400 font-medium text-xs mb-1">Trend Analysis</div>
                                        <div class="text-slate-300 text-xs">Artillery usage trending 8% below forecast.</div>
                                    </div>
                                </div>
                            </div>
                            <div class="p-2 bg-green-500/10 border border-green-500/20 rounded">
                                <div class="flex items-start space-x-2">
                                    <div class="w-1.5 h-1.5 bg-green-400 rounded-full mt-1.5"></div>
                                    <div>
                                        <div class="text-green-400 font-medium text-xs mb-1">Efficiency Gain</div>
                                        <div class="text-slate-300 text-xs">Tank ammunition usage optimized.</div>
                                    </div>
                                </div>
                            </div>
                            <div class="p-2 bg-blue-500/10 border border-blue-500/20 rounded">
                                <div class="flex items-start space-x-2">
                                    <div class="w-1.5 h-1.5 bg-blue-400 rounded-full mt-1.5"></div>
                                    <div>
                                        <div class="text-blue-400 font-medium text-xs mb-1">Recommendation</div>
                                        <div class="text-slate-300 text-xs">Schedule resupply delivery for February 1st.</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Drill-through Detail Modal -->
            <div id="detailModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 opacity-0 pointer-events-none transition-all duration-300">
                <div class="flex items-center justify-center min-h-full p-4">
                    <div class="glass-card rounded-lg p-6 max-w-2xl w-full transform scale-95 transition-transform duration-300" id="modalContent">
                        <div class="flex items-center justify-between mb-6">
                            <div>
                                <h3 class="text-xl font-semibold text-white mb-2" id="modalTitle">Detailed Breakdown</h3>
                                <p class="text-slate-300 text-sm" id="modalSubtitle">Ammunition consumption by subcategory</p>
                            </div>
                            <button id="closeModal" class="w-8 h-8 bg-slate-700 hover:bg-slate-600 rounded-lg flex items-center justify-center transition-colors">
                                <svg class="w-4 h-4 text-slate-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </button>
                        </div>

                        <!-- Detail Chart -->
                        <div class="bg-slate-800/30 rounded-lg p-4 mb-4">
                            <div class="relative h-64">
                                <!-- Detail bars will be inserted here -->
                                <div id="detailBars" class="h-full flex flex-col justify-around space-y-3">
                                    <!-- Dynamic content -->
                                </div>
                            </div>
                        </div>

                        <!-- Summary Stats -->
                        <div class="grid grid-cols-3 gap-4">
                            <div class="bg-slate-800/30 rounded-lg p-4 text-center">
                                <div class="text-2xl font-bold text-blue-400" id="totalCurrent">0</div>
                                <div class="text-slate-300 text-sm">Actual Usage</div>
                            </div>
                            <div class="bg-slate-800/30 rounded-lg p-4 text-center">
                                <div class="text-2xl font-bold text-orange-400" id="totalPrevious">0</div>
                                <div class="text-slate-300 text-sm">Forecasted Usage</div>
                            </div>
                            <div class="bg-slate-800/30 rounded-lg p-4 text-center">
                                <div class="text-2xl font-bold" id="changePercent">0%</div>
                                <div class="text-slate-300 text-sm">Variance</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
                        <!-- Weapon System Health Monitoring Section -->
            <div class="glass-card rounded-lg p-6 mb-8">
                <div class="flex items-center justify-between mb-6">
                    <div>
                        <h2 class="text-xl font-semibold text-white mb-2">Weapon System Health Monitoring</h2>
                    </div>
                    <div class="flex items-center space-x-4">
                        <div class="flex items-center space-x-2">
                            <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                            <span class="text-slate-300 text-sm">Operational</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                            <span class="text-slate-300 text-sm">Scheduled Maintenance</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-3 h-3 bg-orange-500 rounded-full"></div>
                            <span class="text-slate-300 text-sm">At Risk</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                            <span class="text-slate-300 text-sm">Out of Service</span>
                        </div>
                    </div>
                </div>

                <!-- Overall Status Distribution -->
                <div class="mb-6">
                    <!-- Donut Chart -->
                    <div class="bg-slate-800/30 rounded-lg p-6">
                        <h3 class="text-lg font-medium text-white mb-6 text-center">Overall System Status Distribution</h3>
                        <div class="flex items-center justify-center">
                            <div class="relative w-64 h-64">
                                <!-- SVG Donut Chart -->
                                <svg class="w-full h-full transform -rotate-90" viewBox="0 0 200 200">
                                    <!-- Background circle -->
                                    <circle cx="100" cy="100" r="80" fill="none" stroke="rgb(51, 65, 85)" stroke-width="20" opacity="0.3"/>
                                    
                                    <!-- Operational (71.6%) - Green -->
                                    <circle cx="100" cy="100" r="80" fill="none" stroke="#22c55e" stroke-width="20" 
                                            stroke-dasharray="360.5 502.7" stroke-dashoffset="0" 
                                            class="donut-segment hover:stroke-width-24 transition-all duration-200"
                                            data-status="Operational" data-count="179" data-percentage="71.6%"/>
                                    
                                    <!-- Scheduled Maintenance (13.2%) - Yellow -->
                                    <circle cx="100" cy="100" r="80" fill="none" stroke="#eab308" stroke-width="20" 
                                            stroke-dasharray="66.4 502.7" stroke-dashoffset="-360.5"
                                            class="donut-segment hover:stroke-width-24 transition-all duration-200"
                                            data-status="Scheduled Maintenance" data-count="33" data-percentage="13.2%"/>
                                    
                                    <!-- At Risk (7.6%) - Orange -->
                                    <circle cx="100" cy="100" r="80" fill="none" stroke="#f97316" stroke-width="20" 
                                            stroke-dasharray="38.2 502.7" stroke-dashoffset="-426.9"
                                            class="donut-segment hover:stroke-width-24 transition-all duration-200"
                                            data-status="At Risk" data-count="19" data-percentage="7.6%"/>
                                    
                                    <!-- Out of Service (7.6%) - Red -->
                                    <circle cx="100" cy="100" r="80" fill="none" stroke="#ef4444" stroke-width="20" 
                                            stroke-dasharray="38.2 502.7" stroke-dashoffset="-465.1"
                                            class="donut-segment hover:stroke-width-24 transition-all duration-200"
                                            data-status="Out of Service" data-count="19" data-percentage="7.6%"/>
                                </svg>
                                
                                <!-- Center text -->
                                <div class="absolute inset-0 flex flex-col items-center justify-center">
                                    <div class="text-3xl font-bold text-white">250</div>
                                    <div class="text-slate-300 text-sm">Total Systems</div>
                                </div>
                            </div>
                            
                            <!-- Legend with counts -->
                            <div class="ml-8 space-y-3">
                                <div class="flex items-center justify-between text-sm hover:bg-slate-700/30 p-2 rounded transition-colors legend-item"
                                     data-status="Operational" data-count="179" data-percentage="71.6%">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-4 h-4 bg-green-500 rounded-full"></div>
                                        <span class="text-slate-300">Operational</span>
                                    </div>
                                    <span class="text-white font-medium">71.6% | 179</span>
                                </div>
                                <div class="flex items-center justify-between text-sm hover:bg-slate-700/30 p-2 rounded transition-colors legend-item"
                                     data-status="Scheduled Maintenance" data-count="33" data-percentage="13.2%">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-4 h-4 bg-yellow-500 rounded-full"></div>
                                        <span class="text-slate-300">Maintenance</span>
                                    </div>
                                    <span class="text-white font-medium">13.2% | 33</span>
                                </div>
                                <div class="flex items-center justify-between text-sm hover:bg-slate-700/30 p-2 rounded transition-colors legend-item"
                                     data-status="At Risk" data-count="19" data-percentage="7.6%">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-4 h-4 bg-orange-500 rounded-full"></div>
                                        <span class="text-slate-300">At Risk</span>
                                    </div>
                                    <span class="text-white font-medium">7.6% | 19</span>
                                </div>
                                <div class="flex items-center justify-between text-sm hover:bg-slate-700/30 p-2 rounded transition-colors legend-item"
                                     data-status="Out of Service" data-count="19" data-percentage="7.6%">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-4 h-4 bg-red-500 rounded-full"></div>
                                        <span class="text-slate-300">Out of Service</span>
                                    </div>
                                    <span class="text-white font-medium">7.6% | 19</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Horizontal Stacked Bar Chart Container -->
                <div class="relative h-96 bg-slate-800/30 rounded-lg p-4">
                    <!-- Chart area -->
                    <div class="h-full relative">
                        <!-- Horizontal Stacked Bars -->
                        <div class="h-full flex flex-col justify-around py-4">
                            <!-- Rifles -->
                            <div class="flex items-center space-x-4">
                                <div class="w-24 text-slate-400 text-sm text-right">
                                    <div class="font-medium">Rifles</div>
                                    <div class="text-xs text-slate-500">60 units</div>
                                </div>
                                <div class="flex-1 h-12 bg-slate-700/20 rounded-lg relative overflow-hidden stacked-bar cursor-pointer hover:shadow-lg transition-all duration-200"
                                     data-category="Rifles"
                                     data-operational="45"
                                     data-maintenance="8"
                                     data-risk="4"
                                     data-outofservice="3"
                                     data-total="60">
                                    <!-- Operational (Green) - 75% -->
                                    <div class="absolute left-0 top-0 h-full bg-green-500 hover:bg-green-400 transition-colors duration-200 rounded-l-lg" 
                                         style="width: 75%;"
                                         data-status="Operational"
                                         data-count="45"
                                         data-percentage="75%"></div>
                                    <!-- Scheduled Maintenance (Yellow) - 13.3% -->
                                    <div class="absolute top-0 h-full bg-yellow-500 hover:bg-yellow-400 transition-colors duration-200" 
                                         style="left: 75%; width: 13.3%;"
                                         data-status="Scheduled Maintenance"
                                         data-count="8"
                                         data-percentage="13.3%"></div>
                                    <!-- At Risk (Orange) - 6.7% -->
                                    <div class="absolute top-0 h-full bg-orange-500 hover:bg-orange-400 transition-colors duration-200" 
                                         style="left: 88.3%; width: 6.7%;"
                                         data-status="At Risk"
                                         data-count="4"
                                         data-percentage="6.7%"></div>
                                    <!-- Out of Service (Red) - 5% -->
                                    <div class="absolute top-0 h-full bg-red-500 hover:bg-red-400 transition-colors duration-200 rounded-r-lg" 
                                         style="left: 95%; width: 5%;"
                                         data-status="Out of Service"
                                         data-count="3"
                                         data-percentage="5%"></div>
                                </div>
                                <div class="w-16 text-slate-400 text-xs text-center">
                                    <div class="text-green-400 font-medium">75%</div>
                                    <div>Ready</div>
                                </div>
                            </div>

                            <!-- Artillery -->
                            <div class="flex items-center space-x-4">
                                <div class="w-24 text-slate-400 text-sm text-right">
                                    <div class="font-medium">Artillery</div>
                                    <div class="text-xs text-slate-500">40 units</div>
                                </div>
                                <div class="flex-1 h-12 bg-slate-700/20 rounded-lg relative overflow-hidden stacked-bar cursor-pointer hover:shadow-lg transition-all duration-200"
                                     data-category="Artillery"
                                     data-operational="28"
                                     data-maintenance="6"
                                     data-risk="3"
                                     data-outofservice="3"
                                     data-total="40">
                                    <!-- Operational (Green) - 70% -->
                                    <div class="absolute left-0 top-0 h-full bg-green-500 hover:bg-green-400 transition-colors duration-200 rounded-l-lg" 
                                         style="width: 70%;"
                                         data-status="Operational"
                                         data-count="28"
                                         data-percentage="70%"></div>
                                    <!-- Scheduled Maintenance (Yellow) - 15% -->
                                    <div class="absolute top-0 h-full bg-yellow-500 hover:bg-yellow-400 transition-colors duration-200" 
                                         style="left: 70%; width: 15%;"
                                         data-status="Scheduled Maintenance"
                                         data-count="6"
                                         data-percentage="15%"></div>
                                    <!-- At Risk (Orange) - 7.5% -->
                                    <div class="absolute top-0 h-full bg-orange-500 hover:bg-orange-400 transition-colors duration-200" 
                                         style="left: 85%; width: 7.5%;"
                                         data-status="At Risk"
                                         data-count="3"
                                         data-percentage="7.5%"></div>
                                    <!-- Out of Service (Red) - 7.5% -->
                                    <div class="absolute top-0 h-full bg-red-500 hover:bg-red-400 transition-colors duration-200 rounded-r-lg" 
                                         style="left: 92.5%; width: 7.5%;"
                                         data-status="Out of Service"
                                         data-count="3"
                                         data-percentage="7.5%"></div>
                                </div>
                                <div class="w-16 text-slate-400 text-xs text-center">
                                    <div class="text-green-400 font-medium">70%</div>
                                    <div>Ready</div>
                                </div>
                            </div>

                            <!-- Tanks -->
                            <div class="flex items-center space-x-4">
                                <div class="w-24 text-slate-400 text-sm text-right">
                                    <div class="font-medium">Tanks</div>
                                    <div class="text-xs text-slate-500">30 units</div>
                                </div>
                                <div class="flex-1 h-12 bg-slate-700/20 rounded-lg relative overflow-hidden stacked-bar cursor-pointer hover:shadow-lg transition-all duration-200"
                                     data-category="Tanks"
                                     data-operational="22"
                                     data-maintenance="4"
                                     data-risk="2"
                                     data-outofservice="2"
                                     data-total="30">
                                    <!-- Operational (Green) - 73.3% -->
                                    <div class="absolute left-0 top-0 h-full bg-green-500 hover:bg-green-400 transition-colors duration-200 rounded-l-lg" 
                                         style="width: 73.3%;"
                                         data-status="Operational"
                                         data-count="22"
                                         data-percentage="73.3%"></div>
                                    <!-- Scheduled Maintenance (Yellow) - 13.3% -->
                                    <div class="absolute top-0 h-full bg-yellow-500 hover:bg-yellow-400 transition-colors duration-200" 
                                         style="left: 73.3%; width: 13.3%;"
                                         data-status="Scheduled Maintenance"
                                         data-count="4"
                                         data-percentage="13.3%"></div>
                                    <!-- At Risk (Orange) - 6.7% -->
                                    <div class="absolute top-0 h-full bg-orange-500 hover:bg-orange-400 transition-colors duration-200" 
                                         style="left: 86.6%; width: 6.7%;"
                                         data-status="At Risk"
                                         data-count="2"
                                         data-percentage="6.7%"></div>
                                    <!-- Out of Service (Red) - 6.7% -->
                                    <div class="absolute top-0 h-full bg-red-500 hover:bg-red-400 transition-colors duration-200 rounded-r-lg" 
                                         style="left: 93.3%; width: 6.7%;"
                                         data-status="Out of Service"
                                         data-count="2"
                                         data-percentage="6.7%"></div>
                                </div>
                                <div class="w-16 text-slate-400 text-xs text-center">
                                    <div class="text-green-400 font-medium">73%</div>
                                    <div>Ready</div>
                                </div>
                            </div>

                            <!-- Air Systems -->
                            <div class="flex items-center space-x-4">
                                <div class="w-24 text-slate-400 text-sm text-right">
                                    <div class="font-medium">Air Systems</div>
                                    <div class="text-xs text-slate-500">25 units</div>
                                </div>
                                <div class="flex-1 h-12 bg-slate-700/20 rounded-lg relative overflow-hidden stacked-bar cursor-pointer hover:shadow-lg transition-all duration-200"
                                     data-category="Air Systems"
                                     data-operational="16"
                                     data-maintenance="3"
                                     data-risk="2"
                                     data-outofservice="4"
                                     data-total="25">
                                    <!-- Operational (Green) - 64% -->
                                    <div class="absolute left-0 top-0 h-full bg-green-500 hover:bg-green-400 transition-colors duration-200 rounded-l-lg" 
                                         style="width: 64%;"
                                         data-status="Operational"
                                         data-count="16"
                                         data-percentage="64%"></div>
                                    <!-- Scheduled Maintenance (Yellow) - 12% -->
                                    <div class="absolute top-0 h-full bg-yellow-500 hover:bg-yellow-400 transition-colors duration-200" 
                                         style="left: 64%; width: 12%;"
                                         data-status="Scheduled Maintenance"
                                         data-count="3"
                                         data-percentage="12%"></div>
                                    <!-- At Risk (Orange) - 8% -->
                                    <div class="absolute top-0 h-full bg-orange-500 hover:bg-orange-400 transition-colors duration-200" 
                                         style="left: 76%; width: 8%;"
                                         data-status="At Risk"
                                         data-count="2"
                                         data-percentage="8%"></div>
                                    <!-- Out of Service (Red) - 16% -->
                                    <div class="absolute top-0 h-full bg-red-500 hover:bg-red-400 transition-colors duration-200 rounded-r-lg" 
                                         style="left: 84%; width: 16%;"
                                         data-status="Out of Service"
                                         data-count="4"
                                         data-percentage="16%"></div>
                                </div>
                                <div class="w-16 text-slate-400 text-xs text-center">
                                    <div class="text-orange-400 font-medium">64%</div>
                                    <div>Ready</div>
                                </div>
                            </div>

                            <!-- Support Vehicles -->
                            <div class="flex items-center space-x-4">
                                <div class="w-24 text-slate-400 text-sm text-right">
                                    <div class="font-medium">Support Vehicles</div>
                                    <div class="text-xs text-slate-500">95 units</div>
                                </div>
                                <div class="flex-1 h-12 bg-slate-700/20 rounded-lg relative overflow-hidden stacked-bar cursor-pointer hover:shadow-lg transition-all duration-200"
                                     data-category="Support Vehicles"
                                     data-operational="68"
                                     data-maintenance="12"
                                     data-risk="8"
                                     data-outofservice="7"
                                     data-total="95">
                                    <!-- Operational (Green) - 71.6% -->
                                    <div class="absolute left-0 top-0 h-full bg-green-500 hover:bg-green-400 transition-colors duration-200 rounded-l-lg" 
                                         style="width: 71.6%;"
                                         data-status="Operational"
                                         data-count="68"
                                         data-percentage="71.6%"></div>
                                    <!-- Scheduled Maintenance (Yellow) - 12.6% -->
                                    <div class="absolute top-0 h-full bg-yellow-500 hover:bg-yellow-400 transition-colors duration-200" 
                                         style="left: 71.6%; width: 12.6%;"
                                         data-status="Scheduled Maintenance"
                                         data-count="12"
                                         data-percentage="12.6%"></div>
                                    <!-- At Risk (Orange) - 8.4% -->
                                    <div class="absolute top-0 h-full bg-orange-500 hover:bg-orange-400 transition-colors duration-200" 
                                         style="left: 84.2%; width: 8.4%;"
                                         data-status="At Risk"
                                         data-count="8"
                                         data-percentage="8.4%"></div>
                                    <!-- Out of Service (Red) - 7.4% -->
                                    <div class="absolute top-0 h-full bg-red-500 hover:bg-red-400 transition-colors duration-200 rounded-r-lg" 
                                         style="left: 92.6%; width: 7.4%;"
                                         data-status="Out of Service"
                                         data-count="7"
                                         data-percentage="7.4%"></div>
                                </div>
                                <div class="w-16 text-slate-400 text-xs text-center">
                                    <div class="text-green-400 font-medium">72%</div>
                                    <div>Ready</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Health Monitoring Tooltip -->
                    <div id="healthTooltip" class="absolute bg-slate-900/95 backdrop-blur-sm rounded-lg p-3 border border-slate-600 shadow-2xl opacity-0 pointer-events-none transition-all duration-200 z-50 min-w-64">
                        <div id="healthTooltipCategory" class="text-white font-semibold text-sm mb-2"></div>
                        <div id="healthTooltipStatus" class="text-xs font-medium mb-2 px-2 py-1 rounded-full inline-block"></div>
                        <div class="space-y-1 mb-2">
                            <div class="flex items-center justify-between">
                                <span class="text-slate-300 text-xs">Count:</span>
                                <span id="healthTooltipCount" class="text-white font-semibold text-sm">0</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-slate-300 text-xs">Percentage:</span>
                                <span id="healthTooltipPercentage" class="text-white font-semibold text-sm">0%</span>
                            </div>
                        </div>
                        <div class="text-slate-300 text-xs">Click for detailed breakdown</div>
                    </div>
                </div>
                    

                </div>

                <!-- Donut Chart Tooltip -->
                <div id="donutTooltip" class="absolute bg-slate-900/95 backdrop-blur-sm rounded-lg p-3 border border-slate-600 shadow-2xl opacity-0 pointer-events-none transition-all duration-200 z-50 min-w-48">
                    <div id="donutTooltipStatus" class="text-white font-semibold text-sm mb-1"></div>
                    <div class="space-y-1">
                        <div class="flex items-center justify-between">
                            <span class="text-slate-300 text-xs">Count:</span>
                            <span id="donutTooltipCount" class="text-white font-semibold text-sm">0</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-slate-300 text-xs">Percentage:</span>
                            <span id="donutTooltipPercentage" class="text-white font-semibold text-sm">0%</span>
                        </div>
                    </div>
                </div>
                
                <!-- Weapon Effectiveness Simulation Section -->
<div class="glass-card rounded-lg p-6 mb-8">
    <div class="flex items-center justify-between mb-6">
        <div>
            <h2 class="text-xl font-semibold text-white mb-2">Weapon Effectiveness Simulation</h2>
            <p class="text-slate-300 text-sm">Simulate and visualize weapon effectiveness based on training, terrain, and environment</p>
        </div>
        <div class="flex items-center space-x-4">
            <div class="flex items-center space-x-2">
                <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
                <span class="text-slate-300 text-sm">Current Performance</span>
            </div>
            <div class="flex items-center space-x-2">
                <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                <span class="text-slate-300 text-sm">Optimal Performance</span>
            </div>
        </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <!-- Simulation Controls -->
        <div class="lg:col-span-1">
            <h3 class="text-lg font-medium text-white mb-4">Simulation Parameters</h3>
            
            <!-- Weapon System Selection -->
            <div class="mb-4">
                <label for="weaponSelect" class="block text-sm font-medium text-slate-300 mb-2">Weapon System</label>
                <select id="weaponSelect" class="w-full bg-slate-800/50 border border-slate-600 rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="m4a1">M4A1 Carbine</option>
                    <option value="m777">M777 Howitzer</option>
                    <option value="m1a2">M1A2 Abrams Tank</option>
                    <option value="ah64">AH-64 Apache</option>
                    <option value="m249">M249 SAW</option>
                </select>
            </div>

            <!-- Training Level -->
            <div class="mb-4">
                <label for="trainingLevel" class="block text-sm font-medium text-slate-300 mb-2">Training Level</label>
                <div class="space-y-2">
                    <input type="range" id="trainingLevel" min="1" max="10" value="7" class="w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer slider">
                    <div class="flex justify-between text-xs text-slate-400">
                        <span>Novice</span>
                        <span id="trainingValue" class="text-blue-400 font-medium">Expert (7/10)</span>
                        <span>Elite</span>
                    </div>
                </div>
            </div>

            <!-- Terrain Type -->
            <div class="mb-4">
                <label for="terrainType" class="block text-sm font-medium text-slate-300 mb-2">Terrain Type</label>
                <select id="terrainType" class="w-full bg-slate-800/50 border border-slate-600 rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="urban">Urban Environment</option>
                    <option value="desert">Desert Terrain</option>
                    <option value="forest">Forest/Jungle</option>
                    <option value="mountain">Mountain Terrain</option>
                    <option value="open">Open Field</option>
                </select>
            </div>

            <!-- Weather Conditions -->
            <div class="mb-4">
                <label for="weatherConditions" class="block text-sm font-medium text-slate-300 mb-2">Weather Conditions</label>
                <select id="weatherConditions" class="w-full bg-slate-800/50 border border-slate-600 rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="clear">Clear Weather</option>
                    <option value="rain">Rain/Wet</option>
                    <option value="fog">Fog/Low Visibility</option>
                    <option value="wind">High Wind</option>
                    <option value="extreme">Extreme Conditions</option>
                </select>
            </div>

            <!-- Time of Day -->
            <div class="mb-6">
                <label for="timeOfDay" class="block text-sm font-medium text-slate-300 mb-2">Time of Day</label>
                <select id="timeOfDay" class="w-full bg-slate-800/50 border border-slate-600 rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="day">Daylight</option>
                    <option value="dawn">Dawn/Dusk</option>
                    <option value="night">Night Operations</option>
                </select>
            </div>

            <!-- Run Simulation Button -->
            <button id="runSimulation" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center space-x-2">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h1m4 0h1m6-10V7a3 3 0 00-3-3H6a3 3 0 00-3 3v4a3 3 0 003 3h7m2 5.5V17a2 2 0 00-2-2H4a2 2 0 00-2 2v1.5a.5.5 0 00.5.5h11a.5.5 0 00.5-.5z"></path>
                </svg>
                <span>Run Simulation</span>
            </button>
        </div>

        <!-- Radar Chart -->
        <div class="lg:col-span-2">
            <h3 class="text-lg font-medium text-white mb-4">Performance Analysis</h3>
            <div class="bg-slate-800/30 rounded-lg p-6 h-96 flex items-center justify-center relative">
                <!-- Radar Chart Container -->
                <div class="relative w-80 h-80">
                    <svg id="radarChart" class="w-full h-full" viewBox="0 0 400 400">
                        <!-- Grid circles -->
                        <g class="radar-grid">
                            <circle cx="200" cy="200" r="160" fill="none" stroke="rgb(51, 65, 85)" stroke-width="1" opacity="0.3"/>
                            <circle cx="200" cy="200" r="120" fill="none" stroke="rgb(51, 65, 85)" stroke-width="1" opacity="0.3"/>
                            <circle cx="200" cy="200" r="80" fill="none" stroke="rgb(51, 65, 85)" stroke-width="1" opacity="0.3"/>
                            <circle cx="200" cy="200" r="40" fill="none" stroke="rgb(51, 65, 85)" stroke-width="1" opacity="0.3"/>
                        </g>
                        
                        <!-- Grid lines -->
                        <g class="radar-lines">
                            <line x1="200" y1="40" x2="200" y2="360" stroke="rgb(51, 65, 85)" stroke-width="1" opacity="0.3"/>
                            <line x1="40" y1="200" x2="360" y2="200" stroke="rgb(51, 65, 85)" stroke-width="1" opacity="0.3"/>
                            <line x1="313.1" y1="86.9" x2="86.9" y2="313.1" stroke="rgb(51, 65, 85)" stroke-width="1" opacity="0.3"/>
                            <line x1="313.1" y1="313.1" x2="86.9" y2="86.9" stroke="rgb(51, 65, 85)" stroke-width="1" opacity="0.3"/>
                        </g>
                        
                        <!-- Optimal performance polygon (green) -->
                        <polygon id="optimalPolygon" 
                                 points="200,56 312,124 312,276 200,344 88,276 88,124" 
                                 fill="rgba(34, 197, 94, 0.1)" 
                                 stroke="#22c55e" 
                                 stroke-width="2"/>
                        
                        <!-- Current performance polygon (blue) -->
                        <polygon id="currentPolygon" 
                                 points="200,88 280,148 280,252 200,312 120,252 120,148" 
                                 fill="rgba(59, 130, 246, 0.2)" 
                                 stroke="#3b82f6" 
                                 stroke-width="2"/>
                        
                        <!-- Data points for current performance -->
                        <g id="currentPoints">
                            <circle cx="200" cy="88" r="4" fill="#3b82f6" class="radar-point" data-dimension="Accuracy" data-value="70"/>
                            <circle cx="280" cy="148" r="4" fill="#3b82f6" class="radar-point" data-dimension="Range" data-value="75"/>
                            <circle cx="280" cy="252" r="4" fill="#3b82f6" class="radar-point" data-dimension="Reliability" data-value="75"/>
                            <circle cx="200" cy="312" r="4" fill="#3b82f6" class="radar-point" data-dimension="Speed" data-value="65"/>
                            <circle cx="120" cy="252" r="4" fill="#3b82f6" class="radar-point" data-dimension="Impact" data-value="75"/>
                        </g>
                        
                        <!-- Labels -->
                        <g class="radar-labels">
                            <text x="200" y="30" text-anchor="middle" fill="white" font-size="14" font-weight="500">Accuracy</text>
                            <text x="330" y="130" text-anchor="start" fill="white" font-size="14" font-weight="500">Range</text>
                            <text x="330" y="280" text-anchor="start" fill="white" font-size="14" font-weight="500">Reliability</text>
                            <text x="200" y="385" text-anchor="middle" fill="white" font-size="14" font-weight="500">Speed</text>
                            <text x="70" y="280" text-anchor="end" fill="white" font-size="14" font-weight="500">Impact</text>
                        </g>
                        
                        <!-- Scale labels -->
                        <g class="scale-labels">
                            <text x="210" y="200" fill="rgb(148, 163, 184)" font-size="10">0</text>
                            <text x="210" y="160" fill="rgb(148, 163, 184)" font-size="10">25</text>
                            <text x="210" y="120" fill="rgb(148, 163, 184)" font-size="10">50</text>
                            <text x="210" y="80" fill="rgb(148, 163, 184)" font-size="10">75</text>
                            <text x="210" y="50" fill="rgb(148, 163, 184)" font-size="10">100</text>
                        </g>
                    </svg>
                </div>

                <!-- Radar Chart Tooltip -->
                <div id="radarTooltip" class="absolute bg-slate-900/95 backdrop-blur-sm rounded-lg p-3 border border-slate-600 shadow-2xl opacity-0 pointer-events-none transition-all duration-200 z-50 min-w-40">
                    <div id="radarTooltipDimension" class="text-white font-semibold text-sm mb-1"></div>
                    <div id="radarTooltipValue" class="text-2xl font-bold text-blue-400 mb-1"></div>
                    <div class="text-slate-300 text-xs">Performance Score</div>
                </div>
            </div>

            <!-- Performance Metrics -->
            <div class="grid grid-cols-5 gap-3 mt-4">
                <div class="bg-slate-800/30 rounded-lg p-3 text-center">
                    <div id="accuracyScore" class="text-lg font-bold text-blue-400">70%</div>
                    <div class="text-slate-300 text-xs">Accuracy</div>
                </div>
                <div class="bg-slate-800/30 rounded-lg p-3 text-center">
                    <div id="rangeScore" class="text-lg font-bold text-blue-400">75%</div>
                    <div class="text-slate-300 text-xs">Range</div>
                </div>
                <div class="bg-slate-800/30 rounded-lg p-3 text-center">
                    <div id="reliabilityScore" class="text-lg font-bold text-blue-400">75%</div>
                    <div class="text-slate-300 text-xs">Reliability</div>
                </div>
                <div class="bg-slate-800/30 rounded-lg p-3 text-center">
                    <div id="speedScore" class="text-lg font-bold text-blue-400">65%</div>
                    <div class="text-slate-300 text-xs">Speed</div>
                </div>
                <div class="bg-slate-800/30 rounded-lg p-3 text-center">
                    <div id="impactScore" class="text-lg font-bold text-blue-400">75%</div>
                    <div class="text-slate-300 text-xs">Impact</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Simulation Results Summary -->
    <div class="mt-6 pt-6 border-t border-slate-600/30">
        <h3 class="text-lg font-medium text-white mb-4">Simulation Results & Recommendations</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Overall Assessment -->
            <div class="bg-slate-800/30 rounded-lg p-4">
                <h4 class="text-sm font-medium text-white mb-3">Overall Assessment</h4>
                <div id="overallAssessment" class="space-y-2">
                    <div class="flex items-center justify-between p-2 bg-blue-500/10 border border-blue-500/20 rounded">
                        <span class="text-blue-400 text-sm">Overall Effectiveness</span>
                        <span id="overallScore" class="text-blue-400 font-semibold">72%</span>
                    </div>
                    <div class="flex items-center justify-between p-2 bg-slate-700/30 rounded">
                        <span class="text-slate-300 text-sm">Mission Success Probability</span>
                        <span id="missionSuccess" class="text-white font-semibold">85%</span>
                    </div>
                    <div class="flex items-center justify-between p-2 bg-slate-700/30 rounded">
                        <span class="text-slate-300 text-sm">Optimal Conditions Gap</span>
                        <span id="optimalGap" class="text-orange-400 font-semibold">-18%</span>
                    </div>
                </div>
            </div>

            <!-- Recommendations -->
            <div class="bg-slate-800/30 rounded-lg p-4">
                <h4 class="text-sm font-medium text-white mb-3">Recommendations</h4>
                <div id="recommendations" class="space-y-2">
                    <div class="p-2 bg-yellow-500/10 border border-yellow-500/20 rounded">
                        <div class="flex items-start space-x-2">
                            <div class="w-1.5 h-1.5 bg-yellow-400 rounded-full mt-1.5"></div>
                            <div class="text-slate-300 text-xs">Increase training frequency to improve accuracy scores</div>
                        </div>
                    </div>
                    <div class="p-2 bg-blue-500/10 border border-blue-500/20 rounded">
                        <div class="flex items-start space-x-2">
                            <div class="w-1.5 h-1.5 bg-blue-400 rounded-full mt-1.5"></div>
                            <div class="text-slate-300 text-xs">Consider alternative positioning for better range utilization</div>
                        </div>
                    </div>
                    <div class="p-2 bg-green-500/10 border border-green-500/20 rounded">
                        <div class="flex items-start space-x-2">
                            <div class="w-1.5 h-1.5 bg-green-400 rounded-full mt-1.5"></div>
                            <div class="text-slate-300 text-xs">Current reliability levels are within acceptable parameters</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

    </div> <!-- This closes the firepower-tab -->
    
<!-- Logistics Tab -->
<div id="logistics-tab" class="tab-content hidden">
    <div class="space-y-6">
        <!-- KPI Cards Section -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6">
            
            <!-- Overall Stock Availability % -->
            <div class="glass-panel rounded-lg p-6 relative group cursor-pointer hover:scale-105 transition-all duration-300">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-slate-300 text-sm font-medium">Stock Availability</h3>
                    <span class="w-2 h-2 bg-green-500 rounded-full"></span>
                </div>
                <div class="text-3xl font-bold text-white mb-2">87.3%</div>
                <div class="flex items-center space-x-2 mb-3">
                    <svg class="w-4 h-4 text-green-400" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
                    </svg>
                    <span class="text-green-400 text-sm">+2.1%</span>
                </div>
                <!-- Mini sparkline -->
                <div class="h-8 flex items-end space-x-1">
                    <div class="w-1 bg-green-500/40 h-4"></div>
                    <div class="w-1 bg-green-500/50 h-5"></div>
                    <div class="w-1 bg-green-500/60 h-6"></div>
                    <div class="w-1 bg-green-500/70 h-5"></div>
                    <div class="w-1 bg-green-500/80 h-7"></div>
                    <div class="w-1 bg-green-500/90 h-6"></div>
                    <div class="w-1 bg-green-500 h-8"></div>
                </div>
                
                <!-- Floating Popup Insight -->
                <div class="absolute top-1/2 right-2 transform -translate-y-1/2 w-48 bg-slate-900/95 backdrop-blur-sm rounded-lg p-2.5 opacity-0 group-hover:opacity-100 transition-all duration-300 z-[100] shadow-2xl border border-green-500/30 pointer-events-none">
                    <div class="text-green-400 text-xs font-semibold mb-1">📊 AI INSIGHT</div>
                    <div class="text-white text-xs font-medium mb-1">Strong Supply Position</div>
                    <div class="text-slate-300 text-xs leading-relaxed">
                        • 95%+ availability for critical items<br>
                        • Improved supplier reliability<br>
                        • Buffer stocks at optimal levels<br>
                        • Maintain current procurement schedule
                    </div>
                    <!-- Arrow pointing left to card -->
                    <div class="absolute top-4 right-full w-0 h-0 border-t-4 border-b-4 border-r-4 border-t-transparent border-b-transparent border-r-green-500/30"></div>
                </div>
            </div>

            <!-- Active Deliveries -->
            <div class="glass-panel rounded-lg p-6 relative group cursor-pointer hover:scale-105 transition-all duration-300">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-slate-300 text-sm font-medium">Active Deliveries</h3>
                    <span class="w-2 h-2 bg-blue-500 rounded-full"></span>
                </div>
                <div class="text-3xl font-bold text-white mb-2">24</div>
                <div class="flex items-center space-x-2 mb-3">
                    <svg class="w-4 h-4 text-blue-400" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"/>
                    </svg>
                    <span class="text-blue-400 text-sm">3 today</span>
                </div>
                <!-- Mini sparkline -->
                <div class="h-8 flex items-end space-x-1">
                    <div class="w-1 bg-blue-500/40 h-5"></div>
                    <div class="w-1 bg-blue-500/50 h-6"></div>
                    <div class="w-1 bg-blue-500/60 h-4"></div>
                    <div class="w-1 bg-blue-500/70 h-7"></div>
                    <div class="w-1 bg-blue-500/80 h-5"></div>
                    <div class="w-1 bg-blue-500/90 h-6"></div>
                    <div class="w-1 bg-blue-500 h-4"></div>
                </div>
                
                <!-- Floating Popup Insight -->
                <div class="absolute top-1/2 right-2 transform -translate-y-1/2 w-48 bg-slate-900/95 backdrop-blur-sm rounded-lg p-2.5 opacity-0 group-hover:opacity-100 transition-all duration-300 z-[100] shadow-2xl border border-blue-500/30 pointer-events-none">
                    <div class="text-blue-400 text-xs font-semibold mb-1">🚛 AI INSIGHT</div>
                    <div class="text-white text-xs font-medium mb-1">Normal Delivery Flow</div>
                    <div class="text-slate-300 text-xs leading-relaxed">
                        • 3 high-priority shipments today<br>
                        • Weather conditions favorable<br>
                        • All routes within schedule<br>
                        • No delivery delays expected
                    </div>
                    <!-- Arrow pointing left to card -->
                    <div class="absolute top-4 right-full w-0 h-0 border-t-4 border-b-4 border-r-4 border-t-transparent border-b-transparent border-r-blue-500/30"></div>
                </div>
            </div>

            <!-- Stock Usage Rate -->
            <div class="glass-panel rounded-lg p-6 relative group cursor-pointer hover:scale-105 transition-all duration-300">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-slate-300 text-sm font-medium">Usage Rate</h3>
                    <span class="w-2 h-2 bg-yellow-500 rounded-full"></span>
                </div>
                <div class="text-3xl font-bold text-white mb-2">142%</div>
                <div class="flex items-center space-x-2 mb-3">
                    <svg class="w-4 h-4 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
                    </svg>
                    <span class="text-yellow-400 text-sm">+42%</span>
                </div>
                <!-- Mini sparkline -->
                <div class="h-8 flex items-end space-x-1">
                    <div class="w-1 bg-yellow-500/40 h-6"></div>
                    <div class="w-1 bg-yellow-500/50 h-5"></div>
                    <div class="w-1 bg-yellow-500/60 h-7"></div>
                    <div class="w-1 bg-yellow-500/70 h-8"></div>
                    <div class="w-1 bg-yellow-500/80 h-7"></div>
                    <div class="w-1 bg-yellow-500/90 h-8"></div>
                    <div class="w-1 bg-yellow-500 h-7"></div>
                </div>
                
                <!-- Floating Popup Insight -->
                <div class="absolute top-1/2 right-2 transform -translate-y-1/2 w-48 bg-slate-900/95 backdrop-blur-sm rounded-lg p-2.5 opacity-0 group-hover:opacity-100 transition-all duration-300 z-[100] shadow-2xl border border-yellow-500/30 pointer-events-none">
                    <div class="text-yellow-400 text-xs font-semibold mb-1">⚡ AI INSIGHT</div>
                    <div class="text-white text-xs font-medium mb-1">Elevated Consumption</div>
                    <div class="text-slate-300 text-xs leading-relaxed">
                        • Increased operational tempo<br>
                        • Medical supplies high usage<br>
                        • Ammunition consumption up<br>
                        • Consider expediting resupply
                    </div>
                    <!-- Arrow pointing left to card -->
                    <div class="absolute top-4 right-full w-0 h-0 border-t-4 border-b-4 border-r-4 border-t-transparent border-b-transparent border-r-yellow-500/30"></div>
                </div>
            </div>

            <!-- Predicted Stock Depletion -->
            <div class="glass-panel rounded-lg p-6 relative group cursor-pointer hover:scale-105 transition-all duration-300">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-slate-300 text-sm font-medium">Depletion Forecast</h3>
                    <span class="w-2 h-2 bg-red-500 rounded-full"></span>
                </div>
                <div class="text-3xl font-bold text-white mb-2">18d</div>
                <div class="flex items-center space-x-2 mb-3">
                    <svg class="w-4 h-4 text-red-400" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M14.707 10.293a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L9 12.586V5a1 1 0 012 0v7.586l2.293-2.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                    </svg>
                    <span class="text-red-400 text-sm">Critical</span>
                </div>
                <!-- Mini sparkline -->
                <div class="h-8 flex items-end space-x-1">
                    <div class="w-1 bg-red-500/40 h-3"></div>
                    <div class="w-1 bg-red-500/50 h-4"></div>
                    <div class="w-1 bg-red-500/60 h-5"></div>
                    <div class="w-1 bg-red-500/70 h-6"></div>
                    <div class="w-1 bg-red-500/80 h-7"></div>
                    <div class="w-1 bg-red-500/90 h-7"></div>
                    <div class="w-1 bg-red-500 h-8"></div>
                </div>
                
                <!-- Floating Popup Insight -->
                <div class="absolute top-1/2 right-2 transform -translate-y-1/2 w-48 bg-slate-900/95 backdrop-blur-sm rounded-lg p-2.5 opacity-0 group-hover:opacity-100 transition-all duration-300 z-[100] shadow-2xl border border-red-500/30 pointer-events-none">
                    <div class="text-red-400 text-xs font-semibold mb-1">🔴 AI INSIGHT</div>
                    <div class="text-white text-xs font-medium mb-1">Critical Shortage Alert</div>
                    <div class="text-slate-300 text-xs leading-relaxed">
                        • Class VIII medical supplies low<br>
                        • Immediate procurement required<br>
                        • Alternative suppliers ready<br>
                        • Emergency protocols activated
                    </div>
                    <!-- Arrow pointing left to card -->
                    <div class="absolute top-4 right-full w-0 h-0 border-t-4 border-b-4 border-r-4 border-t-transparent border-b-transparent border-r-red-500/30"></div>
                </div>
            </div>

            <!-- Route Risk Level -->
            <div class="glass-panel rounded-lg p-6 relative group cursor-pointer hover:scale-105 transition-all duration-300">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-slate-300 text-sm font-medium">Route Risk</h3>
                    <span class="w-2 h-2 bg-yellow-500 rounded-full"></span>
                </div>
                <div class="text-3xl font-bold text-white mb-2">MED</div>
                <div class="flex items-center space-x-2 mb-3">
                    <svg class="w-4 h-4 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                    </svg>
                    <span class="text-yellow-400 text-sm">2 routes</span>
                </div>
                <!-- Mini sparkline -->
                <div class="h-8 flex items-end space-x-1">
                    <div class="w-1 bg-yellow-500/40 h-5"></div>
                    <div class="w-1 bg-yellow-500/50 h-4"></div>
                    <div class="w-1 bg-yellow-500/60 h-6"></div>
                    <div class="w-1 bg-yellow-500/70 h-5"></div>
                    <div class="w-1 bg-yellow-500/80 h-7"></div>
                    <div class="w-1 bg-yellow-500/90 h-6"></div>
                    <div class="w-1 bg-yellow-500 h-6"></div>
                </div>
                
                <!-- Floating Popup Insight -->
                <div class="absolute top-1/2 right-2 transform -translate-y-1/2 w-48 bg-slate-900/95 backdrop-blur-sm rounded-lg p-2.5 opacity-0 group-hover:opacity-100 transition-all duration-300 z-[100] shadow-2xl border border-yellow-500/30 pointer-events-none">
                    <div class="text-yellow-400 text-xs font-semibold mb-1">🛣️ AI INSIGHT</div>
                    <div class="text-white text-xs font-medium mb-1">Weather Impact</div>
                    <div class="text-slate-300 text-xs leading-relaxed">
                        • Routes Alpha-7 & Bravo-3 affected<br>
                        • Alternative routes available<br>
                        • +15% longer transit time<br>
                        • Security assessment green
                    </div>
                    <!-- Arrow pointing left to card -->
                    <div class="absolute top-4 right-full w-0 h-0 border-t-4 border-b-4 border-r-4 border-t-transparent border-b-transparent border-r-yellow-500/30"></div>
                </div>
            </div>
        </div>
        
        <!-- Logistics Inventory & Consumption Section -->
        <div class="mt-8">
            <h2 class="text-xl font-bold text-white mb-6 flex items-center">
                <div class="w-1 h-6 bg-blue-500 mr-3"></div>
                LOGISTICS INVENTORY & CONSUMPTION
            </h2>
            
            <!-- Single Interactive Chart with Filter -->
            <div class="glass-panel rounded-lg p-6">
                <!-- Chart Header with Filter Buttons -->
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-slate-300 text-lg font-semibold">Inventory Analysis</h3>
                    <div class="flex items-center space-x-4">
                        <!-- Filter Buttons -->
                        <div class="flex bg-slate-800 rounded-lg p-1">
                            <button id="category-filter" onclick="switchChartView('category')" class="px-4 py-2 text-sm font-medium rounded-md bg-blue-600 text-white transition-all duration-300">
                                By Category
                            </button>
                            <button id="operation-filter" onclick="switchChartView('operation')" class="px-4 py-2 text-sm font-medium rounded-md text-slate-300 hover:text-white transition-all duration-300">
                                By Operation
                            </button>
                        </div>
                        <div class="flex items-center space-x-2 cursor-pointer" onclick="showDrillThrough(getCurrentView())">
                            <span class="text-slate-400 text-sm">Click for details</span>
                            <svg class="w-4 h-4 text-slate-400" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
                            </svg>
                        </div>
                    </div>
                </div>
                
                <!-- Chart Container -->
                <div class="h-80 relative cursor-pointer mb-8" onclick="showDrillThrough(getCurrentView())">
                    <!-- Y-axis labels -->
                    <div id="y-axis-labels" class="absolute left-0 top-0 h-full flex flex-col justify-between text-xs text-slate-400 pr-2">
                        <span>100%</span>
                        <span>75%</span>
                        <span>50%</span>
                        <span>25%</span>
                        <span>0%</span>
                    </div>
                    
                    <!-- Category View Chart -->
                    <div id="category-chart" class="ml-8 h-full flex items-end justify-center space-x-8">
                        <!-- Food Column -->
                        <div class="flex flex-col items-center space-y-2 relative group">
                            <div class="w-16 h-64 bg-slate-700 rounded-t-lg relative overflow-hidden">
                                <!-- Training portion -->
                                <div class="absolute bottom-0 w-full bg-green-500 h-32 rounded-t-lg hover:bg-green-400 transition-all duration-200 cursor-pointer" 
                                     onmouseover="showTooltip(event, 'Food - Training', '45%', '1,200 units', 'MREs, Fresh rations')"
                                     onmouseout="hideTooltip()"></div>
                                <!-- Mission portion -->
                                <div class="absolute bottom-32 w-full bg-green-400 h-32 hover:bg-green-300 transition-all duration-200 cursor-pointer"
                                     onmouseover="showTooltip(event, 'Food - Mission', '42%', '1,140 units', 'Combat rations, Water')"
                                     onmouseout="hideTooltip()"></div>
                            </div>
                            <span class="text-xs text-slate-300 font-medium">Food</span>
                            <span class="text-xs text-green-400">87%</span>
                        </div>
                        
                        <!-- Fuel Column -->
                        <div class="flex flex-col items-center space-y-2 relative group">
                            <div class="w-16 h-64 bg-slate-700 rounded-t-lg relative overflow-hidden">
                                <!-- Training portion -->
                                <div class="absolute bottom-0 w-full bg-blue-500 h-24 rounded-t-lg hover:bg-blue-400 transition-all duration-200 cursor-pointer"
                                     onmouseover="showTooltip(event, 'Fuel - Training', '30%', '24,120 gal', 'JP-8, Diesel')"
                                     onmouseout="hideTooltip()"></div>
                                <!-- Mission portion -->
                                <div class="absolute bottom-24 w-full bg-blue-400 h-28 hover:bg-blue-300 transition-all duration-200 cursor-pointer"
                                     onmouseover="showTooltip(event, 'Fuel - Mission', '35%', '28,080 gal', 'Aviation fuel, Vehicle fuel')"
                                     onmouseout="hideTooltip()"></div>
                            </div>
                            <span class="text-xs text-slate-300 font-medium">Fuel</span>
                            <span class="text-xs text-blue-400">65%</span>
                        </div>
                        
                        <!-- Equipment Column -->
                        <div class="flex flex-col items-center space-y-2 relative group">
                            <div class="w-16 h-64 bg-slate-700 rounded-t-lg relative overflow-hidden">
                                <!-- Training portion -->
                                <div class="absolute bottom-0 w-full bg-yellow-500 h-40 rounded-t-lg hover:bg-yellow-400 transition-all duration-200 cursor-pointer"
                                     onmouseover="showTooltip(event, 'Equipment - Training', '50%', '240 units', 'Vehicles, Comms gear')"
                                     onmouseout="hideTooltip()"></div>
                                <!-- Mission portion -->
                                <div class="absolute bottom-40 w-full bg-yellow-400 h-20 hover:bg-yellow-300 transition-all duration-200 cursor-pointer"
                                     onmouseover="showTooltip(event, 'Equipment - Mission', '25%', '120 units', 'Weapons, Electronics')"
                                     onmouseout="hideTooltip()"></div>
                            </div>
                            <span class="text-xs text-slate-300 font-medium">Equipment</span>
                            <span class="text-xs text-yellow-400">75%</span>
                        </div>
                        
                        <!-- Medicine Column -->
                        <div class="flex flex-col items-center space-y-2 relative group">
                            <div class="w-16 h-64 bg-slate-700 rounded-t-lg relative overflow-hidden">
                                <!-- Training portion -->
                                <div class="absolute bottom-0 w-full bg-red-500 h-16 rounded-t-lg hover:bg-red-400 transition-all duration-200 cursor-pointer"
                                     onmouseover="showTooltip(event, 'Medicine - Training', '20%', '80 units', 'First aid, Basic supplies')"
                                     onmouseout="hideTooltip()"></div>
                                <!-- Mission portion -->
                                <div class="absolute bottom-16 w-full bg-red-400 h-12 hover:bg-red-300 transition-all duration-200 cursor-pointer"
                                     onmouseover="showTooltip(event, 'Medicine - Mission', '15%', '60 units', 'Combat medic supplies')"
                                     onmouseout="hideTooltip()"></div>
                            </div>
                            <span class="text-xs text-slate-300 font-medium">Medicine</span>
                            <span class="text-xs text-red-400">35%</span>
                        </div>
                    </div>
                    
                    <!-- Operation View Chart -->
                    <div id="operation-chart" class="ml-8 h-full flex items-end justify-center space-x-12 hidden">
                        <!-- Training Column -->
                        <div class="flex flex-col items-center space-y-2 relative group">
                            <div class="w-20 h-64 bg-slate-700 rounded-t-lg relative overflow-hidden cursor-pointer"
                                 onmouseover="showOperationTooltip(event, 'training')"
                                 onmouseout="hideTooltip()">
                                <!-- Food portion -->
                                <div class="absolute bottom-0 w-full bg-green-500 h-20 hover:bg-green-400 transition-all duration-200"></div>
                                <!-- Fuel portion -->
                                <div class="absolute bottom-20 w-full bg-blue-500 h-16 hover:bg-blue-400 transition-all duration-200"></div>
                                <!-- Equipment portion -->
                                <div class="absolute bottom-36 w-full bg-yellow-500 h-24 hover:bg-yellow-400 transition-all duration-200"></div>
                                <!-- Medicine portion -->
                                <div class="absolute bottom-60 w-full bg-red-500 h-8 hover:bg-red-400 transition-all duration-200"></div>
                            </div>
                            <span class="text-sm text-slate-300 font-medium">Training</span>
                            <span class="text-sm text-blue-400">680 units</span>
                        </div>
                        
                        <!-- Mission Column -->
                        <div class="flex flex-col items-center space-y-2 relative group">
                            <div class="w-20 h-64 bg-slate-700 rounded-t-lg relative overflow-hidden cursor-pointer"
                                 onmouseover="showOperationTooltip(event, 'mission')"
                                 onmouseout="hideTooltip()">
                                <!-- Food portion -->
                                <div class="absolute bottom-0 w-full bg-green-400 h-32 hover:bg-green-300 transition-all duration-200"></div>
                                <!-- Fuel portion -->
                                <div class="absolute bottom-32 w-full bg-blue-400 h-28 hover:bg-blue-300 transition-all duration-200"></div>
                                <!-- Equipment portion -->
                                <div class="absolute bottom-60 w-full bg-yellow-400 h-20 hover:bg-yellow-300 transition-all duration-200"></div>
                                <!-- Medicine portion -->
                                <div class="absolute bottom-80 w-full bg-red-400 h-12 hover:bg-red-300 transition-all duration-200"></div>
                            </div>
                            <span class="text-sm text-slate-300 font-medium">Mission</span>
                            <span class="text-sm text-green-400">920 units</span>
                        </div>
                    </div>
                    
                    <!-- Dynamic Legend -->
                    <div id="category-legend" class="absolute bottom-0 right-0 flex flex-col space-y-2">
                        <div class="flex items-center space-x-2">
                            <div class="w-3 h-3 bg-green-500 rounded"></div>
                            <span class="text-xs text-slate-300">Training</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-3 h-3 bg-green-400 rounded"></div>
                            <span class="text-xs text-slate-300">Mission</span>
                        </div>
                    </div>
                    
                    <div id="operation-legend" class="absolute bottom-0 right-0 flex flex-col space-y-2 hidden">
                        <div class="flex items-center space-x-2">
                            <div class="w-3 h-3 bg-green-500 rounded"></div>
                            <span class="text-xs text-slate-300">Food</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-3 h-3 bg-blue-500 rounded"></div>
                            <span class="text-xs text-slate-300">Fuel</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-3 h-3 bg-yellow-500 rounded"></div>
                            <span class="text-xs text-slate-300">Equipment</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-3 h-3 bg-red-500 rounded"></div>
                            <span class="text-xs text-slate-300">Medicine</span>
                        </div>
                    </div>
                </div>
                
                <!-- Stock Used vs Remaining Comparison Chart -->
                <div class="mt-8 pt-6 border-t border-slate-700">
                    <div class="flex items-center justify-between mb-4">
                        <h4 class="text-slate-300 text-lg font-semibold">Stock Usage Analysis</h4>
                        <div class="text-slate-400 text-sm">Stock Used vs Remaining</div>
                    </div>
                    
                    <!-- 100% Bar Chart for each category -->
                    <div class="space-y-4">
                        <!-- Food Stock Bar -->
                        <div class="space-y-2">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-2">
                                    <div class="text-lg">🍽️</div>
                                    <span class="text-slate-300 font-medium">Food Supplies</span>
                                </div>
                                <div class="text-green-400 text-sm font-semibold">87% Available</div>
                            </div>
                            <div class="w-full h-6 bg-slate-700 rounded-lg overflow-hidden relative cursor-pointer group"
                                 onmouseover="showStockTooltip(event, 'Food', 13, 87, '2,340 units used', '15,600 units remaining')"
                                 onmouseout="hideTooltip()">
                                <!-- Used portion (red) -->
                                <div class="absolute left-0 top-0 h-full bg-red-500/80 hover:bg-red-500 transition-all duration-200" style="width: 13%"></div>
                                <!-- Remaining portion (green) -->
                                <div class="absolute right-0 top-0 h-full bg-green-500/80 hover:bg-green-500 transition-all duration-200" style="width: 87%"></div>
                                <!-- Percentage labels -->
                                <div class="absolute inset-0 flex items-center justify-between px-3 text-xs font-semibold text-white">
                                    <span class="text-red-100">13% Used</span>
                                    <span class="text-green-100">87% Available</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fuel Stock Bar -->
                        <div class="space-y-2">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-2">
                                    <div class="text-lg">⛽</div>
                                    <span class="text-slate-300 font-medium">Fuel Reserves</span>
                                </div>
                                <div class="text-blue-400 text-sm font-semibold">65% Available</div>
                            </div>
                            <div class="w-full h-6 bg-slate-700 rounded-lg overflow-hidden relative cursor-pointer group"
                                 onmouseover="showStockTooltip(event, 'Fuel', 35, 65, '28,350 gal used', '52,650 gal remaining')"
                                 onmouseout="hideTooltip()">
                                <!-- Used portion (red) -->
                                <div class="absolute left-0 top-0 h-full bg-red-500/80 hover:bg-red-500 transition-all duration-200" style="width: 35%"></div>
                                <!-- Remaining portion (blue) -->
                                <div class="absolute right-0 top-0 h-full bg-blue-500/80 hover:bg-blue-500 transition-all duration-200" style="width: 65%"></div>
                                <!-- Percentage labels -->
                                <div class="absolute inset-0 flex items-center justify-between px-3 text-xs font-semibold text-white">
                                    <span class="text-red-100">35% Used</span>
                                    <span class="text-blue-100">65% Available</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Equipment Stock Bar -->
                        <div class="space-y-2">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-2">
                                    <div class="text-lg">🔧</div>
                                    <span class="text-slate-300 font-medium">Equipment</span>
                                </div>
                                <div class="text-yellow-400 text-sm font-semibold">75% Available</div>
                            </div>
                            <div class="w-full h-6 bg-slate-700 rounded-lg overflow-hidden relative cursor-pointer group"
                                 onmouseover="showStockTooltip(event, 'Equipment', 25, 75, '120 units used', '360 units remaining')"
                                 onmouseout="hideTooltip()">
                                <!-- Used portion (red) -->
                                <div class="absolute left-0 top-0 h-full bg-red-500/80 hover:bg-red-500 transition-all duration-200" style="width: 25%"></div>
                                <!-- Remaining portion (yellow) -->
                                <div class="absolute right-0 top-0 h-full bg-yellow-500/80 hover:bg-yellow-500 transition-all duration-200" style="width: 75%"></div>
                                <!-- Percentage labels -->
                                <div class="absolute inset-0 flex items-center justify-between px-3 text-xs font-semibold text-white">
                                    <span class="text-red-100">25% Used</span>
                                    <span class="text-yellow-100">75% Available</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Medical Stock Bar -->
                        <div class="space-y-2">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-2">
                                    <div class="text-lg">🏥</div>
                                    <span class="text-slate-300 font-medium">Medical Supplies</span>
                                </div>
                                <div class="text-red-400 text-sm font-semibold">35% Available</div>
                            </div>
                            <div class="w-full h-6 bg-slate-700 rounded-lg overflow-hidden relative cursor-pointer group"
                                 onmouseover="showStockTooltip(event, 'Medical', 65, 35, '260 units used', '140 units remaining')"
                                 onmouseout="hideTooltip()">
                                <!-- Used portion (red) -->
                                <div class="absolute left-0 top-0 h-full bg-red-600/80 hover:bg-red-600 transition-all duration-200" style="width: 65%"></div>
                                <!-- Remaining portion (red - critical) -->
                                <div class="absolute right-0 top-0 h-full bg-red-400/80 hover:bg-red-400 transition-all duration-200" style="width: 35%"></div>
                                <!-- Percentage labels -->
                                <div class="absolute inset-0 flex items-center justify-between px-3 text-xs font-semibold text-white">
                                    <span class="text-red-100">65% Used</span>
                                    <span class="text-red-100">35% Critical</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Legend for Stock Comparison -->
                    <div class="flex items-center justify-center space-x-6 mt-4 pt-4 border-t border-slate-700/50">
                        <div class="flex items-center space-x-2">
                            <div class="w-4 h-3 bg-red-500 rounded"></div>
                            <span class="text-xs text-slate-300">Stock Used</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-4 h-3 bg-green-500 rounded"></div>
                            <span class="text-xs text-slate-300">Stock Available</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-4 h-3 bg-red-400 rounded"></div>
                            <span class="text-xs text-slate-300">Critical Level</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Delivery Records & Route Tracking Section -->
        <div class="mt-8">
            <h2 class="text-xl font-bold text-white mb-6 flex items-center">
                <div class="w-1 h-6 bg-green-500 mr-3"></div>
                DELIVERY RECORDS & ROUTE TRACKING
            </h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Interactive Convoy Tracker -->
                <div class="lg:col-span-2 glass-panel rounded-lg p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-slate-300 text-lg font-semibold">Convoy Tracker - Malaysia Operations</h3>
                        <div class="flex items-center space-x-4">
                            <div class="flex items-center space-x-2">
                                <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                                <span class="text-green-400 text-sm">On-Time</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                                <span class="text-yellow-400 text-sm">Delayed</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                                <span class="text-red-400 text-sm">At Risk</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Convoy Tracking Display -->
                    <div class="relative h-96 bg-slate-900 rounded-lg overflow-hidden border border-slate-600">
                        <!-- Grid Background -->
                        <div class="absolute inset-0 opacity-20">
                            <svg class="w-full h-full">
                                <defs>
                                    <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
                                        <path d="M 40 0 L 0 0 0 40" fill="none" stroke="rgba(148, 163, 184, 0.3)" stroke-width="1"/>
                                    </pattern>
                                </defs>
                                <rect width="100%" height="100%" fill="url(#grid)"/>
                            </svg>
                        </div>
                        
                        <!-- Interactive Convoy Routes SVG -->
                        <svg viewBox="0 0 800 400" class="w-full h-full relative z-10">
                            <!-- Major Cities as Reference Points -->
                            <!-- Kuala Lumpur -->
                            <circle cx="270" cy="200" r="6" fill="#1e40af" stroke="#3b82f6" stroke-width="2"/>
                            <text x="280" y="205" fill="#60a5fa" font-size="14" font-weight="bold" font-family="monospace">KL</text>
                            
                            <!-- Kuantan -->
                            <circle cx="320" cy="180" r="5" fill="#475569" stroke="#64748b" stroke-width="2"/>
                            <text x="330" y="175" fill="#94a3b8" font-size="12" font-family="monospace">Kuantan</text>
                            
                            <!-- Johor Bahru -->
                            <circle cx="300" cy="320" r="5" fill="#475569" stroke="#64748b" stroke-width="2"/>
                            <text x="310" y="335" fill="#94a3b8" font-size="12" font-family="monospace">Johor Bahru</text>
                            
                            <!-- Penang -->
                            <circle cx="220" cy="120" r="5" fill="#475569" stroke="#64748b" stroke-width="2"/>
                            <text x="230" y="115" fill="#94a3b8" font-size="12" font-family="monospace">Penang</text>
                            
                            <!-- Kota Kinabalu -->
                            <circle cx="520" cy="200" r="5" fill="#475569" stroke="#64748b" stroke-width="2"/>
                            <text x="530" y="195" fill="#94a3b8" font-size="12" font-family="monospace">Kota Kinabalu</text>
                            
                            <!-- Kuching -->
                            <circle cx="460" cy="280" r="5" fill="#475569" stroke="#64748b" stroke-width="2"/>
                            <text x="470" y="275" fill="#94a3b8" font-size="12" font-family="monospace">Kuching</text>
                            
                            <!-- Active Convoy Routes -->
                            
                            <!-- Convoy #08 - On Time (Green) KL to JB -->
                            <path d="M270 200 Q285 260 300 320" stroke="#22c55e" stroke-width="4" fill="none" stroke-dasharray="8,4">
                                <animate attributeName="stroke-dashoffset" values="0;-12" dur="2s" repeatCount="indefinite"/>
                            </path>
                            <circle cx="285" cy="260" r="8" fill="#22c55e" stroke="#16a34a" stroke-width="2" class="convoy-marker cursor-pointer" 
                                    onmouseover="showConvoyTooltip(event, 'Convoy #08', 'On-Time', 'KL → Johor Bahru', 'Medical supplies', '2.5 hours remaining')"
                                    onmouseout="hideTooltip()">
                                <animate attributeName="r" values="8;12;8" dur="2s" repeatCount="indefinite"/>
                            </circle>
                            <text x="295" y="268" fill="#22c55e" font-size="12" font-weight="bold" font-family="monospace">#08</text>
                            
                            <!-- Convoy #12 - Delayed (Yellow) KL to Kuantan -->
                            <path d="M270 200 Q295 190 320 180" stroke="#eab308" stroke-width="4" fill="none" stroke-dasharray="8,4">
                                <animate attributeName="stroke-dashoffset" values="0;-12" dur="1.5s" repeatCount="indefinite"/>
                            </path>
                            <circle cx="295" cy="190" r="8" fill="#eab308" stroke="#ca8a04" stroke-width="2" class="convoy-marker cursor-pointer"
                                    onmouseover="showConvoyTooltip(event, 'Convoy #12', 'Delayed', 'KL → Kuantan', 'Food & Equipment', '2 hours delay - Traffic congestion')"
                                    onmouseout="hideTooltip()">
                                <animate attributeName="r" values="8;12;8" dur="1.5s" repeatCount="indefinite"/>
                            </circle>
                            <text x="305" y="198" fill="#eab308" font-size="12" font-weight="bold" font-family="monospace">#12</text>
                            
                            <!-- Convoy #15 - At Risk (Red) Penang to KL -->
                            <path d="M220 120 Q245 160 270 200" stroke="#ef4444" stroke-width="4" fill="none" stroke-dasharray="8,4">
                                <animate attributeName="stroke-dashoffset" values="0;-12" dur="1s" repeatCount="indefinite"/>
                            </path>
                            <circle cx="245" cy="160" r="8" fill="#ef4444" stroke="#dc2626" stroke-width="2" class="convoy-marker cursor-pointer"
                                    onmouseover="showConvoyTooltip(event, 'Convoy #15', 'At Risk', 'Penang → KL', 'Fuel & Ammunition', 'Vehicle breakdown - Backup dispatched')"
                                    onmouseout="hideTooltip()">
                                <animate attributeName="r" values="8;14;8" dur="1s" repeatCount="indefinite"/>
                            </circle>
                            <text x="255" y="168" fill="#ef4444" font-size="12" font-weight="bold" font-family="monospace">#15</text>
                            
                            <!-- Convoy #23 - On Time (Green) Kuching to KK -->
                            <path d="M460 280 Q490 240 520 200" stroke="#22c55e" stroke-width="4" fill="none" stroke-dasharray="8,4">
                                <animate attributeName="stroke-dashoffset" values="0;-12" dur="2s" repeatCount="indefinite"/>
                            </path>
                            <circle cx="490" cy="240" r="8" fill="#22c55e" stroke="#16a34a" stroke-width="2" class="convoy-marker cursor-pointer"
                                    onmouseover="showConvoyTooltip(event, 'Convoy #23', 'On-Time', 'Kuching → Kota Kinabalu', 'Construction Materials', '4.2 hours remaining')"
                                    onmouseout="hideTooltip()">
                                <animate attributeName="r" values="8;12;8" dur="2s" repeatCount="indefinite"/>
                            </circle>
                            <text x="500" y="248" fill="#22c55e" font-size="12" font-weight="bold" font-family="monospace">#23</text>
                            
                            <!-- Weather Warning Zone around Kuantan -->
                            <circle cx="320" cy="180" r="30" fill="none" stroke="#f59e0b" stroke-width="3" stroke-dasharray="6,6" opacity="0.8">
                                <animate attributeName="r" values="30;40;30" dur="3s" repeatCount="indefinite"/>
                                <animate attributeName="opacity" values="0.8;0.4;0.8" dur="3s" repeatCount="indefinite"/>
                            </circle>
                            <text x="335" y="188" fill="#f59e0b" font-size="10" font-weight="bold" font-family="monospace">⚠️ Weather Alert</text>
                        </svg>
                        
                        <!-- Map Controls -->
                        <div class="absolute top-4 right-4 flex flex-col space-y-2">
                            <button class="bg-slate-700/80 hover:bg-slate-600 text-white p-2 rounded-lg transition-colors" onclick="refreshConvoyData()">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd"/>
                                </svg>
                            </button>
                            <button class="bg-slate-700/80 hover:bg-slate-600 text-white p-2 rounded-lg transition-colors" onclick="toggleMapView()">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h4a1 1 0 010 2H6.414l2.293 2.293a1 1 0 01-1.414 1.414L5 6.414V8a1 1 0 01-2 0V4zm9 1a1 1 0 010-2h4a1 1 0 011 1v4a1 1 0 01-2 0V6.414l-2.293 2.293a1 1 0 11-1.414-1.414L13.586 5H12zm-9 7a1 1 0 012 0v1.586l2.293-2.293a1 1 0 111.414 1.414L6.414 15H8a1 1 0 010 2H4a1 1 0 01-1-1v-4zm13-1a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 010-2h1.586l-2.293-2.293a1 1 0 111.414-1.414L15 13.586V12a1 1 0 011-1z" clip-rule="evenodd"/>
                                </svg>
                            </button>
                        </div>
                        
                        <!-- Live Status Indicator -->
                        <div class="absolute bottom-4 left-4 flex items-center space-x-2 bg-slate-900/80 backdrop-blur-sm rounded-lg px-3 py-2">
                            <div class="w-2 h-2 bg-green-500 rounded-full">
                                <animate attributeName="opacity" values="1;0.3;1" dur="2s" repeatCount="indefinite"/>
                            </div>
                            <span class="text-green-400 text-xs font-medium">LIVE TRACKING</span>
                            <span id="last-update" class="text-slate-400 text-xs">Updated 30s ago</span>
                        </div>
                    </div>
                </div>
                
                <!-- Delivery Schedule Gantt Chart -->
                <div class="glass-panel rounded-lg p-4">
                    <h4 class="text-slate-300 font-semibold mb-4 flex items-center">
                        <svg class="w-5 h-5 mr-2 text-blue-400" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"/>
                        </svg>
                        Delivery Schedule Gantt Chart
                    </h4>
                    
                    <!-- Gantt Chart Container -->
                    <div class="relative bg-slate-900 rounded-lg p-4 border border-slate-600">
                        <!-- Time Scale Header (X-axis) -->
                        <div class="flex items-center mb-4">
                            <div class="w-20 text-xs text-slate-400 font-medium">Convoy ID</div>
                            <div class="flex-1 flex justify-between text-xs text-slate-400 px-2">
                                <span>08:00</span>
                                <span>10:00</span>
                                <span>12:00</span>
                                <span>14:00</span>
                                <span>16:00</span>
                                <span>18:00</span>
                                <span>20:00</span>
                                <span>22:00</span>
                                <span>00:00</span>
                                <span>02:00</span>
                                <span>04:00</span>
                                <span>06:00</span>
                            </div>
                        </div>
                        
                        <!-- Gantt Chart Rows -->
                        <div class="space-y-3">
                            <!-- Convoy #08 - On Time -->
                            <div class="flex items-center">
                                <div class="w-20 text-sm font-medium text-green-400">#08</div>
                                <div class="flex-1 relative h-8 bg-slate-800 rounded-lg">
                                    <!-- Grid lines -->
                                    <div class="absolute inset-0 flex">
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1"></div>
                                    </div>
                                    <!-- Planned schedule bar (light green) -->
                                    <div class="absolute top-1 left-[25%] w-[33.33%] h-2 bg-green-500/40 rounded-sm cursor-pointer"
                                         onmouseover="showGanttTooltip(event, 'Convoy #08', 'KL → Johor Bahru', 'Medical supplies', '11:00-15:00 (Planned)', '60% complete', 'On schedule')"
                                         onmouseout="hideTooltip()"></div>
                                    <!-- Actual progress bar (solid green) -->
                                    <div class="absolute top-4 left-[25%] w-[20%] h-2 bg-green-500 rounded-sm cursor-pointer"
                                         onmouseover="showGanttTooltip(event, 'Convoy #08', 'KL → Johor Bahru', 'Medical supplies', '11:00-15:00 (Planned)', '60% complete', 'On schedule')"
                                         onmouseout="hideTooltip()"></div>
                                    <!-- Current position indicator -->
                                    <div class="absolute top-2 left-[45%] w-2 h-2 bg-green-400 rounded-full">
                                        <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Convoy #12 - Delayed -->
                            <div class="flex items-center">
                                <div class="w-20 text-sm font-medium text-yellow-400">#12</div>
                                <div class="flex-1 relative h-8 bg-slate-800 rounded-lg">
                                    <!-- Grid lines -->
                                    <div class="absolute inset-0 flex">
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1"></div>
                                    </div>
                                    <!-- Planned schedule bar (light yellow) -->
                                    <div class="absolute top-1 left-[16.67%] w-[25%] h-2 bg-yellow-500/40 rounded-sm cursor-pointer"
                                         onmouseover="showGanttTooltip(event, 'Convoy #12', 'KL → Kuantan', 'Food & Equipment', '09:00-12:00 (Planned)', '75% complete', '2h delayed due to traffic')"
                                         onmouseout="hideTooltip()"></div>
                                    <!-- Actual progress bar (solid yellow, extended) -->
                                    <div class="absolute top-4 left-[16.67%] w-[33.33%] h-2 bg-yellow-500 rounded-sm cursor-pointer"
                                         onmouseover="showGanttTooltip(event, 'Convoy #12', 'KL → Kuantan', 'Food & Equipment', '09:00-12:00 (Planned)', '75% complete', '2h delayed due to traffic')"
                                         onmouseout="hideTooltip()"></div>
                                    <!-- Current position indicator -->
                                    <div class="absolute top-2 left-[41.67%] w-2 h-2 bg-yellow-400 rounded-full">
                                        <div class="w-2 h-2 bg-yellow-400 rounded-full animate-pulse"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Convoy #15 - At Risk -->
                            <div class="flex items-center">
                                <div class="w-20 text-sm font-medium text-red-400">#15</div>
                                <div class="flex-1 relative h-8 bg-slate-800 rounded-lg">
                                    <!-- Grid lines -->
                                    <div class="absolute inset-0 flex">
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1"></div>
                                    </div>
                                    <!-- Planned schedule bar (light red) -->
                                    <div class="absolute top-1 left-[8.33%] w-[41.67%] h-2 bg-red-500/40 rounded-sm cursor-pointer"
                                         onmouseover="showGanttTooltip(event, 'Convoy #15', 'Penang → KL', 'Fuel & Ammunition', '08:00-13:00 (Planned)', '30% complete', 'Vehicle breakdown - Stopped')"
                                         onmouseout="hideTooltip()"></div>
                                    <!-- Actual progress bar (solid red, very short) -->
                                    <div class="absolute top-4 left-[8.33%] w-[12.5%] h-2 bg-red-500 rounded-sm cursor-pointer"
                                         onmouseover="showGanttTooltip(event, 'Convoy #15', 'Penang → KL', 'Fuel & Ammunition', '08:00-13:00 (Planned)', '30% complete', 'Vehicle breakdown - Stopped')"
                                         onmouseout="hideTooltip()"></div>
                                    <!-- Current position indicator (stopped) -->
                                    <div class="absolute top-2 left-[20.83%] w-2 h-2 bg-red-400 rounded-full">
                                        <div class="w-2 h-2 bg-red-400 rounded-full animate-ping"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Convoy #23 - On Time -->
                            <div class="flex items-center">
                                <div class="w-20 text-sm font-medium text-green-400">#23</div>
                                <div class="flex-1 relative h-8 bg-slate-800 rounded-lg">
                                    <!-- Grid lines -->
                                    <div class="absolute inset-0 flex">
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1 border-r border-slate-700/50"></div>
                                        <div class="flex-1"></div>
                                    </div>
                                    <!-- Planned schedule bar (light green) -->
                                    <div class="absolute top-1 left-[33.33%] w-[50%] h-2 bg-green-500/40 rounded-sm cursor-pointer"
                                         onmouseover="showGanttTooltip(event, 'Convoy #23', 'Kuching → Kota Kinabalu', 'Construction Materials', '12:00-20:00 (Planned)', '50% complete', 'On schedule')"
                                         onmouseout="hideTooltip()"></div>
                                    <!-- Actual progress bar (solid green) -->
                                    <div class="absolute top-4 left-[33.33%] w-[25%] h-2 bg-green-500 rounded-sm cursor-pointer"
                                         onmouseover="showGanttTooltip(event, 'Convoy #23', 'Kuching → Kota Kinabalu', 'Construction Materials', '12:00-20:00 (Planned)', '50% complete', 'On schedule')"
                                         onmouseout="hideTooltip()"></div>
                                    <!-- Current position indicator -->
                                    <div class="absolute top-2 left-[58.33%] w-2 h-2 bg-green-400 rounded-full">
                                        <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Legend -->
                        <div class="flex items-center justify-center space-x-6 mt-4 pt-4 border-t border-slate-700/50">
                            <div class="flex items-center space-x-2">
                                <div class="w-4 h-2 bg-green-500/40 rounded-sm"></div>
                                <span class="text-xs text-slate-300">Planned Schedule</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-4 h-2 bg-green-500 rounded-sm"></div>
                                <span class="text-xs text-slate-300">Actual Progress</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-2 h-2 bg-green-400 rounded-full"></div>
                                <span class="text-xs text-slate-300">Current Position</span>
                            </div>
                        </div>
                    </div>
                </div>
                    
                    <!-- Route Statistics -->
                    <div class="glass-panel rounded-lg p-4">
                        <h4 class="text-slate-300 font-semibold mb-3 flex items-center">
                            <svg class="w-5 h-5 mr-2 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 0l-2 2a1 1 0 101.414 1.414L8 10.414l1.293 1.293a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                            </svg>
                            Route Statistics
                        </h4>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between">
                                <span class="text-slate-400 text-sm">On-Time Rate</span>
                                <span class="text-green-400 font-semibold">78%</span>
                            </div>
                            <div class="w-full bg-slate-700 rounded-full h-2">
                                <div class="bg-green-500 h-2 rounded-full" style="width: 78%"></div>
                            </div>
                            
                            <div class="flex items-center justify-between">
                                <span class="text-slate-400 text-sm">Average Delay</span>
                                <span class="text-yellow-400 font-semibold">1.2h</span>
                            </div>
                            
                            <div class="flex items-center justify-between">
                                <span class="text-slate-400 text-sm">Active Routes</span>
                                <span class="text-blue-400 font-semibold">12</span>
                            </div>
                            
                            <div class="flex items-center justify-between">
                                <span class="text-slate-400 text-sm">Critical Alerts</span>
                                <span class="text-red-400 font-semibold">1</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Weather & Traffic Alerts -->
                    <div class="glass-panel rounded-lg p-4">
                        <h4 class="text-slate-300 font-semibold mb-3 flex items-center">
                            <svg class="w-5 h-5 mr-2 text-orange-400" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                            </svg>
                            Active Alerts
                        </h4>
                        <div class="space-y-2">
                            <div class="bg-yellow-900/30 border border-yellow-500/30 rounded-lg p-3">
                                <div class="flex items-center space-x-2 mb-1">
                                    <div class="w-2 h-2 bg-yellow-500 rounded-full"></div>
                                    <span class="text-yellow-400 text-sm font-medium">Weather Warning</span>
                                </div>
                                <div class="text-slate-300 text-xs">Heavy rain near Kuantan affecting Route A-7</div>
                            </div>
                            
                            <div class="bg-red-900/30 border border-red-500/30 rounded-lg p-3">
                                <div class="flex items-center space-x-2 mb-1">
                                    <div class="w-2 h-2 bg-red-500 rounded-full"></div>
                                    <span class="text-red-400 text-sm font-medium">Vehicle Issue</span>
                                </div>
                                <div class="text-slate-300 text-xs">Convoy #15 mechanical failure - Backup dispatched</div>
                            </div>
                            
                            <div class="bg-blue-900/30 border border-blue-500/30 rounded-lg p-3">
                                <div class="flex items-center space-x-2 mb-1">
                                    <div class="w-2 h-2 bg-blue-500 rounded-full"></div>
                                    <span class="text-blue-400 text-sm font-medium">Traffic Update</span>
                                </div>
                                <div class="text-slate-300 text-xs">Alternative route suggested for KL-Kuantan corridor</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Predictive Logistics Section -->
        <div class="mt-8">
            <h2 class="text-xl font-bold text-white mb-6 flex items-center">
                <div class="w-1 h-6 bg-purple-500 mr-3"></div>
                PREDICTIVE LOGISTICS
            </h2>
            
            <!-- Predictive Analytics Chart -->
            <div class="glass-panel rounded-lg p-6">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-slate-300 text-lg font-semibold">Stock Level Forecast - Next 30 Days</h3>
                    <div class="flex items-center space-x-4">
                        <!-- Forecast Period Selector -->
                        <div class="flex bg-slate-800 rounded-lg p-1">
                            <button id="forecast-7d" onclick="switchForecastPeriod('7d')" class="px-3 py-1 text-sm font-medium rounded-md text-slate-300 hover:text-white transition-all duration-300">
                                7 Days
                            </button>
                            <button id="forecast-30d" onclick="switchForecastPeriod('30d')" class="px-3 py-1 text-sm font-medium rounded-md bg-purple-600 text-white transition-all duration-300">
                                30 Days
                            </button>
                            <button id="forecast-90d" onclick="switchForecastPeriod('90d')" class="px-3 py-1 text-sm font-medium rounded-md text-slate-300 hover:text-white transition-all duration-300">
                                90 Days
                            </button>
                        </div>
                        <!-- Category Toggles -->
                        <div class="flex items-center space-x-2">
                            <button id="toggle-food" onclick="toggleForecastCategory('food')" class="px-2 py-1 bg-green-600 text-white text-xs rounded font-medium transition-all duration-300">
                                Food
                            </button>
                            <button id="toggle-fuel" onclick="toggleForecastCategory('fuel')" class="px-2 py-1 bg-blue-600 text-white text-xs rounded font-medium transition-all duration-300">
                                Fuel
                            </button>
                            <button id="toggle-equipment" onclick="toggleForecastCategory('equipment')" class="px-2 py-1 bg-yellow-600 text-white text-xs rounded font-medium transition-all duration-300">
                                Equipment
                            </button>
                            <button id="toggle-medical" onclick="toggleForecastCategory('medical')" class="px-2 py-1 bg-red-600 text-white text-xs rounded font-medium transition-all duration-300">
                                Medical
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Forecast Chart Container -->
                <div class="relative h-96 bg-slate-900 rounded-lg border border-slate-600 p-4">
                    <!-- Chart Grid and Axes -->
                    <svg viewBox="0 0 800 320" class="w-full h-full">
                        <!-- Grid Background -->
                        <defs>
                            <pattern id="forecast-grid" width="80" height="40" patternUnits="userSpaceOnUse">
                                <path d="M 80 0 L 0 0 0 40" fill="none" stroke="rgba(148, 163, 184, 0.2)" stroke-width="1"/>
                            </pattern>
                            <!-- Gradient for forecast uncertainty -->
                            <linearGradient id="uncertaintyGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" style="stop-color:rgba(147, 51, 234, 0.3);stop-opacity:0.3"/>
                                <stop offset="100%" style="stop-color:rgba(147, 51, 234, 0.1);stop-opacity:0.1"/>
                            </linearGradient>
                        </defs>
                        <rect width="100%" height="100%" fill="url(#forecast-grid)"/>
                        
                        <!-- Y-axis labels (Stock Levels) -->
                        <g id="y-axis-forecast">
                            <text x="30" y="30" fill="#94a3b8" font-size="12" font-family="monospace">100%</text>
                            <text x="30" y="90" fill="#94a3b8" font-size="12" font-family="monospace">75%</text>
                            <text x="30" y="150" fill="#94a3b8" font-size="12" font-family="monospace">50%</text>
                            <text x="30" y="210" fill="#94a3b8" font-size="12" font-family="monospace">25%</text>
                            <text x="30" y="270" fill="#94a3b8" font-size="12" font-family="monospace">0%</text>
                            
                            <!-- Critical threshold line -->
                            <line x1="50" y1="210" x2="750" y2="210" stroke="#ef4444" stroke-width="2" stroke-dasharray="5,5" opacity="0.7"/>
                            <text x="755" y="215" fill="#ef4444" font-size="10" font-family="monospace">Critical</text>
                        </g>
                        
                        <!-- X-axis labels (Time) -->
                        <g id="x-axis-forecast-30d">
                            <text x="50" y="300" fill="#94a3b8" font-size="10" font-family="monospace">Today</text>
                            <text x="150" y="300" fill="#94a3b8" font-size="10" font-family="monospace">Week 1</text>
                            <text x="300" y="300" fill="#94a3b8" font-size="10" font-family="monospace">Week 2</text>
                            <text x="450" y="300" fill="#94a3b8" font-size="10" font-family="monospace">Week 3</text>
                            <text x="600" y="300" fill="#94a3b8" font-size="10" font-family="monospace">Week 4</text>
                            <text x="750" y="300" fill="#94a3b8" font-size="10" font-family="monospace">30 Days</text>
                        </g>
                        
                        <!-- Current Date Indicator -->
                        <line x1="50" y1="20" x2="50" y2="280" stroke="#60a5fa" stroke-width="2" opacity="0.8"/>
                        <text x="55" y="35" fill="#60a5fa" font-size="10" font-family="monospace" font-weight="bold">NOW</text>
                        
                        <!-- Food Forecast Line -->
                        <g id="food-forecast" class="forecast-line">
                            <!-- Historical data (solid line) -->
                            <path d="M50 90 L80 95 L110 85 L140 90 L170 100" stroke="#22c55e" stroke-width="3" fill="none" opacity="1"/>
                            
                            <!-- Forecast data (dashed line with uncertainty band) -->
                            <path d="M170 100 L200 110 L230 125 L260 140 L290 160 L320 175 L350 190 L380 200 L410 215 L440 225 L470 240 L500 250 L530 265 L560 275 L590 285 L620 295 L650 300 L680 305 L710 310 L740 315" 
                                  stroke="#22c55e" stroke-width="3" fill="none" stroke-dasharray="8,4" opacity="0.9"/>
                            
                            <!-- Uncertainty band -->
                            <path d="M170 100 L200 105 L230 115 L260 125 L290 140 L320 150 L350 165 L380 175 L410 185 L440 195 L470 210 L500 220 L530 235 L560 245 L590 255 L620 265 L650 270 L680 275 L710 280 L740 285 L740 345 L710 340 L680 335 L650 330 L620 325 L590 315 L560 305 L530 295 L500 280 L470 270 L440 255 L410 245 L380 225 L350 215 L320 200 L290 180 L260 155 L230 135 L200 115 Z" 
                                  fill="url(#uncertaintyGradient)" opacity="0.3"/>
                            
                            <!-- Data points -->
                            <circle cx="50" cy="90" r="4" fill="#22c55e" stroke="#16a34a" stroke-width="2" class="forecast-point cursor-pointer"
                                    onmouseover="showForecastTooltip(event, 'Food', 'Today', '87%', 'Current Level', 'Optimal stock')"
                                    onmouseout="hideTooltip()"/>
                            <circle cx="170" cy="100" r="4" fill="#22c55e" stroke="#16a34a" stroke-width="2" class="forecast-point cursor-pointer"
                                    onmouseover="showForecastTooltip(event, 'Food', 'Day 7', '82%', 'Predicted', 'Normal consumption')"
                                    onmouseout="hideTooltip()"/>
                            <circle cx="320" cy="175" r="4" fill="#22c55e" stroke="#16a34a" stroke-width="2" class="forecast-point cursor-pointer"
                                    onmouseover="showForecastTooltip(event, 'Food', 'Day 15', '65%', 'Predicted', 'Resupply recommended')"
                                    onmouseout="hideTooltip()"/>
                            <circle cx="500" cy="250" r="4" fill="#22c55e" stroke="#16a34a" stroke-width="2" class="forecast-point cursor-pointer"
                                    onmouseover="showForecastTooltip(event, 'Food', 'Day 25', '35%', 'Predicted', 'Critical threshold approaching')"
                                    onmouseout="hideTooltip()"/>
                            <circle cx="740" cy="315" r="4" fill="#22c55e" stroke="#16a34a" stroke-width="2" class="forecast-point cursor-pointer"
                                    onmouseover="showForecastTooltip(event, 'Food', 'Day 30', '15%', 'Predicted', 'Emergency resupply required')"
                                    onmouseout="hideTooltip()"/>
                        </g>
                        
                        <!-- Fuel Forecast Line -->
                        <g id="fuel-forecast" class="forecast-line">
                            <!-- Historical data -->
                            <path d="M50 130 L80 125 L110 135 L140 140 L170 145" stroke="#3b82f6" stroke-width="3" fill="none" opacity="1"/>
                            
                            <!-- Forecast data -->
                            <path d="M170 145 L200 155 L230 170 L260 185 L290 200 L320 220 L350 235 L380 250 L410 265 L440 280 L470 295 L500 305 L530 315 L560 320 L590 325 L620 330 L650 335 L680 340 L710 345 L740 350" 
                                  stroke="#3b82f6" stroke-width="3" fill="none" stroke-dasharray="8,4" opacity="0.9"/>
                            
                            <!-- Data points -->
                            <circle cx="50" cy="130" r="4" fill="#3b82f6" stroke="#1d4ed8" stroke-width="2" class="forecast-point cursor-pointer"
                                    onmouseover="showForecastTooltip(event, 'Fuel', 'Today', '65%', 'Current Level', 'Adequate reserves')"
                                    onmouseout="hideTooltip()"/>
                            <circle cx="170" cy="145" r="4" fill="#3b82f6" stroke="#1d4ed8" stroke-width="2" class="forecast-point cursor-pointer"
                                    onmouseover="showForecastTooltip(event, 'Fuel', 'Day 7', '58%', 'Predicted', 'Normal consumption')"
                                    onmouseout="hideTooltip()"/>
                            <circle cx="320" cy="220" r="4" fill="#3b82f6" stroke="#1d4ed8" stroke-width="2" class="forecast-point cursor-pointer"
                                    onmouseover="showForecastTooltip(event, 'Fuel', 'Day 15', '35%', 'Predicted', 'Monitor closely')"
                                    onmouseout="hideTooltip()"/>
                            <circle cx="500" cy="305" r="4" fill="#3b82f6" stroke="#1d4ed8" stroke-width="2" class="forecast-point cursor-pointer"
                                    onmouseover="showForecastTooltip(event, 'Fuel', 'Day 25', '8%', 'Predicted', 'Critical - Order now')"
                                    onmouseout="hideTooltip()"/>
                        </g>
                        
                        <!-- Equipment Forecast Line -->
                        <g id="equipment-forecast" class="forecast-line">
                            <!-- Historical data -->
                            <path d="M50 110 L80 108 L110 112 L140 115 L170 118" stroke="#eab308" stroke-width="3" fill="none" opacity="1"/>
                            
                            <!-- Forecast data -->
                            <path d="M170 118 L200 125 L230 135 L260 145 L290 155 L320 165 L350 175 L380 185 L410 195 L440 205 L470 215 L500 225 L530 235 L560 245 L590 255 L620 265 L650 275 L680 285 L710 295 L740 305" 
                                  stroke="#eab308" stroke-width="3" fill="none" stroke-dasharray="8,4" opacity="0.9"/>
                            
                            <!-- Data points -->
                            <circle cx="50" cy="110" r="4" fill="#eab308" stroke="#ca8a04" stroke-width="2" class="forecast-point cursor-pointer"
                                    onmouseover="showForecastTooltip(event, 'Equipment', 'Today', '75%', 'Current Level', 'Good availability')"
                                    onmouseout="hideTooltip()"/>
                            <circle cx="320" cy="165" r="4" fill="#eab308" stroke="#ca8a04" stroke-width="2" class="forecast-point cursor-pointer"
                                    onmouseover="showForecastTooltip(event, 'Equipment', 'Day 15', '62%', 'Predicted', 'Steady decline')"
                                    onmouseout="hideTooltip()"/>
                            <circle cx="740" cy="305" r="4" fill="#eab308" stroke="#ca8a04" stroke-width="2" class="forecast-point cursor-pointer"
                                    onmouseover="showForecastTooltip(event, 'Equipment', 'Day 30', '25%', 'Predicted', 'Maintenance scheduled')"
                                    onmouseout="hideTooltip()"/>
                        </g>
                        
                        <!-- Medical Forecast Line -->
                        <g id="medical-forecast" class="forecast-line">
                            <!-- Historical data -->
                            <path d="M50 190 L80 195 L110 205 L140 215 L170 225" stroke="#ef4444" stroke-width="3" fill="none" opacity="1"/>
                            
                            <!-- Forecast data -->
                            <path d="M170 225 L200 235 L230 250 L260 265 L290 280 L320 295 L350 305 L380 315 L410 320 L440 325 L470 330 L500 335 L530 340 L560 345 L590 350 L620 355 L650 360 L680 365 L710 370 L740 375" 
                                  stroke="#ef4444" stroke-width="3" fill="none" stroke-dasharray="8,4" opacity="0.9"/>
                            
                            <!-- Data points -->
                            <circle cx="50" cy="190" r="4" fill="#ef4444" stroke="#dc2626" stroke-width="2" class="forecast-point cursor-pointer"
                                    onmouseover="showForecastTooltip(event, 'Medical', 'Today', '35%', 'Current Level', 'Already critical')"
                                    onmouseout="hideTooltip()"/>
                            <circle cx="230" cy="250" r="4" fill="#ef4444" stroke="#dc2626" stroke-width="2" class="forecast-point cursor-pointer"
                                    onmouseover="showForecastTooltip(event, 'Medical', 'Day 10', '18%', 'Predicted', 'Emergency resupply needed')"
                                    onmouseout="hideTooltip()"/>
                            <circle cx="350" cy="305" r="4" fill="#ef4444" stroke="#dc2626" stroke-width="2" class="forecast-point cursor-pointer"
                                    onmouseover="showForecastTooltip(event, 'Medical', 'Day 18', '5%', 'Predicted', 'Mission critical shortage')"
                                    onmouseout="hideTooltip()"/>
                        </g>
                        
                        <!-- Forecast Confidence Indicator -->
                        <g id="confidence-indicator">
                            <rect x="600" y="40" width="120" height="60" fill="rgba(30, 41, 59, 0.8)" stroke="rgba(51, 65, 85, 0.5)" rx="5"/>
                            <text x="610" y="55" fill="#a855f7" font-size="10" font-weight="bold" font-family="monospace">CONFIDENCE</text>
                            <text x="610" y="70" fill="#22c55e" font-size="9" font-family="monospace">High: 0-7 days</text>
                            <text x="610" y="82" fill="#eab308" font-size="9" font-family="monospace">Med: 8-21 days</text>
                            <text x="610" y="94" fill="#ef4444" font-size="9" font-family="monospace">Low: 22+ days</text>
                        </g>
                    </svg>
                </div>
                
                <!-- Forecast Insights Panel -->
                <div class="mt-6 grid grid-cols-1 md:grid-cols-4 gap-4">
                    <!-- Food Insights -->
                    <div class="bg-green-900/20 border border-green-500/30 rounded-lg p-4">
                        <div class="flex items-center space-x-2 mb-2">
                            <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                            <span class="text-green-400 font-semibold text-sm">Food Supplies</span>
                        </div>
                        <div class="text-white text-lg font-bold mb-1">28 days</div>
                        <div class="text-green-300 text-xs">Until critical level</div>
                        <div class="text-slate-400 text-xs mt-2">Confidence: 85%</div>
                    </div>
                    
                    <!-- Fuel Insights -->
                    <div class="bg-blue-900/20 border border-blue-500/30 rounded-lg p-4">
                        <div class="flex items-center space-x-2 mb-2">
                            <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
                            <span class="text-blue-400 font-semibold text-sm">Fuel Reserves</span>
                        </div>
                        <div class="text-white text-lg font-bold mb-1">22 days</div>
                        <div class="text-blue-300 text-xs">Until critical level</div>
                        <div class="text-slate-400 text-xs mt-2">Confidence: 78%</div>
                    </div>
                    
                    <!-- Equipment Insights -->
                    <div class="bg-yellow-900/20 border border-yellow-500/30 rounded-lg p-4">
                        <div class="flex items-center space-x-2 mb-2">
                            <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                            <span class="text-yellow-400 font-semibold text-sm">Equipment</span>
                        </div>
                        <div class="text-white text-lg font-bold mb-1">35 days</div>
                        <div class="text-yellow-300 text-xs">Until maintenance</div>
                        <div class="text-slate-400 text-xs mt-2">Confidence: 92%</div>
                    </div>
                    
                    <!-- Medical Insights -->
                    <div class="bg-red-900/20 border border-red-500/30 rounded-lg p-4 status-glow-red">
                        <div class="flex items-center space-x-2 mb-2">
                            <div class="w-3 h-3 bg-red-500 rounded-full animate-pulse"></div>
                            <span class="text-red-400 font-semibold text-sm">Medical</span>
                        </div>
                        <div class="text-white text-lg font-bold mb-1">12 days</div>
                        <div class="text-red-300 text-xs">Until depletion</div>
                        <div class="text-slate-400 text-xs mt-2">Confidence: 95%</div>
                    </div>
                </div>
                
                <!-- Forecast Summary Card -->
                <div class="mt-6 bg-slate-800/30 border border-slate-600/50 rounded-lg p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center space-x-2">
                            <svg class="w-6 h-6 text-cyan-400" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            <span class="text-cyan-400 font-bold text-lg">Forecast Summary</span>
                        </div>
                        <div class="text-slate-400 text-sm">Next Resupply Schedule</div>
                    </div>
                    
                    <!-- Quick Resupply Indicators -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                        <!-- Medical - Most Urgent -->
                        <div class="bg-red-900/30 border border-red-500/40 rounded-lg p-4 relative overflow-hidden">
                            <div class="absolute top-0 right-0 w-16 h-16 bg-red-500/10 rounded-full -mr-8 -mt-8"></div>
                            <div class="relative z-10">
                                <div class="flex items-center justify-between mb-2">
                                    <div class="text-red-400 font-semibold text-sm">🏥 Medical</div>
                                    <div class="text-red-300 text-xs font-medium">URGENT</div>
                                </div>
                                <div class="text-white text-2xl font-bold mb-1">12 days</div>
                                <div class="text-red-300 text-xs">Until depletion</div>
                                <div class="mt-2 pt-2 border-t border-red-500/20">
                                    <div class="text-red-200 text-xs font-medium">📅 Order by: Tomorrow</div>
                                </div>
                            </div>
                            <div class="absolute bottom-0 left-0 w-full h-1 bg-red-500/20">
                                <div class="h-full bg-red-500 animate-pulse" style="width: 95%"></div>
                            </div>
                        </div>
                        
                        <!-- Fuel - High Priority -->
                        <div class="bg-blue-900/30 border border-blue-500/40 rounded-lg p-4 relative overflow-hidden">
                            <div class="absolute top-0 right-0 w-16 h-16 bg-blue-500/10 rounded-full -mr-8 -mt-8"></div>
                            <div class="relative z-10">
                                <div class="flex items-center justify-between mb-2">
                                    <div class="text-blue-400 font-semibold text-sm">⛽ Fuel</div>
                                    <div class="text-blue-300 text-xs font-medium">HIGH</div>
                                </div>
                                <div class="text-white text-2xl font-bold mb-1">22 days</div>
                                <div class="text-blue-300 text-xs">Until critical</div>
                                <div class="mt-2 pt-2 border-t border-blue-500/20">
                                    <div class="text-blue-200 text-xs font-medium">📅 Order by: Day 15</div>
                                </div>
                            </div>
                            <div class="absolute bottom-0 left-0 w-full h-1 bg-blue-500/20">
                                <div class="h-full bg-blue-500" style="width: 78%"></div>
                            </div>
                        </div>
                        
                        <!-- Food - Medium Priority -->
                        <div class="bg-green-900/30 border border-green-500/40 rounded-lg p-4 relative overflow-hidden">
                            <div class="absolute top-0 right-0 w-16 h-16 bg-green-500/10 rounded-full -mr-8 -mt-8"></div>
                            <div class="relative z-10">
                                <div class="flex items-center justify-between mb-2">
                                    <div class="text-green-400 font-semibold text-sm">🍽️ Food</div>
                                    <div class="text-green-300 text-xs font-medium">MEDIUM</div>
                                </div>
                                <div class="text-white text-2xl font-bold mb-1">28 days</div>
                                <div class="text-green-300 text-xs">Until critical</div>
                                <div class="mt-2 pt-2 border-t border-green-500/20">
                                    <div class="text-green-200 text-xs font-medium">📅 Order by: Day 21</div>
                                </div>
                            </div>
                            <div class="absolute bottom-0 left-0 w-full h-1 bg-green-500/20">
                                <div class="h-full bg-green-500" style="width: 85%"></div>
                            </div>
                        </div>
                        
                        <!-- Equipment - Low Priority -->
                        <div class="bg-yellow-900/30 border border-yellow-500/40 rounded-lg p-4 relative overflow-hidden">
                            <div class="absolute top-0 right-0 w-16 h-16 bg-yellow-500/10 rounded-full -mr-8 -mt-8"></div>
                            <div class="relative z-10">
                                <div class="flex items-center justify-between mb-2">
                                    <div class="text-yellow-400 font-semibold text-sm">🔧 Equipment</div>
                                    <div class="text-yellow-300 text-xs font-medium">LOW</div>
                                </div>
                                <div class="text-white text-2xl font-bold mb-1">35 days</div>
                                <div class="text-yellow-300 text-xs">Until maintenance</div>
                                <div class="mt-2 pt-2 border-t border-yellow-500/20">
                                    <div class="text-yellow-200 text-xs font-medium">📅 Schedule: Day 30</div>
                                </div>
                            </div>
                            <div class="absolute bottom-0 left-0 w-full h-1 bg-yellow-500/20">
                                <div class="h-full bg-yellow-500" style="width: 92%"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Next Actions Timeline -->
                    <div class="bg-slate-900/50 border border-slate-600/30 rounded-lg p-4">
                        <div class="flex items-center space-x-2 mb-3">
                            <svg class="w-5 h-5 text-purple-400" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"/>
                            </svg>
                            <span class="text-purple-400 font-semibold">Next 7 Days Action Items</span>
                        </div>
                        <div class="space-y-2">
                            <div class="flex items-center space-x-3 p-2 bg-red-900/20 border border-red-500/20 rounded">
                                <div class="w-2 h-2 bg-red-500 rounded-full animate-pulse"></div>
                                <div class="flex-1">
                                    <div class="text-red-300 text-sm font-medium">Tomorrow: Emergency medical procurement</div>
                                    <div class="text-slate-400 text-xs">Contact suppliers, expedite Class VIII supplies</div>
                                </div>
                                <div class="text-red-400 text-xs font-bold">DAY 1</div>
                            </div>
                            <div class="flex items-center space-x-3 p-2 bg-blue-900/20 border border-blue-500/20 rounded">
                                <div class="w-2 h-2 bg-blue-500 rounded-full"></div>
                                <div class="flex-1">
                                    <div class="text-blue-300 text-sm font-medium">Day 3: Fuel supplier coordination</div>
                                    <div class="text-slate-400 text-xs">Confirm delivery schedules, backup suppliers</div>
                                </div>
                                <div class="text-blue-400 text-xs font-bold">DAY 3</div>
                            </div>
                            <div class="flex items-center space-x-3 p-2 bg-green-900/20 border border-green-500/20 rounded">
                                <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                <div class="flex-1">
                                    <div class="text-green-300 text-sm font-medium">Day 5: Food inventory assessment</div>
                                    <div class="text-slate-400 text-xs">Review consumption patterns, adjust forecasts</div>
                                </div>
                                <div class="text-green-400 text-xs font-bold">DAY 5</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- AI Recommendations -->
                <div class="mt-6 bg-purple-900/20 border border-purple-500/30 rounded-lg p-4">
                    <div class="flex items-center space-x-2 mb-3">
                        <svg class="w-5 h-5 text-purple-400" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        <span class="text-purple-400 font-semibold">AI Recommendations</span>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                        <div class="space-y-2">
                            <div class="flex items-start space-x-2">
                                <div class="w-2 h-2 bg-red-500 rounded-full mt-1.5"></div>
                                <div class="text-slate-300">
                                    <span class="text-red-400 font-medium">URGENT:</span> Medical supplies require immediate emergency procurement
                                </div>
                            </div>
                            <div class="flex items-start space-x-2">
                                <div class="w-2 h-2 bg-yellow-500 rounded-full mt-1.5"></div>
                                <div class="text-slate-300">
                                    <span class="text-yellow-400 font-medium">PLAN:</span> Schedule fuel delivery for Day 15 to avoid shortage
                                </div>
                            </div>
                        </div>
                        <div class="space-y-2">
                            <div class="flex items-start space-x-2">
                                <div class="w-2 h-2 bg-green-500 rounded-full mt-1.5"></div>
                                <div class="text-slate-300">
                                    <span class="text-green-400 font-medium">OPTIMIZE:</span> Food inventory levels are optimal for current operations
                                </div>
                            </div>
                            <div class="flex items-start space-x-2">
                                <div class="w-2 h-2 bg-blue-500 rounded-full mt-1.5"></div>
                                <div class="text-slate-300">
                                    <span class="text-blue-400 font-medium">MONITOR:</span> Equipment maintenance window approaching in 3 weeks
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Route Risk Analysis Section -->
        <div class="mt-8">
            <h2 class="text-xl font-bold text-white mb-4 flex items-center">
                <div class="w-1 h-6 bg-red-500 mr-3"></div>
                ROUTE RISK ANALYSIS
            </h2>
            
            <div class="space-y-4">
                <!-- Interactive Risk Heatmap -->
                <div class="glass-panel rounded-lg p-4">
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="text-slate-300 font-semibold">Malaysia Operations - Risk Heatmap</h3>
                        <div class="flex items-center space-x-3">
                            <!-- Risk Layer Toggles -->
                            <div class="flex items-center space-x-1">
                                <button id="terrain-toggle" onclick="toggleRiskLayer('terrain')" class="px-2 py-1 bg-amber-600 text-white text-xs rounded font-medium transition-all duration-300">
                                    Terrain
                                </button>
                                <button id="weather-toggle" onclick="toggleRiskLayer('weather')" class="px-2 py-1 bg-slate-600 text-slate-300 text-xs rounded font-medium transition-all duration-300">
                                    Weather
                                </button>
                                <button id="threat-toggle" onclick="toggleRiskLayer('threat')" class="px-2 py-1 bg-slate-600 text-slate-300 text-xs rounded font-medium transition-all duration-300">
                                    Threat
                                </button>
                            </div>
                            <div class="text-slate-400 text-xs">Click zones</div>
                        </div>
                    </div>
                    
                    <!-- Risk Heatmap Display -->
                    <div class="relative h-72 bg-slate-900 rounded-lg overflow-hidden border border-slate-600">
                        <!-- Grid Background -->
                        <div class="absolute inset-0 opacity-20">
                            <svg class="w-full h-full">
                                <defs>
                                    <pattern id="risk-grid" width="40" height="40" patternUnits="userSpaceOnUse">
                                        <path d="M 40 0 L 0 0 0 40" fill="none" stroke="rgba(148, 163, 184, 0.3)" stroke-width="1"/>
                                    </pattern>
                                </defs>
                                <rect width="100%" height="100%" fill="url(#risk-grid)"/>
                            </svg>
                        </div>
                        
                        <!-- Risk Zones SVG -->
                        <svg viewBox="0 0 800 400" class="w-full h-full relative z-10">
                            <!-- Risk Zone Definitions -->
                            <defs>
                                <!-- Gradient for High Risk -->
                                <radialGradient id="highRisk" cx="50%" cy="50%" r="50%">
                                    <stop offset="0%" style="stop-color:#dc2626;stop-opacity:0.8"/>
                                    <stop offset="100%" style="stop-color:#dc2626;stop-opacity:0.3"/>
                                </radialGradient>
                                <!-- Gradient for Medium Risk -->
                                <radialGradient id="mediumRisk" cx="50%" cy="50%" r="50%">
                                    <stop offset="0%" style="stop-color:#f59e0b;stop-opacity:0.7"/>
                                    <stop offset="100%" style="stop-color:#f59e0b;stop-opacity:0.2"/>
                                </radialGradient>
                                <!-- Gradient for Low Risk -->
                                <radialGradient id="lowRisk" cx="50%" cy="50%" r="50%">
                                    <stop offset="0%" style="stop-color:#22c55e;stop-opacity:0.6"/>
                                    <stop offset="100%" style="stop-color:#22c55e;stop-opacity:0.1"/>
                                </radialGradient>
                            </defs>
                            
                            <!-- Base Map Cities -->
                            <!-- Kuala Lumpur (Central Hub) -->
                            <circle cx="270" cy="200" r="8" fill="#1e40af" stroke="#3b82f6" stroke-width="3"/>
                            <text x="285" y="205" fill="#60a5fa" font-size="16" font-weight="bold" font-family="monospace">KL HQ</text>
                            
                            <!-- Regional Cities -->
                            <circle cx="320" cy="180" r="5" fill="#475569" stroke="#64748b" stroke-width="2"/>
                            <text x="330" y="175" fill="#94a3b8" font-size="12" font-family="monospace">Kuantan</text>
                            
                            <circle cx="300" cy="320" r="5" fill="#475569" stroke="#64748b" stroke-width="2"/>
                            <text x="310" y="335" fill="#94a3b8" font-size="12" font-family="monospace">Johor Bahru</text>
                            
                            <circle cx="220" cy="120" r="5" fill="#475569" stroke="#64748b" stroke-width="2"/>
                            <text x="230" y="115" fill="#94a3b8" font-size="12" font-family="monospace">Penang</text>
                            
                            <circle cx="520" cy="200" r="5" fill="#475569" stroke="#64748b" stroke-width="2"/>
                            <text x="530" y="195" fill="#94a3b8" font-size="12" font-family="monospace">Kota Kinabalu</text>
                            
                            <circle cx="460" cy="280" r="5" fill="#475569" stroke="#64748b" stroke-width="2"/>
                            <text x="470" y="275" fill="#94a3b8" font-size="12" font-family="monospace">Kuching</text>
                            
                            <!-- TERRAIN RISK LAYER (Active by default) -->
                            <g id="terrain-layer">
                                <!-- High Risk: Mountainous Region (Cameron Highlands area) -->
                                <ellipse cx="240" cy="160" rx="45" ry="35" fill="url(#highRisk)" class="risk-zone cursor-pointer" 
                                         onclick="showRiskDetails('terrain-mountain', 'Mountainous Terrain', 'HIGH', 'Cameron Highlands Region', 'Steep gradients, narrow roads, landslide risk during monsoon')"
                                         onmouseover="highlightRiskZone(this)" onmouseout="unhighlightRiskZone(this)">
                                    <animate attributeName="opacity" values="0.8;0.6;0.8" dur="3s" repeatCount="indefinite"/>
                                </ellipse>
                                <text x="240" y="165" fill="#fca5a5" font-size="10" font-weight="bold" font-family="monospace" text-anchor="middle">HIGH RISK</text>
                                <text x="240" y="175" fill="#fca5a5" font-size="8" font-family="monospace" text-anchor="middle">Terrain</text>
                                
                                <!-- Medium Risk: Coastal Flooding Zone (East Coast) -->
                                <ellipse cx="350" cy="220" rx="50" ry="40" fill="url(#mediumRisk)" class="risk-zone cursor-pointer"
                                         onclick="showRiskDetails('terrain-coastal', 'Coastal Flooding', 'MEDIUM', 'East Coast Corridor', 'Seasonal flooding, bridge vulnerabilities, tidal effects')"
                                         onmouseover="highlightRiskZone(this)" onmouseout="unhighlightRiskZone(this)">
                                    <animate attributeName="opacity" values="0.7;0.5;0.7" dur="4s" repeatCount="indefinite"/>
                                </ellipse>
                                <text x="350" y="225" fill="#fbbf24" font-size="10" font-weight="bold" font-family="monospace" text-anchor="middle">MED RISK</text>
                                <text x="350" y="235" fill="#fbbf24" font-size="8" font-family="monospace" text-anchor="middle">Coastal</text>
                                
                                <!-- Low Risk: Central Plains -->
                                <ellipse cx="270" cy="240" rx="40" ry="30" fill="url(#lowRisk)" class="risk-zone cursor-pointer"
                                         onclick="showRiskDetails('terrain-plains', 'Central Plains', 'LOW', 'Selangor-Negeri Sembilan', 'Flat terrain, good road infrastructure, minimal elevation changes')"
                                         onmouseover="highlightRiskZone(this)" onmouseout="unhighlightRiskZone(this)">
                                    <animate attributeName="opacity" values="0.6;0.4;0.6" dur="5s" repeatCount="indefinite"/>
                                </ellipse>
                                <text x="270" y="245" fill="#86efac" font-size="10" font-weight="bold" font-family="monospace" text-anchor="middle">LOW RISK</text>
                                <text x="270" y="255" fill="#86efac" font-size="8" font-family="monospace" text-anchor="middle">Plains</text>
                                
                                <!-- Medium Risk: Borneo Jungle (Sarawak) -->
                                <ellipse cx="480" cy="250" rx="55" ry="45" fill="url(#mediumRisk)" class="risk-zone cursor-pointer"
                                         onclick="showRiskDetails('terrain-jungle', 'Dense Jungle', 'MEDIUM', 'Sarawak Interior', 'Limited road access, river crossings, remote locations')"
                                         onmouseover="highlightRiskZone(this)" onmouseout="unhighlightRiskZone(this)">
                                    <animate attributeName="opacity" values="0.7;0.5;0.7" dur="4.5s" repeatCount="indefinite"/>
                                </ellipse>
                                <text x="480" y="255" fill="#fbbf24" font-size="10" font-weight="bold" font-family="monospace" text-anchor="middle">MED RISK</text>
                                <text x="480" y="265" fill="#fbbf24" font-size="8" font-family="monospace" text-anchor="middle">Jungle</text>
                            </g>
                            
                            <!-- WEATHER RISK LAYER (Hidden by default) -->
                            <g id="weather-layer" style="display: none;">
                                <!-- High Risk: Monsoon Zone (East Coast) -->
                                <ellipse cx="340" cy="200" rx="60" ry="50" fill="url(#highRisk)" class="risk-zone cursor-pointer"
                                         onclick="showRiskDetails('weather-monsoon', 'Monsoon Impact', 'HIGH', 'East Coast States', 'Heavy rainfall Nov-Mar, flooding, reduced visibility')"
                                         onmouseover="highlightRiskZone(this)" onmouseout="unhighlightRiskZone(this)">
                                    <animate attributeName="opacity" values="0.8;0.6;0.8" dur="2s" repeatCount="indefinite"/>
                                </ellipse>
                                <text x="340" y="205" fill="#fca5a5" font-size="10" font-weight="bold" font-family="monospace" text-anchor="middle">HIGH RISK</text>
                                <text x="340" y="215" fill="#fca5a5" font-size="8" font-family="monospace" text-anchor="middle">Monsoon</text>
                                
                                <!-- Medium Risk: Thunderstorm Zone (Central) -->
                                <ellipse cx="250" cy="180" rx="45" ry="35" fill="url(#mediumRisk)" class="risk-zone cursor-pointer"
                                         onclick="showRiskDetails('weather-storms', 'Thunderstorms', 'MEDIUM', 'Central Region', 'Afternoon storms, lightning risk, sudden weather changes')"
                                         onmouseover="highlightRiskZone(this)" onmouseout="unhighlightRiskZone(this)">
                                    <animate attributeName="opacity" values="0.7;0.5;0.7" dur="3s" repeatCount="indefinite"/>
                                </ellipse>
                                <text x="250" y="185" fill="#fbbf24" font-size="10" font-weight="bold" font-family="monospace" text-anchor="middle">MED RISK</text>
                                <text x="250" y="195" fill="#fbbf24" font-size="8" font-family="monospace" text-anchor="middle">Storms</text>
                                
                                <!-- Low Risk: Sheltered Areas -->
                                <ellipse cx="290" cy="300" rx="40" ry="30" fill="url(#lowRisk)" class="risk-zone cursor-pointer"
                                         onclick="showRiskDetails('weather-stable', 'Stable Weather', 'LOW', 'Southern Peninsula', 'Consistent conditions, minimal weather disruption')"
                                         onmouseover="highlightRiskZone(this)" onmouseout="unhighlightRiskZone(this)">
                                    <animate attributeName="opacity" values="0.6;0.4;0.6" dur="4s" repeatCount="indefinite"/>
                                </ellipse>
                                <text x="290" y="305" fill="#86efac" font-size="10" font-weight="bold" font-family="monospace" text-anchor="middle">LOW RISK</text>
                                <text x="290" y="315" fill="#86efac" font-size="8" font-family="monospace" text-anchor="middle">Stable</text>
                            </g>
                            
                            <!-- THREAT RISK LAYER (Hidden by default) -->
                            <g id="threat-layer" style="display: none;">
                                <!-- High Risk: Border Security Zone -->
                                <ellipse cx="300" cy="340" rx="50" ry="25" fill="url(#highRisk)" class="risk-zone cursor-pointer"
                                         onclick="showRiskDetails('threat-border', 'Border Security', 'HIGH', 'Malaysia-Singapore Border', 'High traffic area, security checkpoints, potential delays')"
                                         onmouseover="highlightRiskZone(this)" onmouseout="unhighlightRiskZone(this)">
                                    <animate attributeName="opacity" values="0.8;0.6;0.8" dur="2.5s" repeatCount="indefinite"/>
                                </ellipse>
                                <text x="300" y="345" fill="#fca5a5" font-size="10" font-weight="bold" font-family="monospace" text-anchor="middle">HIGH RISK</text>
                                <text x="300" y="355" fill="#fca5a5" font-size="8" font-family="monospace" text-anchor="middle">Border</text>
                                
                                <!-- Medium Risk: Urban Congestion -->
                                <ellipse cx="270" cy="200" rx="35" ry="35" fill="url(#mediumRisk)" class="risk-zone cursor-pointer"
                                         onclick="showRiskDetails('threat-urban', 'Urban Congestion', 'MEDIUM', 'Kuala Lumpur Metro', 'Traffic congestion, route complexity, urban hazards')"
                                         onmouseover="highlightRiskZone(this)" onmouseout="unhighlightRiskZone(this)">
                                    <animate attributeName="opacity" values="0.7;0.5;0.7" dur="3.5s" repeatCount="indefinite"/>
                                </ellipse>
                                <text x="270" y="205" fill="#fbbf24" font-size="10" font-weight="bold" font-family="monospace" text-anchor="middle">MED RISK</text>
                                <text x="270" y="215" fill="#fbbf24" font-size="8" font-family="monospace" text-anchor="middle">Urban</text>
                                
                                <!-- Medium Risk: Remote Areas -->
                                <ellipse cx="500" cy="220" rx="45" ry="40" fill="url(#mediumRisk)" class="risk-zone cursor-pointer"
                                         onclick="showRiskDetails('threat-remote', 'Remote Areas', 'MEDIUM', 'Sabah Interior', 'Limited communication, sparse infrastructure, isolation risk')"
                                         onmouseover="highlightRiskZone(this)" onmouseout="unhighlightRiskZone(this)">
                                    <animate attributeName="opacity" values="0.7;0.5;0.7" dur="4s" repeatCount="indefinite"/>
                                </ellipse>
                                <text x="500" y="225" fill="#fbbf24" font-size="10" font-weight="bold" font-family="monospace" text-anchor="middle">MED RISK</text>
                                <text x="500" y="235" fill="#fbbf24" font-size="8" font-family="monospace" text-anchor="middle">Remote</text>
                            </g>
                            
                            <!-- Active Routes Overlay -->
                            <g id="routes-overlay">
                                <!-- Route indicators showing current convoy paths -->
                                <path d="M270 200 Q285 260 300 320" stroke="#22c55e" stroke-width="3" fill="none" stroke-dasharray="6,3" opacity="0.8">
                                    <animate attributeName="stroke-dashoffset" values="0;-9" dur="2s" repeatCount="indefinite"/>
                                </path>
                                <path d="M270 200 Q295 190 320 180" stroke="#eab308" stroke-width="3" fill="none" stroke-dasharray="6,3" opacity="0.8">
                                    <animate attributeName="stroke-dashoffset" values="0;-9" dur="1.5s" repeatCount="indefinite"/>
                                </path>
                                <path d="M220 120 Q245 160 270 200" stroke="#ef4444" stroke-width="3" fill="none" stroke-dasharray="6,3" opacity="0.8">
                                    <animate attributeName="stroke-dashoffset" values="0;-9" dur="1s" repeatCount="indefinite"/>
                                </path>
                            </g>
                        </svg>
                        
                        <!-- Risk Level Legend -->
                        <div class="absolute bottom-4 left-4 bg-slate-900/90 backdrop-blur-sm rounded-lg p-3 border border-slate-600">
                            <div class="text-slate-300 text-xs font-semibold mb-2">RISK LEVELS</div>
                            <div class="space-y-1">
                                <div class="flex items-center space-x-2">
                                    <div class="w-4 h-3 bg-red-500 rounded"></div>
                                    <span class="text-red-300 text-xs">High Risk</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div class="w-4 h-3 bg-yellow-500 rounded"></div>
                                    <span class="text-yellow-300 text-xs">Medium Risk</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div class="w-4 h-3 bg-green-500 rounded"></div>
                                    <span class="text-green-300 text-xs">Low Risk</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Current Layer Indicator -->
                        <div class="absolute top-4 left-4 bg-slate-900/90 backdrop-blur-sm rounded-lg px-3 py-2 border border-slate-600">
                            <div class="flex items-center space-x-2">
                                <div class="w-2 h-2 bg-amber-500 rounded-full">
                                    <animate attributeName="opacity" values="1;0.3;1" dur="2s" repeatCount="indefinite"/>
                                </div>
                                <span id="current-layer-text" class="text-amber-400 text-xs font-medium">TERRAIN ANALYSIS</span>
                            </div>
                        </div>
                        
                        <!-- Map Controls -->
                        <div class="absolute top-4 right-4 flex flex-col space-y-2">
                            <button class="bg-slate-700/80 hover:bg-slate-600 text-white p-2 rounded-lg transition-colors" onclick="refreshRiskData()">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd"/>
                                </svg>
                            </button>
                            <button class="bg-slate-700/80 hover:bg-slate-600 text-white p-2 rounded-lg transition-colors" onclick="toggleFullscreen()">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h4a1 1 0 010 2H6.414l2.293 2.293a1 1 0 01-1.414 1.414L5 6.414V8a1 1 0 01-2 0V4zm9 1a1 1 0 010-2h4a1 1 0 011 1v4a1 1 0 01-2 0V6.414l-2.293 2.293a1 1 0 11-1.414-1.414L13.586 5H12zm-9 7a1 1 0 012 0v1.586l2.293-2.293a1 1 0 111.414 1.414L6.414 15H8a1 1 0 010 2H4a1 1 0 01-1-1v-4zm13-1a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 010-2h1.586l-2.293-2.293a1 1 0 111.414-1.414L15 13.586V12a1 1 0 011-1z" clip-rule="evenodd"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Risk Analysis Summary Section (Below Heatmap) -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <!-- Risk Summary Cards -->
                    <div class="glass-panel rounded-lg p-3">
                        <h4 class="text-slate-300 font-semibold mb-2 flex items-center text-sm">
                            <svg class="w-4 h-4 mr-2 text-red-400" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                            </svg>
                            Risk Summary
                        </h4>
                        <div class="space-y-2">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-2">
                                    <div class="w-2 h-2 bg-red-500 rounded-full"></div>
                                    <span class="text-red-300 text-xs">High Risk</span>
                                </div>
                                <span class="text-red-400 font-semibold text-sm">3</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-2">
                                    <div class="w-2 h-2 bg-yellow-500 rounded-full"></div>
                                    <span class="text-yellow-300 text-xs">Medium Risk</span>
                                </div>
                                <span class="text-yellow-400 font-semibold text-sm">5</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-2">
                                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                    <span class="text-green-300 text-xs">Low Risk</span>
                                </div>
                                <span class="text-green-400 font-semibold text-sm">2</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Current Alerts -->
                    <div class="glass-panel rounded-lg p-3">
                        <h4 class="text-slate-300 font-semibold mb-2 flex items-center text-sm">
                            <svg class="w-4 h-4 mr-2 text-orange-400" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M10 2L3 7v11a2 2 0 002 2h10a2 2 0 002-2V7l-7-5zM8 15a1 1 0 112 0v2H8v-2zm2-7a1 1 0 00-1 1v3a1 1 0 002 0V9a1 1 0 00-1-1z"/>
                            </svg>
                            Active Alerts
                        </h4>
                        <div class="space-y-1">
                            <div class="bg-red-900/30 border border-red-500/30 rounded p-2">
                                <div class="flex items-center space-x-1 mb-1">
                                    <div class="w-1.5 h-1.5 bg-red-500 rounded-full"></div>
                                    <span class="text-red-400 text-xs font-medium">Terrain Alert</span>
                                </div>
                                <div class="text-slate-300 text-xs">Cameron Highlands: Landslide risk</div>
                            </div>
                            
                            <div class="bg-yellow-900/30 border border-yellow-500/30 rounded p-2">
                                <div class="flex items-center space-x-1 mb-1">
                                    <div class="w-1.5 h-1.5 bg-yellow-500 rounded-full"></div>
                                    <span class="text-yellow-400 text-xs font-medium">Weather Alert</span>
                                </div>
                                <div class="text-slate-300 text-xs">East Coast: Monsoon expected</div>
                            </div>
                            
                            <div class="bg-orange-900/30 border border-orange-500/30 rounded p-2">
                                <div class="flex items-center space-x-1 mb-1">
                                    <div class="w-1.5 h-1.5 bg-orange-500 rounded-full"></div>
                                    <span class="text-orange-400 text-xs font-medium">Traffic Alert</span>
                                </div>
                                <div class="text-slate-300 text-xs">KL Metro: Heavy congestion</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Risk Mitigation -->
                    <div class="glass-panel rounded-lg p-3">
                        <h4 class="text-slate-300 font-semibold mb-2 flex items-center text-sm">
                            <svg class="w-4 h-4 mr-2 text-blue-400" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                            </svg>
                            Mitigation
                        </h4>
                        <div class="space-y-1">
                            <div class="bg-blue-900/30 border border-blue-500/30 rounded p-2">
                                <div class="text-blue-400 text-xs font-medium mb-1">Route Alternatives</div>
                                <div class="text-slate-300 text-xs">3 backup routes ready</div>
                            </div>
                            
                            <div class="bg-green-900/30 border border-green-500/30 rounded p-2">
                                <div class="text-green-400 text-xs font-medium mb-1">Escort Available</div>
                                <div class="text-slate-300 text-xs">Security escorts ready</div>
                            </div>
                            
                            <div class="bg-purple-900/30 border border-purple-500/30 rounded p-2">
                                <div class="text-purple-400 text-xs font-medium mb-1">Weather Monitoring</div>
                                <div class="text-slate-300 text-xs">Updates every 15 min</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        
</div>

    
    
    <!-- Modal for Drill-through Details -->
    <div id="detail-modal" class="fixed inset-0 bg-black/50 modal hidden flex items-center justify-center p-4 z-50">
        <div class="glass-card rounded-lg p-6 max-w-4xl w-full max-h-[80vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h3 id="modal-title" class="text-2xl font-bold"></h3>
                <button onclick="closeModal()" class="text-slate-400 hover:text-white text-2xl transition-colors">✕</button>
            </div>
            <div id="modal-content" class="space-y-6">
                <!-- Dynamic content will be inserted here -->
            </div>
        </div>
    </div>

    <script>
        // Update current time
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('en-US', { 
                hour12: false,
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            document.getElementById('current-time').textContent = timeString;
        }
        
        setInterval(updateTime, 1000);
        updateTime();

        // Tab switching functionality
        function switchTab(e, tabName) { // <-- Function signature now accepts 'e'
    
    // 1. Hide all tab contents
    document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.add('hidden');
    });
    
    // 2. Remove active class from all tab buttons
    document.querySelectorAll('.tab-button').forEach(btn => {
        btn.classList.remove('active');
    });
    
    // 3. Show selected tab content (e.g., #supply-tab for Logistics)
    document.getElementById(tabName + '-tab').classList.remove('hidden');
    
    // 4. Add active class to clicked button using the reliable 'e' object
    e.currentTarget.classList.add('active'); 
}
        // Initialize charts
        function initializeCharts() {
            // Sparklines
            createSparkline('personnel-spark', [82, 84, 83, 85, 87, 86, 87], '#10b981');
            createSparkline('equipment-spark', [78, 76, 75, 74, 73, 75, 74], '#f59e0b');
            createSparkline('training-spark', [88, 89, 91, 90, 92, 91, 92], '#10b981');
            createSparkline('supply-spark', [76, 77, 78, 79, 78, 79, 79], '#f59e0b');
            
            // Readiness gauge
            createGauge('readiness-gauge', 83);
            
            // Units distribution chart
            createUnitsChart();
        }

        function createSparkline(canvasId, data, color) {
            const canvas = document.getElementById(canvasId);
            const ctx = canvas.getContext('2d');
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.map((_, i) => i),
                    datasets: [{
                        data: data,
                        borderColor: color,
                        borderWidth: 2,
                        fill: false,
                        pointRadius: 0,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        x: { display: false },
                        y: { display: false }
                    },
                    elements: { point: { radius: 0 } }
                }
            });
        }

        function createGauge(canvasId, value) {
            const canvas = document.getElementById(canvasId);
            const ctx = canvas.getContext('2d');
            
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const centerX = canvas.width / 2;
            const centerY = canvas.height - 10;
            const radius = 80;
            
            // Background arc
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, Math.PI, 0);
            ctx.strokeStyle = '#374151';
            ctx.lineWidth = 12;
            ctx.stroke();
            
            // Value arc
            const angle = Math.PI * (value / 100);
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, Math.PI, Math.PI + angle);
            
            if (value >= 85) ctx.strokeStyle = '#10b981';
            else if (value >= 70) ctx.strokeStyle = '#f59e0b';
            else ctx.strokeStyle = '#ef4444';
            
            ctx.lineWidth = 12;
            ctx.lineCap = 'round';
            ctx.stroke();
            
            // Add percentage text
            ctx.fillStyle = '#ffffff';
            ctx.font = 'bold 16px sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText(value + '%', centerX, centerY - 10);
        }

        function createUnitsChart() {
            const ctx = document.getElementById('units-chart').getContext('2d');
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Ready (85%+)', 'At Risk (70-84%)', 'Critical (<70%)'],
                    datasets: [{
                        label: 'Number of Units',
                        data: [35, 20, 8],
                        backgroundColor: ['#10b981', '#f59e0b', '#ef4444'],
                        borderColor: ['#059669', '#d97706', '#dc2626'],
                        borderWidth: 2,
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': ' + context.parsed.y + ' units';
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: { 
                                color: '#94a3b8',
                                font: { size: 12 }
                            },
                            grid: { color: '#374151' }
                        },
                        x: {
                            ticks: { 
                                color: '#94a3b8',
                                font: { size: 11 }
                            },
                            grid: { display: false }
                        }
                    },
                    onClick: (event, elements) => {
                        if (elements.length > 0) {
                            const index = elements[0].index;
                            const categories = ['ready', 'at-risk', 'critical'];
                            showDrillThrough('units-' + categories[index]);
                        }
                    }
                }
            });
        }

        // Modal and drill-through functionality
        function showDrillThrough(type) {
            const modal = document.getElementById('detail-modal');
            const title = document.getElementById('modal-title');
            const content = document.getElementById('modal-content');
            
            const drillThroughData = {
                'personnel': {
                    title: 'Personnel Readiness - Detailed Breakdown',
                    content: `
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                            <div class="glass-card p-4 rounded-lg">
                                <h4 class="font-semibold mb-2 text-slate-300">Active Personnel</h4>
                                <div class="text-3xl font-bold text-green-400">25,847</div>
                                <div class="text-sm text-slate-400">of 27,000 required (95.7%)</div>
                            </div>
                            <div class="glass-card p-4 rounded-lg">
                                <h4 class="font-semibold mb-2 text-slate-300">Deployment Ready</h4>
                                <div class="text-3xl font-bold text-green-400">22,487</div>
                                <div class="text-sm text-slate-400">87% of active force</div>
                            </div>
                            <div class="glass-card p-4 rounded-lg">
                                <h4 class="font-semibold mb-2 text-slate-300">Training Status</h4>
                                <div class="text-3xl font-bold text-yellow-400">19,234</div>
                                <div class="text-sm text-slate-400">74% fully qualified</div>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="font-semibold mb-4 text-slate-300">Personnel by Command Zone</h4>
                                <div class="space-y-3">
                                    <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                                        <span>Northern Command</span>
                                        <div class="flex items-center space-x-2">
                                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                            <span class="text-green-400 font-semibold">94%</span>
                                        </div>
                                    </div>
                                    <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                                        <span>Eastern Command</span>
                                        <div class="flex items-center space-x-2">
                                            <div class="w-2 h-2 bg-yellow-500 rounded-full"></div>
                                            <span class="text-yellow-400 font-semibold">78%</span>
                                        </div>
                                    </div>
                                    <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                                        <span>Southern Command</span>
                                        <div class="flex items-center space-x-2">
                                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                            <span class="text-green-400 font-semibold">91%</span>
                                        </div>
                                    </div>
                                    <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                                        <span>Western Command</span>
                                        <div class="flex items-center space-x-2">
                                            <div class="w-2 h-2 bg-red-500 rounded-full"></div>
                                            <span class="text-red-400 font-semibold">65%</span>
                                        </div>
                                    </div>
                                    <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                                        <span>Central Command</span>
                                        <div class="flex items-center space-x-2">
                                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                            <span class="text-green-400 font-semibold">89%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <h4 class="font-semibold mb-4 text-slate-300">Critical Personnel Gaps</h4>
                                <div class="space-y-3">
                                    <div class="p-3 bg-red-500/10 rounded-lg border border-red-500/20">
                                        <div class="font-medium text-red-400">Western Command - Specialists</div>
                                        <div class="text-sm text-slate-400">Short 127 technical specialists</div>
                                    </div>
                                    <div class="p-3 bg-yellow-500/10 rounded-lg border border-yellow-500/20">
                                        <div class="font-medium text-yellow-400">Eastern Command - Officers</div>
                                        <div class="text-sm text-slate-400">Need 23 additional officers</div>
                                    </div>
                                    <div class="p-3 bg-blue-500/10 rounded-lg border border-blue-500/20">
                                        <div class="font-medium text-blue-400">Training Pipeline</div>
                                        <div class="text-sm text-slate-400">234 personnel in advanced training</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `
                },
                'equipment': {
                    title: 'Equipment Readiness - Detailed Analysis',
                    content: `
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                            <div class="glass-card p-4 rounded-lg">
                                <h4 class="font-semibold mb-2 text-slate-300">Vehicles</h4>
                                <div class="text-2xl font-bold text-yellow-400">74%</div>
                                <div class="text-sm text-slate-400">Operational ready</div>
                            </div>
                            <div class="glass-card p-4 rounded-lg">
                                <h4 class="font-semibold mb-2 text-slate-300">Weapons Systems</h4>
                                <div class="text-2xl font-bold text-green-400">89%</div>
                                <div class="text-sm text-slate-400">Mission capable</div>
                            </div>
                            <div class="glass-card p-4 rounded-lg">
                                <h4 class="font-semibold mb-2 text-slate-300">Communications</h4>
                                <div class="text-2xl font-bold text-yellow-400">68%</div>
                                <div class="text-sm text-slate-400">Fully operational</div>
                            </div>
                            <div class="glass-card p-4 rounded-lg">
                                <h4 class="font-semibold mb-2 text-slate-300">Support Equipment</h4>
                                <div class="text-2xl font-bold text-green-400">82%</div>
                                <div class="text-sm text-slate-400">Available</div>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="font-semibold mb-4 text-red-400">Critical Equipment Issues</h4>
                                <div class="space-y-3">
                                    <div class="p-3 bg-red-500/10 rounded-lg border border-red-500/20">
                                        <div class="font-medium text-red-400">Western Command - Vehicle Fleet</div>
                                        <div class="text-sm text-slate-400">45% operational - Major maintenance backlog</div>
                                        <div class="text-xs text-slate-500 mt-1">Est. 3 weeks to resolve</div>
                                    </div>
                                    <div class="p-3 bg-red-500/10 rounded-lg border border-red-500/20">
                                        <div class="font-medium text-red-400">Eastern Command - Communications</div>
                                        <div class="text-sm text-slate-400">68% operational - Upgrade needed</div>
                                        <div class="text-xs text-slate-500 mt-1">Critical for Operation Helang</div>
                                    </div>
                                    <div class="p-3 bg-yellow-500/10 rounded-lg border border-yellow-500/20">
                                        <div class="font-medium text-yellow-400">Southern Command - Weapons</div>
                                        <div class="text-sm text-slate-400">Scheduled maintenance due</div>
                                        <div class="text-xs text-slate-500 mt-1">Can be deferred if needed</div>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <h4 class="font-semibold mb-4 text-slate-300">Maintenance Schedule</h4>
                                <div class="space-y-3">
                                    <div class="p-3 glass-card rounded-lg">
                                        <div class="flex justify-between items-center">
                                            <span>Immediate (0-7 days)</span>
                                            <span class="text-red-400 font-semibold">47 items</span>
                                        </div>
                                    </div>
                                    <div class="p-3 glass-card rounded-lg">
                                        <div class="flex justify-between items-center">
                                            <span>Short-term (1-4 weeks)</span>
                                            <span class="text-yellow-400 font-semibold">123 items</span>
                                        </div>
                                    </div>
                                    <div class="p-3 glass-card rounded-lg">
                                        <div class="flex justify-between items-center">
                                            <span>Long-term (1-3 months)</span>
                                            <span class="text-green-400 font-semibold">89 items</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `
                },
                'training': {
                    title: 'Training Readiness - Comprehensive Overview',
                    content: `
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                            <div class="glass-card p-4 rounded-lg">
                                <h4 class="font-semibold mb-2 text-slate-300">Fully Qualified</h4>
                                <div class="text-3xl font-bold text-green-400">92%</div>
                                <div class="text-sm text-slate-400">23,784 personnel</div>
                            </div>
                            <div class="glass-card p-4 rounded-lg">
                                <h4 class="font-semibold mb-2 text-slate-300">In Training</h4>
                                <div class="text-3xl font-bold text-blue-400">6%</div>
                                <div class="text-sm text-slate-400">1,551 personnel</div>
                            </div>
                            <div class="glass-card p-4 rounded-lg">
                                <h4 class="font-semibold mb-2 text-slate-300">Needs Training</h4>
                                <div class="text-3xl font-bold text-yellow-400">2%</div>
                                <div class="text-sm text-slate-400">512 personnel</div>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="font-semibold mb-4 text-slate-300">Training by Specialty</h4>
                                <div class="space-y-3">
                                    <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                                        <span>Combat Operations</span>
                                        <span class="text-green-400 font-semibold">96%</span>
                                    </div>
                                    <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                                        <span>Technical Systems</span>
                                        <span class="text-green-400 font-semibold">89%</span>
                                    </div>
                                    <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                                        <span>Leadership</span>
                                        <span class="text-green-400 font-semibold">94%</span>
                                    </div>
                                    <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                                        <span>Specialized Skills</span>
                                        <span class="text-yellow-400 font-semibold">78%</span>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <h4 class="font-semibold mb-4 text-slate-300">Upcoming Training Programs</h4>
                                <div class="space-y-3">
                                    <div class="p-3 bg-blue-500/10 rounded-lg border border-blue-500/20">
                                        <div class="font-medium text-blue-400">Advanced Combat Training</div>
                                        <div class="text-sm text-slate-400">Dec 20-30, 2024 • 156 personnel</div>
                                    </div>
                                    <div class="p-3 bg-green-500/10 rounded-lg border border-green-500/20">
                                        <div class="font-medium text-green-400">Technical Certification</div>
                                        <div class="text-sm text-slate-400">Jan 5-15, 2025 • 89 personnel</div>
                                    </div>
                                    <div class="p-3 bg-yellow-500/10 rounded-lg border border-yellow-500/20">
                                        <div class="font-medium text-yellow-400">Leadership Development</div>
                                        <div class="text-sm text-slate-400">Jan 10-20, 2025 • 45 personnel</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `
                },
                'supply': {
                    title: 'Supply Readiness - Logistics Overview',
                    content: `
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                            <div class="glass-card p-4 rounded-lg">
                                <h4 class="font-semibold mb-2 text-slate-300">Ammunition</h4>
                                <div class="text-2xl font-bold text-green-400">85%</div>
                                <div class="text-sm text-slate-400">Stock level</div>
                            </div>
                            <div class="glass-card p-4 rounded-lg">
                                <h4 class="font-semibold mb-2 text-slate-300">Fuel</h4>
                                <div class="text-2xl font-bold text-yellow-400">72%</div>
                                <div class="text-sm text-slate-400">Reserve capacity</div>
                            </div>
                            <div class="glass-card p-4 rounded-lg">
                                <h4 class="font-semibold mb-2 text-slate-300">Medical Supplies</h4>
                                <div class="text-2xl font-bold text-green-400">91%</div>
                                <div class="text-sm text-slate-400">Inventory level</div>
                            </div>
                            <div class="glass-card p-4 rounded-lg">
                                <h4 class="font-semibold mb-2 text-slate-300">Food & Water</h4>
                                <div class="text-2xl font-bold text-yellow-400">76%</div>
                                <div class="text-sm text-slate-400">30-day supply</div>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="font-semibold mb-4 text-slate-300">Supply Chain Status</h4>
                                <div class="space-y-3">
                                    <div class="p-3 glass-card rounded-lg">
                                        <div class="flex justify-between items-center mb-2">
                                            <span>Northern Command</span>
                                            <span class="text-green-400 font-semibold">94%</span>
                                        </div>
                                        <div class="w-full bg-slate-700 rounded-full h-2">
                                            <div class="bg-green-400 h-2 rounded-full" style="width: 94%"></div>
                                        </div>
                                    </div>
                                    <div class="p-3 glass-card rounded-lg">
                                        <div class="flex justify-between items-center mb-2">
                                            <span>Eastern Command</span>
                                            <span class="text-yellow-400 font-semibold">76%</span>
                                        </div>
                                        <div class="w-full bg-slate-700 rounded-full h-2">
                                            <div class="bg-yellow-400 h-2 rounded-full" style="width: 76%"></div>
                                        </div>
                                    </div>
                                    <div class="p-3 glass-card rounded-lg">
                                        <div class="flex justify-between items-center mb-2">
                                            <span>Western Command</span>
                                            <span class="text-red-400 font-semibold">58%</span>
                                        </div>
                                        <div class="w-full bg-slate-700 rounded-full h-2">
                                            <div class="bg-red-400 h-2 rounded-full" style="width: 58%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <h4 class="font-semibold mb-4 text-slate-300">Critical Supply Issues</h4>
                                <div class="space-y-3">
                                    <div class="p-3 bg-red-500/10 rounded-lg border border-red-500/20">
                                        <div class="font-medium text-red-400">Western Command - Fuel Shortage</div>
                                        <div class="text-sm text-slate-400">Only 12 days supply remaining</div>
                                        <div class="text-xs text-slate-500 mt-1">Emergency resupply en route</div>
                                    </div>
                                    <div class="p-3 bg-yellow-500/10 rounded-lg border border-yellow-500/20">
                                        <div class="font-medium text-yellow-400">Eastern Command - Ammunition</div>
                                        <div class="text-sm text-slate-400">Below optimal levels for Operation Helang</div>
                                        <div class="text-xs text-slate-500 mt-1">Delivery scheduled Dec 18</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `
                }
            };
            
            const data = drillThroughData[type] || {
                title: 'Details',
                content: '<p class="text-slate-300">Detailed information for ' + type + ' would be displayed here.</p>'
            };
            
            title.textContent = data.title;
            content.innerHTML = data.content;
            modal.classList.remove('hidden');
        }

        function showUnitDetails(commandZone) {
            const modal = document.getElementById('detail-modal');
            const title = document.getElementById('modal-title');
            const content = document.getElementById('modal-content');
            
            const unitData = {
                'Northern Command': {
                    readiness: '94%',
                    units: 12,
                    personnel: 2847,
                    status: 'Ready',
                    color: 'green'
                },
                'Eastern Command': {
                    readiness: '76%',
                    units: 8,
                    personnel: 1923,
                    status: 'At Risk',
                    color: 'yellow'
                },
                'Western Command': {
                    readiness: '68%',
                    units: 10,
                    personnel: 2156,
                    status: 'Critical',
                    color: 'red'
                }
            };
            
            const data = unitData[commandZone] || unitData['Northern Command'];
            
            title.textContent = commandZone + ' - Unit Details';
            content.innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                    <div class="glass-card p-4 rounded-lg text-center">
                        <div class="text-3xl font-bold text-${data.color}-400">${data.units}</div>
                        <div class="text-sm text-slate-400">Active Units</div>
                    </div>
                    <div class="glass-card p-4 rounded-lg text-center">
                        <div class="text-3xl font-bold text-${data.color}-400">${data.readiness}</div>
                        <div class="text-sm text-slate-400">Avg Readiness</div>
                    </div>
                    <div class="glass-card p-4 rounded-lg text-center">
                        <div class="text-3xl font-bold text-blue-400">${data.personnel.toLocaleString()}</div>
                        <div class="text-sm text-slate-400">Personnel</div>
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-semibold mb-4 text-slate-300">Unit Breakdown</h4>
                        <div class="space-y-3">
                            <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                                <span>1st Infantry Battalion</span>
                                <span class="text-green-400 font-semibold">98%</span>
                            </div>
                            <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                                <span>2nd Armored Division</span>
                                <span class="text-green-400 font-semibold">92%</span>
                            </div>
                            <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                                <span>Support Company Alpha</span>
                                <span class="text-yellow-400 font-semibold">85%</span>
                            </div>
                            <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                                <span>Engineering Corps</span>
                                <span class="text-green-400 font-semibold">89%</span>
                            </div>
                        </div>
                    </div>
                    <div>
                        <h4 class="font-semibold mb-4 text-slate-300">Readiness Factors</h4>
                        <div class="space-y-4">
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-sm">Personnel</span>
                                    <span class="text-green-400 font-semibold">94%</span>
                                </div>
                                <div class="w-full bg-slate-700 rounded-full h-2">
                                    <div class="bg-green-400 h-2 rounded-full" style="width: 94%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-sm">Equipment</span>
                                    <span class="text-yellow-400 font-semibold">78%</span>
                                </div>
                                <div class="w-full bg-slate-700 rounded-full h-2">
                                    <div class="bg-yellow-400 h-2 rounded-full" style="width: 78%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-sm">Training</span>
                                    <span class="text-green-400 font-semibold">92%</span>
                                </div>
                                <div class="w-full bg-slate-700 rounded-full h-2">
                                    <div class="bg-green-400 h-2 rounded-full" style="width: 92%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-sm">Supply</span>
                                    <span class="text-yellow-400 font-semibold">81%</span>
                                </div>
                                <div class="w-full bg-slate-700 rounded-full h-2">
                                    <div class="bg-yellow-400 h-2 rounded-full" style="width: 81%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            modal.classList.remove('hidden');
        }

        function showMissionDetails(missionName) {
            const modal = document.getElementById('detail-modal');
            const title = document.getElementById('modal-title');
            const content = document.getElementById('modal-content');
            
            const missionData = {
                'Operation Taming Sari': {
                    status: 'Ready for Deployment',
                    command: 'Northern Command',
                    readiness: 94,
                    color: 'green',
                    personnel: 98,
                    equipment: 92,
                    logistics: 89,
                    limiting: 'None - Mission ready'
                },
                'Operation Helang': {
                    status: 'At Risk - Equipment Issues',
                    command: 'Eastern Command',
                    readiness: 76,
                    color: 'yellow',
                    personnel: 89,
                    equipment: 68,
                    logistics: 71,
                    limiting: 'Equipment readiness below threshold'
                },
                'Operation Wau': {
                    status: 'Critical - Multiple Gaps',
                    command: 'Western Command',
                    readiness: 68,
                    color: 'red',
                    personnel: 65,
                    equipment: 58,
                    logistics: 61,
                    limiting: 'Personnel and supply shortages'
                }
            };
            
            const data = missionData[missionName] || missionData['Operation Taming Sari'];
            
            title.textContent = missionName + ' - Mission Readiness Analysis';
            content.innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div class="glass-card p-6 rounded-lg">
                        <h4 class="font-semibold mb-3 text-slate-300">Mission Status</h4>
                        <div class="text-xl font-bold text-${data.color}-400 mb-2">${data.status}</div>
                        <div class="text-sm text-slate-400">Overall Readiness: ${data.readiness}%</div>
                    </div>
                    <div class="glass-card p-6 rounded-lg">
                        <h4 class="font-semibold mb-3 text-slate-300">Assigned Command</h4>
                        <div class="text-xl font-bold text-blue-400 mb-2">${data.command}</div>
                        <div class="text-sm text-slate-400">Primary operational unit</div>
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-semibold mb-4 text-slate-300">Detailed Readiness Breakdown</h4>
                        <div class="space-y-4">
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <span>Personnel Readiness</span>
                                    <span class="text-${data.personnel >= 85 ? 'green' : data.personnel >= 70 ? 'yellow' : 'red'}-400 font-semibold">${data.personnel}%</span>
                                </div>
                                <div class="w-full bg-slate-700 rounded-full h-3">
                                    <div class="bg-${data.personnel >= 85 ? 'green' : data.personnel >= 70 ? 'yellow' : 'red'}-400 h-3 rounded-full transition-all duration-500" style="width: ${data.personnel}%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <span>Equipment Readiness</span>
                                    <span class="text-${data.equipment >= 85 ? 'green' : data.equipment >= 70 ? 'yellow' : 'red'}-400 font-semibold">${data.equipment}%</span>
                                </div>
                                <div class="w-full bg-slate-700 rounded-full h-3">
                                    <div class="bg-${data.equipment >= 85 ? 'green' : data.equipment >= 70 ? 'yellow' : 'red'}-400 h-3 rounded-full transition-all duration-500" style="width: ${data.equipment}%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <span>Logistics Readiness</span>
                                    <span class="text-${data.logistics >= 85 ? 'green' : data.logistics >= 70 ? 'yellow' : 'red'}-400 font-semibold">${data.logistics}%</span>
                                </div>
                                <div class="w-full bg-slate-700 rounded-full h-3">
                                    <div class="bg-${data.logistics >= 85 ? 'green' : data.logistics >= 70 ? 'yellow' : 'red'}-400 h-3 rounded-full transition-all duration-500" style="width: ${data.logistics}%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <h4 class="font-semibold mb-4 text-slate-300">Mission Analysis</h4>
                        <div class="space-y-4">
                            <div class="p-4 glass-card rounded-lg">
                                <div class="font-medium text-slate-300 mb-2">Limiting Factors</div>
                                <div class="text-sm text-${data.color}-400">${data.limiting}</div>
                            </div>
                            <div class="p-4 glass-card rounded-lg">
                                <div class="font-medium text-slate-300 mb-2">Risk Assessment</div>
                                <div class="text-sm text-slate-400">
                                    ${data.readiness >= 85 ? 'Low risk - Mission can proceed as planned' : 
                                      data.readiness >= 70 ? 'Medium risk - Address equipment issues before deployment' : 
                                      'High risk - Significant gaps require immediate attention'}
                                </div>
                            </div>
                            <div class="p-4 glass-card rounded-lg">
                                <div class="font-medium text-slate-300 mb-2">Recommended Actions</div>
                                <div class="text-sm text-slate-400">
                                    ${data.readiness >= 85 ? 'Continue mission preparation and final checks' : 
                                      data.readiness >= 70 ? 'Prioritize equipment maintenance and supply replenishment' : 
                                      'Delay mission until critical gaps are addressed'}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            modal.classList.remove('hidden');
        }

        function triggerAction(actionType) {
            const actions = {
                'equipment': 'Equipment reallocation workflow initiated. Redistributing critical assets from high-ready to at-risk units.',
                'training': 'Training schedule optimization started. Prioritizing mission-critical skills for upcoming operations.',
                'supply': 'Emergency supply dispatch authorized. Critical supplies and fuel en route to Western Command.',
                'personnel': 'Personnel transfer request submitted. Reassigning specialists to fill critical capability gaps.'
            };
            
            const message = actions[actionType] || 'Action initiated successfully.';
            
            // Show temporary notification
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 glass-card p-4 rounded-lg z-50 max-w-sm';
            notification.innerHTML = `
                <div class="flex items-start space-x-3">
                    <div class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                        <span class="text-white text-sm">✓</span>
                    </div>
                    <div>
                        <div class="font-medium text-white mb-1">Action Initiated</div>
                        <div class="text-sm text-slate-300">${message}</div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }

        function closeModal() {
            document.getElementById('detail-modal').classList.add('hidden');
        }

        // Decision Support Functions
        function showActionDetails(actionType) {
            const modal = document.getElementById('detail-modal');
            const title = document.getElementById('modal-title');
            const content = document.getElementById('modal-content');
            
            const actionData = {
                'equipment-reallocation': {
                    title: 'Equipment Reallocation Workflow',
                    content: `
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div class="p-4 bg-red-500/10 rounded-lg border border-red-500/20">
                                <h4 class="font-semibold text-red-400 mb-3">Current Situation</h4>
                                <div class="space-y-2 text-sm text-slate-300">
                                    <div>• Western Command: 45% equipment operational</div>
                                    <div>• 127 vehicles require immediate maintenance</div>
                                    <div>• Operation Wau at risk of 2-3 week delay</div>
                                    <div>• Critical mission window: 72 hours</div>
                                </div>
                            </div>
                            <div class="p-4 bg-green-500/10 rounded-lg border border-green-500/20">
                                <h4 class="font-semibold text-green-400 mb-3">Reallocation Plan</h4>
                                <div class="space-y-2 text-sm text-slate-300">
                                    <div>• Transfer 15 vehicles from Northern Command</div>
                                    <div>• Deploy emergency maintenance teams</div>
                                    <div>• Establish temporary supply line</div>
                                    <div>• Expected resolution: 5-7 days</div>
                                </div>
                            </div>
                        </div>
                        <div class="p-4 glass-card rounded-lg mb-6">
                            <h4 class="font-semibold text-white mb-3">Impact Analysis</h4>
                            <div class="grid grid-cols-3 gap-4 text-center">
                                <div>
                                    <div class="text-2xl font-bold text-green-400">85%</div>
                                    <div class="text-xs text-slate-400">Success Probability</div>
                                </div>
                                <div>
                                    <div class="text-2xl font-bold text-yellow-400">$2.3M</div>
                                    <div class="text-xs text-slate-400">Cost Estimate</div>
                                </div>
                                <div>
                                    <div class="text-2xl font-bold text-blue-400">5-7</div>
                                    <div class="text-xs text-slate-400">Days to Resolution</div>
                                </div>
                            </div>
                        </div>
                        <div class="flex space-x-3">
                            <button onclick="triggerAction('equipment')" class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors">
                                Initiate Reallocation
                            </button>
                            <button onclick="closeModal()" class="px-4 py-2 bg-slate-600 hover:bg-slate-700 text-white rounded-lg transition-colors">
                                Review Later
                            </button>
                        </div>
                    `
                },
                'training-optimization': {
                    title: 'Training Optimization Plan',
                    content: `
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div class="p-4 bg-yellow-500/10 rounded-lg border border-yellow-500/20">
                                <h4 class="font-semibold text-yellow-400 mb-3">Current Situation</h4>
                                <div class="space-y-2 text-sm text-slate-300">
                                    <div>• Northern Command: 96% training capacity utilization</div>
                                    <div>• Eastern Command: 78% specialist qualification rate</div>
                                    <div>• Skill gap in technical systems operation</div>
                                    <div>• Underutilized training infrastructure</div>
                                </div>
                            </div>
                            <div class="p-4 bg-blue-500/10 rounded-lg border border-blue-500/20">
                                <h4 class="font-semibold text-blue-400 mb-3">Optimization Plan</h4>
                                <div class="space-y-2 text-sm text-slate-300">
                                    <div>• Share Northern Command training facilities</div>
                                    <div>• Cross-train 45 Eastern Command specialists</div>
                                    <div>• Implement knowledge transfer program</div>
                                    <div>• Projected 8% overall readiness improvement</div>
                                </div>
                            </div>
                        </div>
                        <div class="p-4 glass-card rounded-lg mb-6">
                            <h4 class="font-semibold text-white mb-3">Expected Outcomes</h4>
                            <div class="space-y-3">
                                <div class="flex justify-between items-center">
                                    <span class="text-slate-300">Eastern Command Readiness</span>
                                    <span class="text-green-400 font-semibold">76% → 84%</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-slate-300">Overall Command Readiness</span>
                                    <span class="text-green-400 font-semibold">78% → 86%</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-slate-300">Implementation Timeline</span>
                                    <span class="text-blue-400 font-semibold">2 weeks</span>
                                </div>
                            </div>
                        </div>
                        <div class="flex space-x-3">
                            <button onclick="triggerAction('training')" class="px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg transition-colors">
                                Start Optimization
                            </button>
                            <button onclick="closeModal()" class="px-4 py-2 bg-slate-600 hover:bg-slate-700 text-white rounded-lg transition-colors">
                                Schedule Later
                            </button>
                        </div>
                    `
                },
                'supply-resilience': {
                    title: 'Supply Chain Resilience Strategy',
                    content: `
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div class="p-4 bg-blue-500/10 rounded-lg border border-blue-500/20">
                                <h4 class="font-semibold text-blue-400 mb-3">Current Vulnerabilities</h4>
                                <div class="space-y-2 text-sm text-slate-300">
                                    <div>• Centralized supply depot model</div>
                                    <div>• Single points of failure in logistics chain</div>
                                    <div>• Limited redundancy in critical supplies</div>
                                    <div>• Extended resupply times to remote commands</div>
                                </div>
                            </div>
                            <div class="p-4 bg-green-500/10 rounded-lg border border-green-500/20">
                                <h4 class="font-semibold text-green-400 mb-3">Distributed Model Benefits</h4>
                                <div class="space-y-2 text-sm text-slate-300">
                                    <div>• Regional supply caches reduce risk</div>
                                    <div>• Faster response to supply shortages</div>
                                    <div>• Improved operational independence</div>
                                    <div>• Enhanced mission readiness resilience</div>
                                </div>
                            </div>
                        </div>
                        <div class="p-4 glass-card rounded-lg mb-6">
                            <h4 class="font-semibold text-white mb-3">Implementation Roadmap</h4>
                            <div class="space-y-4">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white text-sm font-bold">1</div>
                                    <div>
                                        <div class="font-medium text-white">Phase 1: Assessment & Planning</div>
                                        <div class="text-sm text-slate-400">Analyze current supply flows and identify optimal cache locations</div>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white text-sm font-bold">2</div>
                                    <div>
                                        <div class="font-medium text-white">Phase 2: Infrastructure Development</div>
                                        <div class="text-sm text-slate-400">Establish regional supply caches and distribution networks</div>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white text-sm font-bold">3</div>
                                    <div>
                                        <div class="font-medium text-white">Phase 3: System Integration</div>
                                        <div class="text-sm text-slate-400">Implement automated inventory management and predictive resupply</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="flex space-x-3">
                            <button onclick="triggerAction('supply')" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors">
                                Begin Planning
                            </button>
                            <button onclick="closeModal()" class="px-4 py-2 bg-slate-600 hover:bg-slate-700 text-white rounded-lg transition-colors">
                                Review Strategy
                            </button>
                        </div>
                    `
                },
                'personnel-redistribution': {
                    title: 'Personnel Redistribution Plan',
                    content: `
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div class="p-4 bg-green-500/10 rounded-lg border border-green-500/20">
                                <h4 class="font-semibold text-green-400 mb-3">Personnel Gaps Analysis</h4>
                                <div class="space-y-2 text-sm text-slate-300">
                                    <div>• Western Command: Short 127 technical specialists</div>
                                    <div>• Eastern Command: Need 23 additional officers</div>
                                    <div>• Critical skills shortage in communications</div>
                                    <div>• Maintenance personnel below optimal levels</div>
                                </div>
                            </div>
                            <div class="p-4 bg-blue-500/10 rounded-lg border border-blue-500/20">
                                <h4 class="font-semibold text-blue-400 mb-3">Redistribution Strategy</h4>
                                <div class="space-y-2 text-sm text-slate-300">
                                    <div>• Transfer 45 specialists from Northern Command</div>
                                    <div>• Promote qualified personnel to officer roles</div>
                                    <div>• Accelerate training pipeline for critical skills</div>
                                    <div>• Implement cross-training programs</div>
                                </div>
                            </div>
                        </div>
                        <div class="p-4 glass-card rounded-lg mb-6">
                            <h4 class="font-semibold text-white mb-3">Impact Assessment</h4>
                            <div class="space-y-3">
                                <div class="flex justify-between items-center">
                                    <span class="text-slate-300">Western Command Personnel Readiness</span>
                                    <span class="text-green-400 font-semibold">65% → 78%</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-slate-300">Eastern Command Personnel Readiness</span>
                                    <span class="text-green-400 font-semibold">78% → 85%</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-slate-300">Implementation Timeline</span>
                                    <span class="text-blue-400 font-semibold">3-4 weeks</span>
                                </div>
                            </div>
                        </div>
                        <div class="flex space-x-3">
                            <button onclick="triggerAction('personnel')" class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors">
                                Initiate Transfers
                            </button>
                            <button onclick="closeModal()" class="px-4 py-2 bg-slate-600 hover:bg-slate-700 text-white rounded-lg transition-colors">
                                Review Plan
                            </button>
                        </div>
                    `
                },
                'emergency-response': {
                    title: 'Emergency Response Protocol',
                    content: `
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div class="p-4 bg-purple-500/10 rounded-lg border border-purple-500/20">
                                <h4 class="font-semibold text-purple-400 mb-3">Emergency Situation</h4>
                                <div class="space-y-2 text-sm text-slate-300">
                                    <div>• Western Command: Critical fuel shortage</div>
                                    <div>• Only 12 days supply remaining</div>
                                    <div>• Operation Wau mission at risk</div>
                                    <div>• Immediate action required within 18 hours</div>
                                </div>
                            </div>
                            <div class="p-4 bg-green-500/10 rounded-lg border border-green-500/20">
                                <h4 class="font-semibold text-green-400 mb-3">Emergency Response Plan</h4>
                                <div class="space-y-2 text-sm text-slate-300">
                                    <div>• Deploy emergency fuel convoy immediately</div>
                                    <div>• Activate reserve supply depot</div>
                                    <div>• Establish priority supply corridor</div>
                                    <div>• ETA: 18 hours to Western Command</div>
                                </div>
                            </div>
                        </div>
                        <div class="p-4 glass-card rounded-lg mb-6">
                            <h4 class="font-semibold text-white mb-3">Resource Allocation</h4>
                            <div class="space-y-3">
                                <div class="flex justify-between items-center">
                                    <span class="text-slate-300">Fuel Quantity</span>
                                    <span class="text-green-400 font-semibold">45,000 gallons</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-slate-300">Transport Vehicles</span>
                                    <span class="text-blue-400 font-semibold">8 fuel tankers</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-slate-300">Escort Detail</span>
                                    <span class="text-yellow-400 font-semibold">2 security teams</span>
                                </div>
                            </div>
                        </div>
                        <div class="flex space-x-3">
                            <button onclick="triggerAction('supply')" class="px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors">
                                Activate Emergency Response
                            </button>
                            <button onclick="closeModal()" class="px-4 py-2 bg-slate-600 hover:bg-slate-700 text-white rounded-lg transition-colors">
                                Cancel
                            </button>
                        </div>
                    `
                },
                'timeline-adjustment': {
                    title: 'Mission Timeline Adjustment',
                    content: `
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div class="p-4 bg-orange-500/10 rounded-lg border border-orange-500/20">
                                <h4 class="font-semibold text-orange-400 mb-3">Current Timeline Issues</h4>
                                <div class="space-y-2 text-sm text-slate-300">
                                    <div>• Operation Wau: 2-3 week delay likely</div>
                                    <div>• Operation Helang: Equipment dependency</div>
                                    <div>• Training Exercise Alpha: Weather concerns</div>
                                    <div>• Resource conflicts between missions</div>
                                </div>
                            </div>
                            <div class="p-4 bg-blue-500/10 rounded-lg border border-blue-500/20">
                                <h4 class="font-semibold text-blue-400 mb-3">Optimization Recommendations</h4>
                                <div class="space-y-2 text-sm text-slate-300">
                                    <div>• Delay Operation Wau by 2 weeks</div>
                                    <div>• Accelerate Operation Helang preparation</div>
                                    <div>• Reschedule Training Exercise for better weather</div>
                                    <div>• Optimize resource allocation sequence</div>
                                </div>
                            </div>
                        </div>
                        <div class="p-4 glass-card rounded-lg mb-6">
                            <h4 class="font-semibold text-white mb-3">Adjusted Timeline Impact</h4>
                            <div class="space-y-3">
                                <div class="flex justify-between items-center">
                                    <span class="text-slate-300">Mission Success Probability</span>
                                    <span class="text-green-400 font-semibold">68% → 89%</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-slate-300">Resource Utilization Efficiency</span>
                                    <span class="text-green-400 font-semibold">74% → 91%</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-slate-300">Overall Risk Level</span>
                                    <span class="text-green-400 font-semibold">High → Medium</span>
                                </div>
                            </div>
                        </div>
                        <div class="flex space-x-3">
                            <button onclick="triggerAction('timeline')" class="px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg transition-colors">
                                Approve Adjustments
                            </button>
                            <button onclick="closeModal()" class="px-4 py-2 bg-slate-600 hover:bg-slate-700 text-white rounded-lg transition-colors">
                                Review Timeline
                            </button>
                        </div>
                    `
                }
            };
            
            const data = actionData[actionType] || {
                title: 'Action Details',
                content: '<p class="text-slate-300">Detailed action information would be displayed here.</p>'
            };
            
            title.textContent = data.title;
            content.innerHTML = data.content;
            modal.classList.remove('hidden');
        }

        function showDecisionDetails(type) {
            const modal = document.getElementById('detail-modal');
            const title = document.getElementById('modal-title');
            const content = document.getElementById('modal-content');
            
            const decisionData = {
                'critical': {
                    title: 'Critical Action Required - Equipment Shortage Analysis',
                    content: `
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div class="p-4 bg-red-500/10 rounded-lg border border-red-500/20">
                                <h4 class="font-semibold text-red-400 mb-3">Situation Assessment</h4>
                                <div class="space-y-2 text-sm text-slate-300">
                                    <div>• Western Command: 45% equipment operational</div>
                                    <div>• 127 vehicles require immediate maintenance</div>
                                    <div>• Operation Wau at risk of 2-3 week delay</div>
                                    <div>• Critical mission window: 72 hours</div>
                                </div>
                            </div>
                            <div class="p-4 bg-green-500/10 rounded-lg border border-green-500/20">
                                <h4 class="font-semibold text-green-400 mb-3">Recommended Solution</h4>
                                <div class="space-y-2 text-sm text-slate-300">
                                    <div>• Reallocate 15 vehicles from Northern Command</div>
                                    <div>• Deploy emergency maintenance teams</div>
                                    <div>• Establish temporary supply line</div>
                                    <div>• Expected resolution: 5-7 days</div>
                                </div>
                            </div>
                        </div>
                        <div class="p-4 glass-card rounded-lg">
                            <h4 class="font-semibold text-white mb-3">Impact Analysis</h4>
                            <div class="grid grid-cols-3 gap-4 text-center">
                                <div>
                                    <div class="text-2xl font-bold text-green-400">85%</div>
                                    <div class="text-xs text-slate-400">Success Probability</div>
                                </div>
                                <div>
                                    <div class="text-2xl font-bold text-yellow-400">$2.3M</div>
                                    <div class="text-xs text-slate-400">Cost Estimate</div>
                                </div>
                                <div>
                                    <div class="text-2xl font-bold text-blue-400">5-7</div>
                                    <div class="text-xs text-slate-400">Days to Resolution</div>
                                </div>
                            </div>
                        </div>
                    `
                },
                'optimization': {
                    title: 'Optimization Opportunity - Cross-Command Training',
                    content: `
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div class="p-4 bg-yellow-500/10 rounded-lg border border-yellow-500/20">
                                <h4 class="font-semibold text-yellow-400 mb-3">Current Situation</h4>
                                <div class="space-y-2 text-sm text-slate-300">
                                    <div>• Northern Command: 96% training capacity utilization</div>
                                    <div>• Eastern Command: 78% specialist qualification rate</div>
                                    <div>• Skill gap in technical systems operation</div>
                                    <div>• Underutilized training infrastructure</div>
                                </div>
                            </div>
                            <div class="p-4 bg-blue-500/10 rounded-lg border border-blue-500/20">
                                <h4 class="font-semibold text-blue-400 mb-3">Optimization Plan</h4>
                                <div class="space-y-2 text-sm text-slate-300">
                                    <div>• Share Northern Command training facilities</div>
                                    <div>• Cross-train 45 Eastern Command specialists</div>
                                    <div>• Implement knowledge transfer program</div>
                                    <div>• Projected 8% overall readiness improvement</div>
                                </div>
                            </div>
                        </div>
                        <div class="p-4 glass-card rounded-lg">
                            <h4 class="font-semibold text-white mb-3">Expected Outcomes</h4>
                            <div class="space-y-3">
                                <div class="flex justify-between items-center">
                                    <span class="text-slate-300">Eastern Command Readiness</span>
                                    <span class="text-green-400 font-semibold">76% → 84%</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-slate-300">Overall Command Readiness</span>
                                    <span class="text-green-400 font-semibold">78% → 86%</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-slate-300">Implementation Timeline</span>
                                    <span class="text-blue-400 font-semibold">2 weeks</span>
                                </div>
                            </div>
                        </div>
                    `
                },
                'strategic': {
                    title: 'Strategic Insight - Supply Chain Resilience',
                    content: `
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div class="p-4 bg-blue-500/10 rounded-lg border border-blue-500/20">
                                <h4 class="font-semibold text-blue-400 mb-3">Current Vulnerabilities</h4>
                                <div class="space-y-2 text-sm text-slate-300">
                                    <div>• Centralized supply depot model</div>
                                    <div>• Single points of failure in logistics chain</div>
                                    <div>• Limited redundancy in critical supplies</div>
                                    <div>• Extended resupply times to remote commands</div>
                                </div>
                            </div>
                            <div class="p-4 bg-green-500/10 rounded-lg border border-green-500/20">
                                <h4 class="font-semibold text-green-400 mb-3">Distributed Model Benefits</h4>
                                <div class="space-y-2 text-sm text-slate-300">
                                    <div>• Regional supply caches reduce risk</div>
                                    <div>• Faster response to supply shortages</div>
                                    <div>• Improved operational independence</div>
                                    <div>• Enhanced mission readiness resilience</div>
                                </div>
                            </div>
                        </div>
                        <div class="p-4 glass-card rounded-lg">
                            <h4 class="font-semibold text-white mb-3">Implementation Roadmap</h4>
                            <div class="space-y-4">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white text-sm font-bold">1</div>
                                    <div>
                                        <div class="font-medium text-white">Phase 1: Assessment & Planning</div>
                                        <div class="text-sm text-slate-400">Analyze current supply flows and identify optimal cache locations</div>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white text-sm font-bold">2</div>
                                    <div>
                                        <div class="font-medium text-white">Phase 2: Infrastructure Development</div>
                                        <div class="text-sm text-slate-400">Establish regional supply caches and distribution networks</div>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white text-sm font-bold">3</div>
                                    <div>
                                        <div class="font-medium text-white">Phase 3: System Integration</div>
                                        <div class="text-sm text-slate-400">Implement automated inventory management and predictive resupply</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `
                }
            };
            
            const data = decisionData[type] || {
                title: 'Decision Support Details',
                content: '<p class="text-slate-300">Detailed analysis would be displayed here.</p>'
            };
            
            title.textContent = data.title;
            content.innerHTML = data.content;
            modal.classList.remove('hidden');
        }

        function switchScenario(scenario) {
            // Hide all scenario contents
            document.querySelectorAll('.scenario-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // Remove active class from all scenario tabs
            document.querySelectorAll('.scenario-tab').forEach(tab => {
                tab.classList.remove('active', 'bg-slate-700', 'text-white');
                tab.classList.add('text-slate-400');
            });
            
            // Show selected scenario content
            document.getElementById('scenario-' + scenario).classList.remove('hidden');
            
            // Add active class to clicked tab
            event.target.classList.add('active', 'bg-slate-700', 'text-white');
            event.target.classList.remove('text-slate-400');
        }

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeCharts();
        });

        // Personnel Details Drill-through Function
        function showPersonnelDetails(commandZone, fillRate) {
            const modal = document.getElementById('detail-modal');
            const title = document.getElementById('modal-title');
            const content = document.getElementById('modal-content');
            
            const personnelData = {
                'Northern Command': {
                    actual: 4987,
                    required: 5200,
                    fillRate: 96,
                    status: 'Optimal',
                    color: 'green',
                    units: [
                        { name: '1st Infantry Battalion', personnel: 847, required: 900, rate: 94 },
                        { name: '2nd Armored Division', personnel: 1234, required: 1300, rate: 95 },
                        { name: 'Support Company Alpha', personnel: 456, required: 500, rate: 91 },
                        { name: 'Engineering Corps', personnel: 678, required: 700, rate: 97 },
                        { name: 'Communications Unit', personnel: 234, required: 250, rate: 94 },
                        { name: 'Medical Battalion', personnel: 345, required: 350, rate: 99 },
                        { name: 'Logistics Company', personnel: 567, required: 600, rate: 95 },
                        { name: 'Intelligence Unit', personnel: 123, required: 150, rate: 82 },
                        { name: 'Military Police', personnel: 189, required: 200, rate: 95 },
                        { name: 'Aviation Support', personnel: 314, required: 250, rate: 126 }
                    ]
                },
                'Eastern Command': {
                    actual: 4234,
                    required: 4800,
                    fillRate: 88,
                    status: 'Understaffed',
                    color: 'yellow',
                    units: [
                        { name: '3rd Infantry Battalion', personnel: 723, required: 850, rate: 85 },
                        { name: '1st Mechanized Division', personnel: 1045, required: 1200, rate: 87 },
                        { name: 'Support Company Bravo', personnel: 389, required: 450, rate: 86 },
                        { name: 'Cyber Operations Unit', personnel: 156, required: 200, rate: 78 },
                        { name: 'Artillery Battalion', personnel: 567, required: 650, rate: 87 },
                        { name: 'Special Operations', personnel: 234, required: 300, rate: 78 },
                        { name: 'Reconnaissance Unit', personnel: 178, required: 200, rate: 89 },
                        { name: 'Signal Corps', personnel: 289, required: 350, rate: 83 },
                        { name: 'Transportation Unit', personnel: 345, required: 400, rate: 86 },
                        { name: 'Maintenance Company', personnel: 308, required: 200, rate: 154 }
                    ]
                },
                'Southern Command': {
                    actual: 5834,
                    required: 6100,
                    fillRate: 96,
                    status: 'Optimal',
                    color: 'green',
                    units: [
                        { name: '4th Infantry Battalion', personnel: 987, required: 1000, rate: 99 },
                        { name: '3rd Armored Division', personnel: 1456, required: 1500, rate: 97 },
                        { name: 'Support Company Charlie', personnel: 567, required: 600, rate: 95 },
                        { name: 'Naval Liaison Unit', personnel: 234, required: 250, rate: 94 },
                        { name: 'Air Defense Battalion', personnel: 678, required: 700, rate: 97 },
                        { name: 'Combat Engineers', personnel: 445, required: 450, rate: 99 },
                        { name: 'Field Artillery', personnel: 589, required: 600, rate: 98 },
                        { name: 'Intelligence Battalion', personnel: 267, required: 300, rate: 89 },
                        { name: 'Logistics Battalion', personnel: 723, required: 750, rate: 96 },
                        { name: 'Medical Corps', personnel: 388, required: 350, rate: 111 }
                    ]
                },
                'Western Command': {
                    actual: 3789,
                    required: 4500,
                    fillRate: 84,
                    status: 'Critical Shortage',
                    color: 'red',
                    units: [
                        { name: '5th Infantry Battalion', personnel: 634, required: 800, rate: 79 },
                        { name: '2nd Mechanized Division', personnel: 856, required: 1100, rate: 78 },
                        { name: 'Support Company Delta', personnel: 298, required: 400, rate: 75 },
                        { name: 'Mountain Operations', personnel: 445, required: 550, rate: 81 },
                        { name: 'Border Security Unit', personnel: 367, required: 450, rate: 82 },
                        { name: 'Technical Maintenance', personnel: 234, required: 350, rate: 67 },
                        { name: 'Communications Hub', personnel: 178, required: 250, rate: 71 },
                        { name: 'Supply Depot', personnel: 289, required: 350, rate: 83 },
                        { name: 'Training Command', personnel: 267, required: 300, rate: 89 },
                        { name: 'Emergency Response', personnel: 221, required: 250, rate: 88 }
                    ]
                },
                'Central Command': {
                    actual: 4556,
                    required: 4900,
                    fillRate: 93,
                    status: 'Good',
                    color: 'green',
                    units: [
                        { name: 'Headquarters Battalion', personnel: 567, required: 600, rate: 95 },
                        { name: '1st Strategic Division', personnel: 1234, required: 1300, rate: 95 },
                        { name: 'Support Company Echo', personnel: 445, required: 500, rate: 89 },
                        { name: 'Intelligence Center', personnel: 334, required: 400, rate: 84 },
                        { name: 'Communications Center', personnel: 289, required: 300, rate: 96 },
                        { name: 'Strategic Planning', personnel: 178, required: 200, rate: 89 },
                        { name: 'Joint Operations', personnel: 267, required: 300, rate: 89 },
                        { name: 'Logistics Hub', personnel: 556, required: 600, rate: 93 },
                        { name: 'Training Center', personnel: 378, required: 400, rate: 95 },
                        { name: 'Reserve Forces', personnel: 308, required: 300, rate: 103 }
                    ]
                }
            };
            
            const data = personnelData[commandZone] || personnelData['Northern Command'];
            
            title.textContent = commandZone + ' - Personnel Distribution Analysis';
            content.innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                    <div class="glass-card p-4 rounded-lg text-center">
                        <div class="text-2xl font-bold text-${data.color}-400">${data.actual.toLocaleString()}</div>
                        <div class="text-sm text-slate-400">Actual Personnel</div>
                    </div>
                    <div class="glass-card p-4 rounded-lg text-center">
                        <div class="text-2xl font-bold text-slate-300">${data.required.toLocaleString()}</div>
                        <div class="text-sm text-slate-400">Required Personnel</div>
                    </div>
                    <div class="glass-card p-4 rounded-lg text-center">
                        <div class="text-2xl font-bold text-${data.color}-400">${data.fillRate}%</div>
                        <div class="text-sm text-slate-400">Fill Rate</div>
                    </div>
                    <div class="glass-card p-4 rounded-lg text-center">
                        <div class="text-lg font-bold text-${data.color}-400">${data.status}</div>
                        <div class="text-sm text-slate-400">Status</div>
                    </div>
                </div>
                
                <div class="mb-6">
                    <h4 class="font-semibold mb-4 text-slate-300">Unit-by-Unit Personnel Breakdown</h4>
                    <div class="relative h-96 glass-card p-4 rounded-lg">
                        <!-- Y-axis labels -->
                        <div class="absolute left-0 top-4 bottom-16 w-40 flex flex-col justify-around text-xs text-slate-300 pr-2">
                            ${data.units.map(unit => `
                                <div class="text-right leading-tight">${unit.name}</div>
                            `).join('')}
                        </div>
                        
                        <!-- Chart area -->
                        <div class="absolute left-40 top-4 right-4 bottom-16">
                            <!-- Grid lines -->
                            <div class="absolute inset-0">
                                <div class="absolute left-0 top-0 bottom-0 w-px border-l border-slate-600/40"></div>
                                <div class="absolute left-1/5 top-0 bottom-0 w-px border-l border-slate-600/20"></div>
                                <div class="absolute left-2/5 top-0 bottom-0 w-px border-l border-slate-600/20"></div>
                                <div class="absolute left-3/5 top-0 bottom-0 w-px border-l border-slate-600/20"></div>
                                <div class="absolute left-4/5 top-0 bottom-0 w-px border-l border-slate-600/20"></div>
                                <div class="absolute right-0 top-0 bottom-0 w-px border-l border-slate-600/40"></div>
                            </div>
                            
                            <!-- Bars container -->
                            <div class="absolute inset-0 flex flex-col justify-around py-1">
                                ${data.units.map((unit, index) => `
                                    <div class="flex items-center h-7 relative group cursor-pointer">
                                        <div class="relative w-full h-5 bg-slate-700/30 rounded-lg overflow-hidden group-hover:bg-slate-600/40 transition-all">
                                            <!-- Required personnel background bar -->
                                            <div class="absolute left-0 top-0 h-full bg-slate-600 rounded-lg" style="width: ${(unit.required / Math.max(...data.units.map(u => u.required))) * 100}%;"></div>
                                            <!-- Actual personnel bar -->
                                            <div class="absolute left-0 top-0 h-full bg-gradient-to-r from-${unit.rate >= 95 ? 'green' : unit.rate >= 85 ? 'yellow' : 'red'}-500 to-${unit.rate >= 95 ? 'green' : unit.rate >= 85 ? 'yellow' : 'red'}-400 rounded-lg transition-all duration-1000 group-hover:from-${unit.rate >= 95 ? 'green' : unit.rate >= 85 ? 'yellow' : 'red'}-400 group-hover:to-${unit.rate >= 95 ? 'green' : unit.rate >= 85 ? 'yellow' : 'red'}-300" style="width: ${(unit.personnel / Math.max(...data.units.map(u => u.required))) * 100}%;"></div>
                                        </div>
                                        <!-- Data labels -->
                                        <div class="absolute right-2 top-0 h-full flex items-center text-xs text-white font-medium">
                                            ${unit.personnel} / ${unit.required} (${unit.rate}%)
                                        </div>
                                        <!-- Fill rate indicator -->
                                        <div class="absolute left-1 top-0 h-full flex items-center">
                                            <div class="w-2 h-2 bg-${unit.rate >= 95 ? 'green' : unit.rate >= 85 ? 'yellow' : 'red'}-400 rounded-full"></div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        
                        <!-- X-axis labels -->
                        <div class="absolute left-40 bottom-0 right-4 h-16 flex items-center justify-between text-xs text-slate-400">
                            <span>0</span>
                            <span>${Math.round(Math.max(...data.units.map(u => u.required)) * 0.2).toLocaleString()}</span>
                            <span>${Math.round(Math.max(...data.units.map(u => u.required)) * 0.4).toLocaleString()}</span>
                            <span>${Math.round(Math.max(...data.units.map(u => u.required)) * 0.6).toLocaleString()}</span>
                            <span>${Math.round(Math.max(...data.units.map(u => u.required)) * 0.8).toLocaleString()}</span>
                            <span>${Math.max(...data.units.map(u => u.required)).toLocaleString()}</span>
                        </div>
                        
                        <!-- Legend -->
                        <div class="absolute top-0 right-4 flex items-center space-x-4 text-xs">
                            <div class="flex items-center space-x-2">
                                <div class="w-3 h-3 bg-slate-600 rounded"></div>
                                <span class="text-slate-400">Required</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-3 h-3 bg-green-500 rounded"></div>
                                <span class="text-slate-400">Actual</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="glass-card p-4 rounded-lg">
                        <h4 class="font-semibold mb-3 text-slate-300">Personnel Categories</h4>
                        <div class="space-y-3">
                            <div class="flex justify-between items-center">
                                <span class="text-slate-300">Officers</span>
                                <span class="text-${data.color}-400 font-semibold">${Math.round(data.actual * 0.15).toLocaleString()}</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-slate-300">NCOs</span>
                                <span class="text-${data.color}-400 font-semibold">${Math.round(data.actual * 0.25).toLocaleString()}</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-slate-300">Enlisted</span>
                                <span class="text-${data.color}-400 font-semibold">${Math.round(data.actual * 0.60).toLocaleString()}</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="glass-card p-4 rounded-lg">
                        <h4 class="font-semibold mb-3 text-slate-300">Readiness Factors</h4>
                        <div class="space-y-3">
                            <div class="flex justify-between items-center">
                                <span class="text-slate-300">Deployment Ready</span>
                                <span class="text-green-400 font-semibold">${Math.round(data.actual * 0.87).toLocaleString()}</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-slate-300">In Training</span>
                                <span class="text-blue-400 font-semibold">${Math.round(data.actual * 0.08).toLocaleString()}</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-slate-300">Medical Hold</span>
                                <span class="text-yellow-400 font-semibold">${Math.round(data.actual * 0.05).toLocaleString()}</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                ${data.fillRate < 90 ? `
                <div class="mt-6 p-4 bg-${data.color === 'red' ? 'red' : 'yellow'}-500/10 rounded-lg border border-${data.color === 'red' ? 'red' : 'yellow'}-500/20">
                    <h4 class="font-semibold text-${data.color === 'red' ? 'red' : 'yellow'}-400 mb-2">Recommended Actions</h4>
                    <div class="text-sm text-slate-300">
                        ${data.fillRate < 85 ? 
                            '• Immediate personnel transfer from overstaffed commands<br>• Accelerate recruitment for critical specialties<br>• Consider temporary duty assignments<br>• Review mission priorities and timelines' :
                            '• Monitor recruitment pipeline<br>• Cross-train personnel in critical skills<br>• Optimize personnel allocation within command'
                        }
                    </div>
                </div>
                ` : ''}
            `;
            modal.classList.remove('hidden');
        }

        // Data point interaction for personnel trends chart
        function showDataPoint(month, activePersonnel, onLeave) {
            const total = activePersonnel + onLeave;
            const availabilityRate = ((activePersonnel / total) * 100).toFixed(1);
            const leaveRate = ((onLeave / total) * 100).toFixed(1);
            
            // Show temporary tooltip
            const tooltip = document.createElement('div');
            tooltip.className = 'fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 glass-card p-4 rounded-lg z-50 max-w-sm';
            tooltip.innerHTML = `
                <div class="text-center">
                    <div class="text-lg font-bold text-white mb-2">${month} 2024</div>
                    <div class="grid grid-cols-2 gap-4 text-sm">
                        <div>
                            <div class="text-blue-400 font-semibold">${activePersonnel.toLocaleString()}</div>
                            <div class="text-slate-400">Active Personnel</div>
                        </div>
                        <div>
                            <div class="text-orange-400 font-semibold">${onLeave.toLocaleString()}</div>
                            <div class="text-slate-400">On Leave</div>
                        </div>
                    </div>
                    <div class="mt-3 pt-3 border-t border-slate-600">
                        <div class="flex justify-between text-xs">
                            <span class="text-slate-400">Availability Rate:</span>
                            <span class="text-green-400 font-semibold">${availabilityRate}%</span>
                        </div>
                        <div class="flex justify-between text-xs mt-1">
                            <span class="text-slate-400">Leave Rate:</span>
                            <span class="text-orange-400 font-semibold">${leaveRate}%</span>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(tooltip);
            
            setTimeout(() => {
                tooltip.remove();
            }, 3000);
        }

        // Skill Details Function
        function showSkillDetails(skillCategory, percentage, personnel) {
            const modal = document.getElementById('detail-modal');
            const title = document.getElementById('modal-title');
            const content = document.getElementById('modal-content');
            
            const skillData = {
                'Combat Operations': {
                    color: 'blue',
                    description: 'Personnel trained in direct combat roles and tactical operations',
                    subcategories: [
                        { name: 'Infantry', count: 3570, percentage: 40, fillRate: 96 },
                        { name: 'Armor/Mechanized', count: 2225, percentage: 25, fillRate: 94 },
                        { name: 'Artillery', count: 1785, percentage: 20, fillRate: 98 },
                        { name: 'Special Forces', count: 892, percentage: 10, fillRate: 89 },
                        { name: 'Air Defense', count: 453, percentage: 5, fillRate: 92 }
                    ],
                    commands: [
                        { name: 'Northern Command', count: 2677, fillRate: 98 },
                        { name: 'Southern Command', count: 2500, fillRate: 96 },
                        { name: 'Eastern Command', count: 1870, fillRate: 89 },
                        { name: 'Western Command', count: 1423, fillRate: 85 },
                        { name: 'Central Command', count: 455, fillRate: 91 }
                    ]
                },
                'Technical/Engineering': {
                    color: 'green',
                    description: 'Personnel with technical expertise and engineering capabilities',
                    subcategories: [
                        { name: 'Vehicle Maintenance', count: 2142, percentage: 30, fillRate: 71 },
                        { name: 'Communications/IT', count: 1785, percentage: 25, fillRate: 82 },
                        { name: 'Combat Engineering', count: 1428, percentage: 20, fillRate: 85 },
                        { name: 'Electronics/Avionics', count: 1071, percentage: 15, fillRate: 78 },
                        { name: 'Construction/Utilities', count: 714, percentage: 10, fillRate: 88 }
                    ],
                    commands: [
                        { name: 'Central Command', count: 2142, fillRate: 89 },
                        { name: 'Northern Command', count: 1785, fillRate: 85 },
                        { name: 'Southern Command', count: 1428, fillRate: 87 },
                        { name: 'Eastern Command', count: 1071, fillRate: 78 },
                        { name: 'Western Command', count: 714, fillRate: 67 }
                    ]
                },
                'Medical/Support': {
                    color: 'purple',
                    description: 'Personnel providing medical care and essential support services',
                    subcategories: [
                        { name: 'Combat Medics', count: 1377, percentage: 30, fillRate: 94 },
                        { name: 'Medical Officers', count: 918, percentage: 20, fillRate: 67 },
                        { name: 'Nurses/Technicians', count: 918, percentage: 20, fillRate: 89 },
                        { name: 'Chaplain Services', count: 459, percentage: 10, fillRate: 91 },
                        { name: 'Legal/HR Support', count: 918, percentage: 20, fillRate: 88 }
                    ],
                    commands: [
                        { name: 'Southern Command', count: 1377, fillRate: 96 },
                        { name: 'Northern Command', count: 1148, fillRate: 94 },
                        { name: 'Central Command', count: 918, fillRate: 91 },
                        { name: 'Eastern Command', count: 689, fillRate: 85 },
                        { name: 'Western Command', count: 458, fillRate: 78 }
                    ]
                },
                'Intelligence/Cyber': {
                    color: 'orange',
                    description: 'Personnel specializing in intelligence gathering and cyber operations',
                    subcategories: [
                        { name: 'Intelligence Analysts', count: 1224, percentage: 40, fillRate: 78 },
                        { name: 'Cyber Security', count: 918, percentage: 30, fillRate: 58 },
                        { name: 'Surveillance/Recon', count: 612, percentage: 20, fillRate: 89 },
                        { name: 'Electronic Warfare', count: 306, percentage: 10, fillRate: 72 }
                    ],
                    commands: [
                        { name: 'Central Command', count: 1224, fillRate: 84 },
                        { name: 'Northern Command', count: 612, fillRate: 89 },
                        { name: 'Eastern Command', count: 612, fillRate: 78 },
                        { name: 'Southern Command', count: 459, fillRate: 82 },
                        { name: 'Western Command', count: 153, fillRate: 61 }
                    ]
                },
                'Logistics/Admin': {
                    color: 'yellow',
                    description: 'Personnel managing supply chains and administrative functions',
                    subcategories: [
                        { name: 'Supply/Procurement', count: 714, percentage: 40, fillRate: 91 },
                        { name: 'Transportation', count: 535, percentage: 30, fillRate: 88 },
                        { name: 'Finance/Accounting', count: 357, percentage: 20, fillRate: 94 },
                        { name: 'Administration', count: 179, percentage: 10, fillRate: 96 }
                    ],
                    commands: [
                        { name: 'Central Command', count: 714, fillRate: 95 },
                        { name: 'Southern Command', count: 357, fillRate: 91 },
                        { name: 'Northern Command', count: 357, fillRate: 89 },
                        { name: 'Eastern Command', count: 268, fillRate: 86 },
                        { name: 'Western Command', count: 89, fillRate: 78 }
                    ]
                }
            };
            
            const data = skillData[skillCategory];
            
            title.textContent = skillCategory + ' - Detailed Analysis';
            content.innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                    <div class="glass-card p-4 rounded-lg text-center">
                        <div class="text-3xl font-bold text-${data.color}-400">${personnel.toLocaleString()}</div>
                        <div class="text-sm text-slate-400">Total Personnel</div>
                    </div>
                    <div class="glass-card p-4 rounded-lg text-center">
                        <div class="text-3xl font-bold text-${data.color}-400">${percentage}%</div>
                        <div class="text-sm text-slate-400">of Total Force</div>
                    </div>
                    <div class="glass-card p-4 rounded-lg text-center">
                        <div class="text-3xl font-bold text-${data.color}-400">${data.subcategories.reduce((sum, cat) => sum + cat.fillRate, 0) / data.subcategories.length}%</div>
                        <div class="text-sm text-slate-400">Avg Fill Rate</div>
                    </div>
                </div>
                
                <div class="mb-6">
                    <p class="text-slate-300 text-sm mb-4">${data.description}</p>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                    <!-- Skill Subcategories Bar Chart -->
                    <div>
                        <h4 class="font-semibold mb-4 text-slate-300">Skill Subcategories</h4>
                        <div class="relative h-80 glass-card p-4 rounded-lg">
                            <!-- Y-axis labels -->
                            <div class="absolute left-0 top-4 bottom-16 w-32 flex flex-col justify-around text-xs text-slate-300 pr-2">
                                ${data.subcategories.map(sub => `
                                    <div class="text-right">${sub.name}</div>
                                `).join('')}
                            </div>
                            
                            <!-- Chart area -->
                            <div class="absolute left-32 top-4 right-4 bottom-16">
                                <!-- Grid lines -->
                                <div class="absolute inset-0">
                                    <div class="absolute left-0 top-0 bottom-0 w-px border-l border-slate-600/40"></div>
                                    <div class="absolute left-1/4 top-0 bottom-0 w-px border-l border-slate-600/20"></div>
                                    <div class="absolute left-2/4 top-0 bottom-0 w-px border-l border-slate-600/20"></div>
                                    <div class="absolute left-3/4 top-0 bottom-0 w-px border-l border-slate-600/20"></div>
                                    <div class="absolute right-0 top-0 bottom-0 w-px border-l border-slate-600/40"></div>
                                </div>
                                
                                <!-- Bars container -->
                                <div class="absolute inset-0 flex flex-col justify-around py-2">
                                    ${data.subcategories.map((sub, index) => `
                                        <div class="flex items-center h-8 relative group cursor-pointer">
                                            <div class="relative w-full h-6 bg-slate-700/30 rounded-lg overflow-hidden group-hover:bg-slate-600/40 transition-all">
                                                <!-- Personnel count bar -->
                                                <div class="absolute left-0 top-0 h-full bg-gradient-to-r from-${data.color}-500 to-${data.color}-400 rounded-lg transition-all duration-1000 group-hover:from-${data.color}-400 group-hover:to-${data.color}-300" style="width: ${(sub.count / Math.max(...data.subcategories.map(s => s.count))) * 100}%;"></div>
                                            </div>
                                            <!-- Data labels -->
                                            <div class="absolute right-2 top-0 h-full flex items-center text-xs text-white font-medium">
                                                ${sub.count.toLocaleString()} (${sub.fillRate}%)
                                            </div>
                                            <!-- Fill rate indicator -->
                                            <div class="absolute left-1 top-0 h-full flex items-center">
                                                <div class="w-2 h-2 bg-${sub.fillRate >= 85 ? 'green' : sub.fillRate >= 70 ? 'yellow' : 'red'}-400 rounded-full"></div>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                            
                            <!-- X-axis labels -->
                            <div class="absolute left-32 bottom-0 right-4 h-16 flex items-center justify-between text-xs text-slate-400">
                                <span>0</span>
                                <span>${Math.round(Math.max(...data.subcategories.map(s => s.count)) * 0.25).toLocaleString()}</span>
                                <span>${Math.round(Math.max(...data.subcategories.map(s => s.count)) * 0.5).toLocaleString()}</span>
                                <span>${Math.round(Math.max(...data.subcategories.map(s => s.count)) * 0.75).toLocaleString()}</span>
                                <span>${Math.max(...data.subcategories.map(s => s.count)).toLocaleString()}</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Distribution by Command Bar Chart -->
                    <div>
                        <h4 class="font-semibold mb-4 text-slate-300">Distribution by Command</h4>
                        <div class="relative h-80 glass-card p-4 rounded-lg">
                            <!-- Y-axis labels -->
                            <div class="absolute left-0 top-4 bottom-16 w-32 flex flex-col justify-around text-xs text-slate-300 pr-2">
                                ${data.commands.map(cmd => `
                                    <div class="text-right">${cmd.name.replace(' Command', '')}</div>
                                `).join('')}
                            </div>
                            
                            <!-- Chart area -->
                            <div class="absolute left-32 top-4 right-4 bottom-16">
                                <!-- Grid lines -->
                                <div class="absolute inset-0">
                                    <div class="absolute left-0 top-0 bottom-0 w-px border-l border-slate-600/40"></div>
                                    <div class="absolute left-1/4 top-0 bottom-0 w-px border-l border-slate-600/20"></div>
                                    <div class="absolute left-2/4 top-0 bottom-0 w-px border-l border-slate-600/20"></div>
                                    <div class="absolute left-3/4 top-0 bottom-0 w-px border-l border-slate-600/20"></div>
                                    <div class="absolute right-0 top-0 bottom-0 w-px border-l border-slate-600/40"></div>
                                </div>
                                
                                <!-- Bars container -->
                                <div class="absolute inset-0 flex flex-col justify-around py-2">
                                    ${data.commands.map((cmd, index) => `
                                        <div class="flex items-center h-8 relative group cursor-pointer">
                                            <div class="relative w-full h-6 bg-slate-700/30 rounded-lg overflow-hidden group-hover:bg-slate-600/40 transition-all">
                                                <!-- Personnel count bar -->
                                                <div class="absolute left-0 top-0 h-full bg-gradient-to-r from-${data.color}-500 to-${data.color}-400 rounded-lg transition-all duration-1000 group-hover:from-${data.color}-400 group-hover:to-${data.color}-300" style="width: ${(cmd.count / Math.max(...data.commands.map(c => c.count))) * 100}%;"></div>
                                            </div>
                                            <!-- Data labels -->
                                            <div class="absolute right-2 top-0 h-full flex items-center text-xs text-white font-medium">
                                                ${cmd.count.toLocaleString()} (${cmd.fillRate}%)
                                            </div>
                                            <!-- Fill rate indicator -->
                                            <div class="absolute left-1 top-0 h-full flex items-center">
                                                <div class="w-2 h-2 bg-${cmd.fillRate >= 85 ? 'green' : cmd.fillRate >= 70 ? 'yellow' : 'red'}-400 rounded-full"></div>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                            
                            <!-- X-axis labels -->
                            <div class="absolute left-32 bottom-0 right-4 h-16 flex items-center justify-between text-xs text-slate-400">
                                <span>0</span>
                                <span>${Math.round(Math.max(...data.commands.map(c => c.count)) * 0.25).toLocaleString()}</span>
                                <span>${Math.round(Math.max(...data.commands.map(c => c.count)) * 0.5).toLocaleString()}</span>
                                <span>${Math.round(Math.max(...data.commands.map(c => c.count)) * 0.75).toLocaleString()}</span>
                                <span>${Math.max(...data.commands.map(c => c.count)).toLocaleString()}</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="p-4 glass-card rounded-lg">
                    <h4 class="font-semibold mb-3 text-slate-300">Key Insights & Recommendations</h4>
                    <div class="text-sm text-slate-300 space-y-2">
                        ${skillCategory === 'Combat Operations' ? `
                            <div>• Strong overall readiness with 96% average fill rate across combat roles</div>
                            <div>• Special Forces slightly understaffed but within acceptable limits</div>
                            <div>• Consider cross-training between infantry and mechanized units</div>
                            <div>• Maintain current recruitment and training tempo</div>
                        ` : skillCategory === 'Technical/Engineering' ? `
                            <div>• Critical shortage in vehicle maintenance personnel (71% filled)</div>
                            <div>• Communications/IT skills gap affecting operational readiness</div>
                            <div>• Recommend accelerated technical training programs</div>
                            <div>• Consider contractor support for specialized maintenance</div>
                        ` : skillCategory === 'Medical/Support' ? `
                            <div>• Medical officer shortage (67% filled) is a critical concern</div>
                            <div>• Combat medics well-staffed and deployment ready</div>
                            <div>• Recommend medical officer recruitment incentives</div>
                            <div>• Consider partnerships with civilian medical institutions</div>
                        ` : skillCategory === 'Intelligence/Cyber' ? `
                            <div>• Severe cyber security specialist shortage (58% filled)</div>
                            <div>• Intelligence analysis capabilities adequate but could be improved</div>
                            <div>• Urgent need for cyber warfare capability enhancement</div>
                            <div>• Recommend specialized recruitment and retention bonuses</div>
                        ` : `
                            <div>• Logistics and administrative functions well-staffed overall</div>
                            <div>• Supply chain management capabilities strong</div>
                            <div>• Transportation units performing above expectations</div>
                            <div>• Continue current staffing levels and procedures</div>
                        `}
                    </div>
                </div>
            `;
            modal.classList.remove('hidden');
        }

        // Attrition Point Interaction Function
        function showAttritionPoint(month, rate) {
            const isForecast = month.includes('(F)');
            const cleanMonth = month.replace(' (F)', '');
            
            // Show temporary tooltip
            const tooltip = document.createElement('div');
            tooltip.className = 'fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 glass-card p-4 rounded-lg z-50 max-w-sm';
            tooltip.innerHTML = `
                <div class="text-center">
                    <div class="text-lg font-bold text-white mb-2">${cleanMonth} ${isForecast ? '2025 (Forecast)' : '2024'}</div>
                    <div class="text-3xl font-bold text-${isForecast ? 'orange' : 'red'}-400 mb-2">${rate}%</div>
                    <div class="text-sm text-slate-400 mb-3">Monthly Attrition Rate</div>
                    
                    ${isForecast ? `
                        <div class="p-3 bg-orange-500/10 rounded-lg border border-orange-500/20">
                            <div class="text-xs text-slate-300">
                                <div class="font-medium text-orange-400 mb-1">Forecast Details</div>
                                <div>• Based on historical trends</div>
                                <div>• Seasonal adjustment applied</div>
                                <div>• Confidence: ±0.${Math.floor(Math.random() * 5) + 3}%</div>
                            </div>
                        </div>
                    ` : `
                        <div class="grid grid-cols-2 gap-3 text-xs">
                            <div class="text-center">
                                <div class="text-slate-400">Personnel Lost</div>
                                <div class="text-white font-semibold">${Math.round(25400 * (rate/100)).toLocaleString()}</div>
                            </div>
                            <div class="text-center">
                                <div class="text-slate-400">vs Target (3.9%)</div>
                                <div class="text-${rate > 3.9 ? 'red' : 'green'}-400 font-semibold">${rate > 3.9 ? '+' : ''}${(rate - 3.9).toFixed(1)}%</div>
                            </div>
                        </div>
                    `}
                </div>
            `;
            
            document.body.appendChild(tooltip);
            
            setTimeout(() => {
                tooltip.remove();
            }, 4000);
        }

        // Operation Skill Matching Function
        function showOperationSkillMatch(operationName) {
            const modal = document.getElementById('detail-modal');
            const title = document.getElementById('modal-title');
            const content = document.getElementById('modal-content');
            
            const operationData = {
                'Operation Taming Sari': {
                    command: 'Northern Command',
                    status: 'Ready for Deployment',
                    color: 'green',
                    totalRequired: 1250,
                    totalMatched: 1198,
                    matchRate: 96,
                    skillRequirements: [
                        { skill: 'Combat Operations', required: 450, available: 441, matched: 98, personnel: ['Sgt. Ahmad Rahman', 'Cpl. Lim Wei Ming', 'Lt. Sarah Abdullah', 'Pvt. Kumar Selvam'] },
                        { skill: 'Technical/Engineering', required: 280, available: 263, matched: 94, personnel: ['Sgt. Raj Patel', 'Cpl. Chen Li Hua', 'Pvt. Mohd Faiz', 'Spc. Tan Mei Lin'] },
                        { skill: 'Medical/Support', required: 200, available: 192, matched: 96, personnel: ['Medic Hassan Ali', 'Nurse Priya Devi', 'Dr. Wong Kar Wai', 'Cpl. Siti Nurhaliza'] },
                        { skill: 'Intelligence/Cyber', required: 180, available: 166, matched: 92, personnel: ['Analyst David Lim', 'Sgt. Fatimah Zahra', 'Cpl. Raj Kumar', 'Spc. Amy Tan'] },
                        { skill: 'Logistics/Admin', required: 140, available: 136, matched: 97, personnel: ['Sgt. Ali Hassan', 'Cpl. Lee Siew Choo', 'Pvt. Ravi Shankar', 'Spc. Nurul Ain'] }
                    ],
                    readinessFactors: {
                        personnel: 98,
                        equipment: 92,
                        training: 96,
                        logistics: 94
                    }
                },
                'Operation Helang': {
                    command: 'Eastern Command',
                    status: 'Skill Gaps Identified',
                    color: 'yellow',
                    totalRequired: 980,
                    totalMatched: 764,
                    matchRate: 78,
                    skillRequirements: [
                        { skill: 'Combat Operations', required: 350, available: 298, matched: 85, personnel: ['Lt. Azman Ismail', 'Sgt. Jennifer Loh', 'Cpl. Muthu Raman', 'Pvt. Zainab Omar'] },
                        { skill: 'Technical/Engineering', required: 220, available: 150, matched: 68, personnel: ['Sgt. Peter Tan', 'Cpl. Aisha Rahman', 'Pvt. Kumar Singh', 'Spc. Lisa Wong'] },
                        { skill: 'Medical/Support', required: 160, available: 125, matched: 78, personnel: ['Medic Raj Patel', 'Nurse Siti Aishah', 'Dr. Lim Boon Heng', 'Cpl. Devi Priya'] },
                        { skill: 'Intelligence/Cyber', required: 140, available: 115, matched: 82, personnel: ['Analyst Sarah Lim', 'Sgt. Ahmad Fauzi', 'Cpl. Mei Ling', 'Spc. Ravi Kumar'] },
                        { skill: 'Logistics/Admin', required: 110, available: 84, matched: 76, personnel: ['Sgt. Hassan Omar', 'Cpl. Tan Ai Ling', 'Pvt. Suresh Kumar', 'Spc. Fatimah Ali'] }
                    ],
                    readinessFactors: {
                        personnel: 85,
                        equipment: 68,
                        training: 82,
                        logistics: 76
                    }
                },
                'Operation Wau': {
                    command: 'Western Command',
                    status: 'Critical Shortages',
                    color: 'red',
                    totalRequired: 1450,
                    totalMatched: 986,
                    matchRate: 68,
                    skillRequirements: [
                        { skill: 'Combat Operations', required: 520, available: 374, matched: 72, personnel: ['Lt. Rahman Ali', 'Sgt. Lim Chee Kong', 'Cpl. Priya Sharma', 'Pvt. Ahmad Zaki'] },
                        { skill: 'Technical/Engineering', required: 340, available: 197, matched: 58, personnel: ['Sgt. Kumar Patel', 'Cpl. Siti Zaleha', 'Pvt. David Wong', 'Spc. Raj Singh'] },
                        { skill: 'Medical/Support', required: 240, available: 156, matched: 65, personnel: ['Medic Ali Hassan', 'Nurse Jennifer Tan', 'Dr. Muthu Kumar', 'Cpl. Aisha Omar'] },
                        { skill: 'Intelligence/Cyber', required: 200, available: 122, matched: 61, personnel: ['Analyst Peter Lim', 'Sgt. Zainab Ali', 'Cpl. Raj Devi', 'Spc. Sarah Wong'] },
                        { skill: 'Logistics/Admin', required: 150, available: 104, matched: 69, personnel: ['Sgt. Hassan Kumar', 'Cpl. Mei Ling Tan', 'Pvt. Ahmad Rahman', 'Spc. Priya Lim'] }
                    ],
                    readinessFactors: {
                        personnel: 72,
                        equipment: 58,
                        training: 65,
                        logistics: 69
                    }
                }
            };
            
            const data = operationData[operationName];
            
            title.textContent = operationName + ' - Personnel Skill Matching Analysis';
            content.innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                    <div class="glass-card p-4 rounded-lg text-center">
                        <div class="text-2xl font-bold text-${data.color}-400">${data.totalRequired.toLocaleString()}</div>
                        <div class="text-sm text-slate-400">Personnel Required</div>
                    </div>
                    <div class="glass-card p-4 rounded-lg text-center">
                        <div class="text-2xl font-bold text-${data.color}-400">${data.totalMatched.toLocaleString()}</div>
                        <div class="text-sm text-slate-400">Personnel Matched</div>
                    </div>
                    <div class="glass-card p-4 rounded-lg text-center">
                        <div class="text-2xl font-bold text-${data.color}-400">${data.matchRate}%</div>
                        <div class="text-sm text-slate-400">Match Rate</div>
                    </div>
                    <div class="glass-card p-4 rounded-lg text-center">
                        <div class="text-lg font-bold text-${data.color}-400">${data.status}</div>
                        <div class="text-sm text-slate-400">${data.command}</div>
                    </div>
                </div>
                
                <!-- Skill Requirements Breakdown -->
                <div class="mb-8">
                    <h3 class="text-lg font-semibold text-white mb-4">Detailed Skill Requirements & Personnel Assignment</h3>
                    <div class="space-y-4">
                        ${data.skillRequirements.map((skill, index) => `
                            <div class="glass-card p-6 rounded-lg">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-4 h-4 bg-${skill.matched >= 85 ? 'green' : skill.matched >= 70 ? 'yellow' : 'red'}-500 rounded-full"></div>
                                        <h4 class="text-lg font-semibold text-white">${skill.skill}</h4>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-${skill.matched >= 85 ? 'green' : skill.matched >= 70 ? 'yellow' : 'red'}-400 font-bold text-xl">${skill.matched}%</div>
                                        <div class="text-xs text-slate-400">Match Rate</div>
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                                    <div class="text-center p-3 bg-slate-800/30 rounded-lg">
                                        <div class="text-lg font-bold text-white">${skill.required}</div>
                                        <div class="text-xs text-slate-400">Required</div>
                                    </div>
                                    <div class="text-center p-3 bg-slate-800/30 rounded-lg">
                                        <div class="text-lg font-bold text-${skill.matched >= 85 ? 'green' : skill.matched >= 70 ? 'yellow' : 'red'}-400">${skill.available}</div>
                                        <div class="text-xs text-slate-400">Available</div>
                                    </div>
                                    <div class="text-center p-3 bg-slate-800/30 rounded-lg">
                                        <div class="text-lg font-bold text-${skill.available >= skill.required ? 'green' : 'red'}-400">${skill.required - skill.available}</div>
                                        <div class="text-xs text-slate-400">${skill.available >= skill.required ? 'Surplus' : 'Shortage'}</div>
                                    </div>
                                </div>
                                
                                <!-- Progress Bar -->
                                <div class="mb-4">
                                    <div class="w-full bg-slate-700 rounded-full h-3">
                                        <div class="bg-${skill.matched >= 85 ? 'green' : skill.matched >= 70 ? 'yellow' : 'red'}-500 h-3 rounded-full transition-all duration-1000" style="width: ${skill.matched}%"></div>
                                    </div>
                                </div>
                                
                                <!-- Assigned Personnel Sample -->
                                <div>
                                    <h5 class="font-medium text-slate-300 mb-2">Key Personnel Assigned:</h5>
                                    <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
                                        ${skill.personnel.map(person => `
                                            <div class="p-2 bg-slate-800/50 rounded text-xs text-slate-300 text-center">
                                                ${person}
                                            </div>
                                        `).join('')}
                                    </div>
                                    ${skill.available < skill.required ? `
                                        <div class="mt-3 p-3 bg-${skill.matched >= 70 ? 'yellow' : 'red'}-500/10 rounded-lg border border-${skill.matched >= 70 ? 'yellow' : 'red'}-500/20">
                                            <div class="text-${skill.matched >= 70 ? 'yellow' : 'red'}-400 font-medium text-sm">
                                                ${skill.matched >= 70 ? '⚠️ Shortage Alert' : '🚨 Critical Shortage'}
                                            </div>
                                            <div class="text-slate-300 text-xs mt-1">
                                                Need ${skill.required - skill.available} additional ${skill.skill.toLowerCase()} personnel. 
                                                ${skill.matched >= 70 ? 'Consider cross-training or temporary assignment.' : 'Immediate personnel transfer required.'}
                                            </div>
                                        </div>
                                    ` : ''}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <!-- Overall Readiness Assessment -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div class="glass-card p-6 rounded-lg">
                        <h3 class="text-lg font-semibold text-white mb-4">Readiness Assessment</h3>
                        <div class="space-y-4">
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-slate-300">Personnel Readiness</span>
                                    <span class="text-${data.readinessFactors.personnel >= 85 ? 'green' : data.readinessFactors.personnel >= 70 ? 'yellow' : 'red'}-400 font-semibold">${data.readinessFactors.personnel}%</span>
                                </div>
                                <div class="w-full bg-slate-700 rounded-full h-2">
                                    <div class="bg-${data.readinessFactors.personnel >= 85 ? 'green' : data.readinessFactors.personnel >= 70 ? 'yellow' : 'red'}-400 h-2 rounded-full transition-all duration-500" style="width: ${data.readinessFactors.personnel}%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-slate-300">Equipment Readiness</span>
                                    <span class="text-${data.readinessFactors.equipment >= 85 ? 'green' : data.readinessFactors.equipment >= 70 ? 'yellow' : 'red'}-400 font-semibold">${data.readinessFactors.equipment}%</span>
                                </div>
                                <div class="w-full bg-slate-700 rounded-full h-2">
                                    <div class="bg-${data.readinessFactors.equipment >= 85 ? 'green' : data.readinessFactors.equipment >= 70 ? 'yellow' : 'red'}-400 h-2 rounded-full transition-all duration-500" style="width: ${data.readinessFactors.equipment}%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-slate-300">Training Readiness</span>
                                    <span class="text-${data.readinessFactors.training >= 85 ? 'green' : data.readinessFactors.training >= 70 ? 'yellow' : 'red'}-400 font-semibold">${data.readinessFactors.training}%</span>
                                </div>
                                <div class="w-full bg-slate-700 rounded-full h-2">
                                    <div class="bg-${data.readinessFactors.training >= 85 ? 'green' : data.readinessFactors.training >= 70 ? 'yellow' : 'red'}-400 h-2 rounded-full transition-all duration-500" style="width: ${data.readinessFactors.training}%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-slate-300">Logistics Readiness</span>
                                    <span class="text-${data.readinessFactors.logistics >= 85 ? 'green' : data.readinessFactors.logistics >= 70 ? 'yellow' : 'red'}-400 font-semibold">${data.readinessFactors.logistics}%</span>
                                </div>
                                <div class="w-full bg-slate-700 rounded-full h-2">
                                    <div class="bg-${data.readinessFactors.logistics >= 85 ? 'green' : data.readinessFactors.logistics >= 70 ? 'yellow' : 'red'}-400 h-2 rounded-full transition-all duration-500" style="width: ${data.readinessFactors.logistics}%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="glass-card p-6 rounded-lg">
                        <h3 class="text-lg font-semibold text-white mb-4">Recommended Actions</h3>
                        <div class="space-y-3">
                            ${data.matchRate >= 90 ? `
                                <div class="p-3 bg-green-500/10 rounded-lg border border-green-500/20">
                                    <div class="font-medium text-green-400 text-sm mb-1">✅ Ready for Deployment</div>
                                    <div class="text-xs text-slate-300">Operation is fully staffed and ready to proceed as planned.</div>
                                </div>
                                <div class="p-3 bg-blue-500/10 rounded-lg border border-blue-500/20">
                                    <div class="font-medium text-blue-400 text-sm mb-1">📋 Final Preparations</div>
                                    <div class="text-xs text-slate-300">Conduct final briefings and equipment checks before deployment.</div>
                                </div>
                            ` : data.matchRate >= 75 ? `
                                <div class="p-3 bg-yellow-500/10 rounded-lg border border-yellow-500/20">
                                    <div class="font-medium text-yellow-400 text-sm mb-1">⚠️ Address Skill Gaps</div>
                                    <div class="text-xs text-slate-300">Transfer personnel from other commands or provide additional training.</div>
                                </div>
                                <div class="p-3 bg-blue-500/10 rounded-lg border border-blue-500/20">
                                    <div class="font-medium text-blue-400 text-sm mb-1">🔄 Personnel Reallocation</div>
                                    <div class="text-xs text-slate-300">Consider temporary assignments from Northern or Central Command.</div>
                                </div>
                            ` : `
                                <div class="p-3 bg-red-500/10 rounded-lg border border-red-500/20">
                                    <div class="font-medium text-red-400 text-sm mb-1">🚨 Critical Action Required</div>
                                    <div class="text-xs text-slate-300">Immediate personnel transfers and equipment reallocation needed.</div>
                                </div>
                                <div class="p-3 bg-orange-500/10 rounded-lg border border-orange-500/20">
                                    <div class="font-medium text-orange-400 text-sm mb-1">⏰ Timeline Adjustment</div>
                                    <div class="text-xs text-slate-300">Consider delaying operation until personnel gaps are addressed.</div>
                                </div>
                            `}
                        </div>
                    </div>
                </div>
                
                <!-- Action Buttons -->
                <div class="flex space-x-3">
                    ${data.matchRate >= 90 ? `
                        <button onclick="triggerAction('deploy')" class="px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors">
                            Approve Deployment
                        </button>
                    ` : data.matchRate >= 75 ? `
                        <button onclick="triggerAction('reassign')" class="px-6 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg transition-colors">
                            Initiate Personnel Transfer
                        </button>
                    ` : `
                        <button onclick="triggerAction('emergency')" class="px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors">
                            Emergency Reallocation
                        </button>
                    `}
                    <button onclick="closeModal()" class="px-6 py-2 bg-slate-600 hover:bg-slate-700 text-white rounded-lg transition-colors">
                        Close Analysis
                    </button>
                </div>
            `;
            modal.classList.remove('hidden');
        }

        // Fleet Details Function for Mobility Tab
        function showFleetDetails(type) {
            const modal = document.getElementById('detail-modal');
            const title = document.getElementById('modal-title');
            const content = document.getElementById('modal-content');
            
            const fleetData = {
                'availability': {
                    title: 'Fleet Availability Analysis',
                    current: '74%',
                    trend: '-2.1%',
                    color: 'yellow',
                    content: `
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                            <div class="glass-card p-4 rounded-lg text-center">
                                <div class="text-3xl font-bold text-yellow-400">74%</div>
                                <div class="text-sm text-slate-400">Current Availability</div>
                            </div>
                            <div class="glass-card p-4 rounded-lg text-center">
                                <div class="text-3xl font-bold text-red-400">127</div>
                                <div class="text-sm text-slate-400">Vehicles Down</div>
                            </div>
                            <div class="glass-card p-4 rounded-lg text-center">
                                <div class="text-3xl font-bold text-blue-400">489</div>
                                <div class="text-sm text-slate-400">Total Fleet Size</div>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="font-semibold mb-4 text-slate-300">Availability by Command</h4>
                                <div class="space-y-3">
                                    <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                                        <span>Northern Command</span>
                                        <span class="text-green-400 font-semibold">89%</span>
                                    </div>
                                    <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                                        <span>Eastern Command</span>
                                        <span class="text-yellow-400 font-semibold">78%</span>
                                    </div>
                                    <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                                        <span>Southern Command</span>
                                        <span class="text-green-400 font-semibold">85%</span>
                                    </div>
                                    <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                                        <span>Western Command</span>
                                        <span class="text-red-400 font-semibold">45%</span>
                                    </div>
                                    <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                                        <span>Central Command</span>
                                        <span class="text-green-400 font-semibold">92%</span>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <h4 class="font-semibold mb-4 text-slate-300">Critical Issues</h4>
                                <div class="space-y-3">
                                    <div class="p-3 bg-red-500/10 rounded-lg border border-red-500/20">
                                        <div class="font-medium text-red-400">Western Command Crisis</div>
                                        <div class="text-sm text-slate-400">67 vehicles down for maintenance</div>
                                    </div>
                                    <div class="p-3 bg-yellow-500/10 rounded-lg border border-yellow-500/20">
                                        <div class="font-medium text-yellow-400">Parts Shortage</div>
                                        <div class="text-sm text-slate-400">Critical components delayed</div>
                                    </div>
                                    <div class="p-3 bg-blue-500/10 rounded-lg border border-blue-500/20">
                                        <div class="font-medium text-blue-400">Maintenance Backlog</div>
                                        <div class="text-sm text-slate-400">Average repair time: 8.5 days</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `
                },
                'maintenance': {
                    title: 'Vehicles in Maintenance - Detailed Breakdown',
                    current: '127',
                    trend: '+15',
                    color: 'red',
                    content: `
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                            <div class="glass-card p-4 rounded-lg text-center">
                                <div class="text-2xl font-bold text-red-400">127</div>
                                <div class="text-sm text-slate-400">Total in Maintenance</div>
                            </div>
                            <div class="glass-card p-4 rounded-lg text-center">
                                <div class="text-2xl font-bold text-yellow-400">8.5</div>
                                <div class="text-sm text-slate-400">Avg Days in Shop</div>
                            </div>
                            <div class="glass-card p-4 rounded-lg text-center">
                                <div class="text-2xl font-bold text-blue-400">23</div>
                                <div class="text-sm text-slate-400">Awaiting Parts</div>
                            </div>
                            <div class="glass-card p-4 rounded-lg text-center">
                                <div class="text-2xl font-bold text-green-400">15</div>
                                <div class="text-sm text-slate-400">Completing Today</div>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="font-semibold mb-4 text-slate-300">Maintenance by Type</h4>
                                <div class="space-y-3">
                                    <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                                        <span>Engine Repairs</span>
                                        <span class="text-red-400 font-semibold">34 vehicles</span>
                                    </div>
                                    <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                                        <span>Transmission Issues</span>
                                        <span class="text-yellow-400 font-semibold">28 vehicles</span>
                                    </div>
                                    <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                                        <span>Electrical Systems</span>
                                        <span class="text-yellow-400 font-semibold">22 vehicles</span>
                                    </div>
                                    <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                                        <span>Routine Maintenance</span>
                                        <span class="text-green-400 font-semibold">43 vehicles</span>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <h4 class="font-semibold mb-4 text-slate-300">Priority Actions</h4>
                                <div class="space-y-3">
                                    <div class="p-3 bg-red-500/10 rounded-lg border border-red-500/20">
                                        <div class="font-medium text-red-400">Deploy Mobile Teams</div>
                                        <div class="text-sm text-slate-400">Send maintenance crews to Western Command</div>
                                    </div>
                                    <div class="p-3 bg-yellow-500/10 rounded-lg border border-yellow-500/20">
                                        <div class="font-medium text-yellow-400">Expedite Parts</div>
                                        <div class="text-sm text-slate-400">Rush critical component deliveries</div>
                                    </div>
                                    <div class="p-3 bg-blue-500/10 rounded-lg border border-blue-500/20">
                                        <div class="font-medium text-blue-400">Extend Hours</div>
                                        <div class="text-sm text-slate-400">24/7 maintenance operations</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `
                },
                'mtbf': {
                    title: 'Mean Time Between Failures Analysis',
                    current: '342 hours',
                    trend: '-23 hrs',
                    color: 'yellow',
                    content: `
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                            <div class="glass-card p-4 rounded-lg text-center">
                                <div class="text-3xl font-bold text-yellow-400">342</div>
                                <div class="text-sm text-slate-400">Current MTBF (hours)</div>
                            </div>
                            <div class="glass-card p-4 rounded-lg text-center">
                                <div class="text-3xl font-bold text-green-400">400</div>
                                <div class="text-sm text-slate-400">Target MTBF (hours)</div>
                            </div>
                            <div class="glass-card p-4 rounded-lg text-center">
                                <div class="text-3xl font-bold text-red-400">-14.5%</div>
                                <div class="text-sm text-slate-400">vs Target</div>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="font-semibold mb-4 text-slate-300">MTBF by Vehicle Type</h4>
                                <div class="space-y-3">
                                    <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                                        <span>Light Vehicles</span>
                                        <span class="text-green-400 font-semibold">456 hrs</span>
                                    </div>
                                    <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                                        <span>Heavy Trucks</span>
                                        <span class="text-yellow-400 font-semibold">298 hrs</span>
                                    </div>
                                    <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                                        <span>Armored Vehicles</span>
                                        <span class="text-red-400 font-semibold">234 hrs</span>
                                    </div>
                                    <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                                        <span>Specialized Equipment</span>
                                        <span class="text-yellow-400 font-semibold">387 hrs</span>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <h4 class="font-semibold mb-4 text-slate-300">Improvement Strategies</h4>
                                <div class="space-y-3">
                                    <div class="p-3 bg-green-500/10 rounded-lg border border-green-500/20">
                                        <div class="font-medium text-green-400">Preventive Maintenance</div>
                                        <div class="text-sm text-slate-400">Increase scheduled maintenance frequency</div>
                                    </div>
                                    <div class="p-3 bg-blue-500/10 rounded-lg border border-blue-500/20">
                                        <div class="font-medium text-blue-400">Operator Training</div>
                                        <div class="text-sm text-slate-400">Improve vehicle handling procedures</div>
                                    </div>
                                    <div class="p-3 bg-yellow-500/10 rounded-lg border border-yellow-500/20">
                                        <div class="font-medium text-yellow-400">Parts Quality</div>
                                        <div class="text-sm text-slate-400">Source higher-grade components</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `
                },
                'downtime': {
                    title: 'Predictive Downtime Risk Assessment',
                    current: '68%',
                    trend: '+12%',
                    color: 'red',
                    content: `
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                            <div class="glass-card p-4 rounded-lg text-center">
                                <div class="text-2xl font-bold text-red-400">68%</div>
                                <div class="text-sm text-slate-400">High Risk Vehicles</div>
                            </div>
                            <div class="glass-card p-4 rounded-lg text-center">
                                <div class="text-2xl font-bold text-orange-400">89</div>
                                <div class="text-sm text-slate-400">Vehicles at Risk</div>
                            </div>
                            <div class="glass-card p-4 rounded-lg text-center">
                                <div class="text-2xl font-bold text-yellow-400">12</div>
                                <div class="text-sm text-slate-400">Predicted Failures (7d)</div>
                            </div>
                            <div class="glass-card p-4 rounded-lg text-center">
                                <div class="text-2xl font-bold text-blue-400">94%</div>
                                <div class="text-sm text-slate-400">Prediction Accuracy</div>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="font-semibold mb-4 text-slate-300">Risk Factors</h4>
                                <div class="space-y-3">
                                    <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                                        <span>High Mileage</span>
                                        <span class="text-red-400 font-semibold">34 vehicles</span>
                                    </div>
                                    <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                                        <span>Overdue Maintenance</span>
                                        <span class="text-red-400 font-semibold">28 vehicles</span>
                                    </div>
                                    <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                                        <span>Component Age</span>
                                        <span class="text-yellow-400 font-semibold">19 vehicles</span>
                                    </div>
                                    <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                                        <span>Usage Pattern</span>
                                        <span class="text-yellow-400 font-semibold">8 vehicles</span>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <h4 class="font-semibold mb-4 text-slate-300">Immediate Actions</h4>
                                <div class="space-y-3">
                                    <div class="p-3 bg-red-500/10 rounded-lg border border-red-500/20">
                                        <div class="font-medium text-red-400">Immediate Inspection</div>
                                        <div class="text-sm text-slate-400">Inspect 34 high-risk vehicles today</div>
                                    </div>
                                    <div class="p-3 bg-orange-500/10 rounded-lg border border-orange-500/20">
                                        <div class="font-medium text-orange-400">Schedule Maintenance</div>
                                        <div class="text-sm text-slate-400">Book 28 overdue vehicles immediately</div>
                                    </div>
                                    <div class="p-3 bg-blue-500/10 rounded-lg border border-blue-500/20">
                                        <div class="font-medium text-blue-400">Monitor Closely</div>
                                        <div class="text-sm text-slate-400">Daily checks on 27 medium-risk vehicles</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `
                }
            };
            
            const data = fleetData[type] || {
                title: 'Fleet Details',
                content: '<p class="text-slate-300">Detailed fleet information would be displayed here.</p>'
            };
            
            title.textContent = data.title;
            content.innerHTML = data.content;
            modal.classList.remove('hidden');
        }
        
        // Drill-through function for pie chart segments
function showFleetTypeDetails(vehicleType, count, percentage) {
    const modal = document.getElementById('detail-modal');
    const title = document.getElementById('modal-title');
    const content = document.getElementById('modal-content');
    
    title.textContent = vehicleType + ' - Detailed Analysis';
    content.innerHTML = `
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
            <div class="glass-card p-4 rounded-lg text-center">
                <div class="text-3xl font-bold text-blue-400">${count}</div>
                <div class="text-sm text-slate-400">Total Vehicles</div>
            </div>
            <div class="glass-card p-4 rounded-lg text-center">
                <div class="text-3xl font-bold text-green-400">${percentage}%</div>
                <div class="text-sm text-slate-400">Fleet Percentage</div>
            </div>
            <div class="glass-card p-4 rounded-lg text-center">
                <div class="text-3xl font-bold text-yellow-400">${Math.round(count * 0.74)}</div>
                <div class="text-sm text-slate-400">Operational</div>
            </div>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
                <h4 class="font-semibold mb-4 text-slate-300">Operational Status</h4>
                <div class="space-y-3">
                    <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                        <span class="text-slate-300">Operational</span>
                        <span class="text-green-400 font-semibold">${Math.round(count * 0.74)}</span>
                    </div>
                    <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                        <span class="text-slate-300">In Maintenance</span>
                        <span class="text-yellow-400 font-semibold">${Math.round(count * 0.18)}</span>
                    </div>
                    <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                        <span class="text-slate-300">Out of Service</span>
                        <span class="text-red-400 font-semibold">${Math.round(count * 0.08)}</span>
                    </div>
                </div>
            </div>
            
            <div>
                <h4 class="font-semibold mb-4 text-slate-300">Maintenance Insights</h4>
                <div class="space-y-3">
                    <div class="p-3 bg-blue-500/10 rounded-lg border border-blue-500/20">
                        <div class="font-medium text-blue-400">Average MTBF</div>
                        <div class="text-sm text-slate-300">${Math.round(300 + Math.random() * 100)} hours</div>
                    </div>
                    <div class="p-3 bg-green-500/10 rounded-lg border border-green-500/20">
                        <div class="font-medium text-green-400">Next Maintenance</div>
                        <div class="text-sm text-slate-300">${Math.round(Math.random() * 30)} days</div>
                    </div>
                    <div class="p-3 bg-yellow-500/10 rounded-lg border border-yellow-500/20">
                        <div class="font-medium text-yellow-400">Parts Availability</div>
                        <div class="text-sm text-slate-300">${Math.round(70 + Math.random() * 25)}%</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="mt-6 p-4 glass-card rounded-lg">
            <h4 class="font-semibold mb-3 text-slate-300">Deployment Readiness</h4>
            <div class="space-y-2 text-sm text-slate-300">
                <div>• ${Math.round(count * 0.87)} vehicles mission-ready</div>
                <div>• ${Math.round(count * 0.12)} vehicles require minor maintenance</div>
                <div>• ${Math.round(count * 0.01)} vehicles critical for replacement</div>
                <div>• Overall readiness score: ${Math.round(70 + Math.random() * 25)}%</div>
            </div>
        </div>
    `;
    modal.classList.remove('hidden');
}
 // Location details function
        function showLocationDetails(locationName, assetCount) {
            const modal = document.getElementById('detail-modal');
            const title = document.getElementById('modal-title');
            const content = document.getElementById('modal-content');
            
            const locationData = {
                'Kem Terendak': {
                    totalVehicles: 42,
                    operational: 38,
                    maintenance: 3,
                    outOfService: 1,
                    tanks: { count: 8, desc: 'PT-91M Pendekar MBT', color: 'border-red-500' },
                    apcs: { count: 12, desc: 'ADNAN IFV', color: 'border-blue-500' },
                    trucks: { count: 15, desc: 'Transport Vehicles', color: 'border-green-500' },
                    helicopters: { count: 4, desc: 'MD530G Light Helicopters', color: 'border-purple-500' },
                    artillery: { count: 2, desc: 'G5 Howitzer', color: 'border-orange-500' },
                    support: { count: 1, desc: 'Support Vehicles', color: 'border-cyan-500' }
                },
                'Kem Sungai Besi': {
                    totalVehicles: 38,
                    operational: 35,
                    maintenance: 2,
                    outOfService: 1,
                    tanks: { count: 6, desc: 'PT-91M Pendekar MBT', color: 'border-red-500' },
                    apcs: { count: 14, desc: 'ACV-300 Adnan', color: 'border-blue-500' },
                    trucks: { count: 12, desc: 'Transport Vehicles', color: 'border-green-500' },
                    helicopters: { count: 3, desc: 'S-61A-4 Nuri', color: 'border-purple-500' },
                    artillery: { count: 2, desc: 'ASTROS II MLRS', color: 'border-orange-500' },
                    support: { count: 1, desc: 'Support Vehicles', color: 'border-cyan-500' }
                },
                'Kem Perdana': {
                    totalVehicles: 35,
                    operational: 32,
                    maintenance: 2,
                    outOfService: 1,
                    tanks: { count: 10, desc: 'PT-91M Pendekar MBT', color: 'border-red-500' },
                    apcs: { count: 8, desc: 'KIFV', color: 'border-blue-500' },
                    trucks: { count: 11, desc: 'Transport Vehicles', color: 'border-green-500' },
                    helicopters: { count: 3, desc: 'AW109 LOH', color: 'border-purple-500' },
                    artillery: { count: 2, desc: 'FH-70 Howitzer', color: 'border-orange-500' },
                    support: { count: 1, desc: 'Support Vehicles', color: 'border-cyan-500' }
                },
                'Pangkalan TLDM Lumut': {
                    totalVehicles: 28,
                    operational: 26,
                    maintenance: 1,
                    outOfService: 1,
                    tanks: { count: 2, desc: 'Amphibious Tanks', color: 'border-red-500' },
                    apcs: { count: 8, desc: 'BTR-80A', color: 'border-blue-500' },
                    trucks: { count: 12, desc: 'Naval Transport', color: 'border-green-500' },
                    helicopters: { count: 4, desc: 'Fennec AS555SN', color: 'border-purple-500' },
                    artillery: { count: 1, desc: 'Coastal Defense', color: 'border-orange-500' },
                    support: { count: 1, desc: 'Support Vehicles', color: 'border-cyan-500' }
                },
                'Pangkalan TUDM Kuantan': {
                    totalVehicles: 22,
                    operational: 20,
                    maintenance: 1,
                    outOfService: 1,
                    tanks: { count: 0, desc: 'Main Battle Tanks', color: 'border-red-500' },
                    apcs: { count: 4, desc: 'Security Vehicles', color: 'border-blue-500' },
                    trucks: { count: 10, desc: 'Air Base Support', color: 'border-green-500' },
                    helicopters: { count: 6, desc: 'EC725 Cougar', color: 'border-purple-500' },
                    artillery: { count: 1, desc: 'Jernas Air Defense', color: 'border-orange-500' },
                    support: { count: 1, desc: 'Support Vehicles', color: 'border-cyan-500' }
                },
                'Kem Mahkota': { 
                    totalVehicles: 18,
                    operational: 16,
                    maintenance: 1,
                    outOfService: 1,
                    tanks: { count: 2, desc: 'Security Tanks', color: 'border-red-500' },
                    apcs: { count: 6, desc: 'Condor APC', color: 'border-blue-500' },
                    trucks: { count: 6, desc: 'Supply Transport', color: 'border-green-500' },
                    helicopters: { count: 3, desc: 'MD530G', color: 'border-purple-500' },
                    artillery: { count: 1, desc: 'Base Defense', color: 'border-orange-500' },
                    support: { count: 0, desc: 'Support Vehicles', color: 'border-cyan-500' }
                },
                'Pangkalan TUDM Labuan': {
                    totalVehicles: 12,
                    operational: 11,
                    maintenance: 1,
                    outOfService: 0,
                    tanks: { count: 0, desc: 'Main Battle Tanks', color: 'border-red-500' },
                    apcs: { count: 2, desc: 'Security Vehicles', color: 'border-blue-500' },
                    trucks: { count: 6, desc: 'Base Support', color: 'border-green-500' },
                    helicopters: { count: 3, desc: 'S-61A-4 Nuri', color: 'border-purple-500' },
                    artillery: { count: 1, desc: 'Starstreak Air Defense', color: 'border-orange-500' },
                    support: { count: 0, desc: 'Support Vehicles', color: 'border-cyan-500' }
                }
            };
            
            const data = locationData[locationName];
            if (!data) return;
            
            title.textContent = `${locationName} - Vehicle Distribution`;
            
            content.innerHTML = `
                <!-- Vehicle Type KPI Cards -->
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4 mb-6">
                    <div class="glass-card p-4 rounded-lg border-2 ${data.tanks.color}">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-white mb-1">${data.tanks.count}</div>
                            <div class="text-sm font-medium text-white mb-1">Tanks</div>
                            <div class="text-xs text-slate-400">${data.tanks.desc}</div>
                        </div>
                    </div>
                    
                    <div class="glass-card p-4 rounded-lg border-2 ${data.apcs.color}">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-white mb-1">${data.apcs.count}</div>
                            <div class="text-sm font-medium text-white mb-1">APCs</div>
                            <div class="text-xs text-slate-400">${data.apcs.desc}</div>
                        </div>
                    </div>
                    
                    <div class="glass-card p-4 rounded-lg border-2 ${data.trucks.color}">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-white mb-1">${data.trucks.count}</div>
                            <div class="text-sm font-medium text-white mb-1">Trucks</div>
                            <div class="text-xs text-slate-400">${data.trucks.desc}</div>
                        </div>
                    </div>
                    
                    <div class="glass-card p-4 rounded-lg border-2 ${data.helicopters.color}">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-white mb-1">${data.helicopters.count}</div>
                            <div class="text-sm font-medium text-white mb-1">Helicopters</div>
                            <div class="text-xs text-slate-400">${data.helicopters.desc}</div>
                        </div>
                    </div>
                    
                    <div class="glass-card p-4 rounded-lg border-2 ${data.artillery.color}">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-white mb-1">${data.artillery.count}</div>
                            <div class="text-sm font-medium text-white mb-1">Artillery</div>
                            <div class="text-xs text-slate-400">${data.artillery.desc}</div>
                        </div>
                    </div>
                    
                    <div class="glass-card p-4 rounded-lg border-2 ${data.support.color}">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-white mb-1">${data.support.count}</div>
                            <div class="text-sm font-medium text-white mb-1">Support</div>
                            <div class="text-xs text-slate-400">${data.support.desc}</div>
                        </div>
                    </div>
                </div>
                
                <!-- Location Details Section -->
                <div class="glass-card p-4 rounded-lg">
                    <h4 class="text-lg font-semibold text-white mb-4">Location Details</h4>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-blue-400">${data.totalVehicles}</div>
                            <div class="text-sm text-slate-400">Total Vehicles</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-green-400">${data.operational}</div>
                            <div class="text-sm text-slate-400">Operational</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-yellow-400">${data.maintenance}</div>
                            <div class="text-sm text-slate-400">Under Maintenance</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-red-400">${data.outOfService}</div>
                            <div class="text-sm text-slate-400">Out of Service</div>
                        </div>
                    </div>
                </div>
            `;
            
            modal.classList.remove('hidden');
        }

                function showVehicleMaintenanceDetails(vehicleType, riskPercentage) {
            const modal = document.getElementById('detail-modal');
            const title = document.getElementById('modal-title');
            const content = document.getElementById('modal-content');
            
            const vehicleData = {
                'M1A2 Abrams Tank': {
                    risk: 89,
                    status: 'Critical',
                    color: 'red',
                    totalFleet: 24,
                    atRisk: 18,
                    commonIssues: ['Transmission wear', 'Track system fatigue', 'Engine overheating'],
                    avgRepairTime: '14 days',
                    partsAvailability: 'Limited',
                    recommendation: 'Immediate inspection and preventive maintenance'
                },
                'Stryker Combat Vehicle': {
                    risk: 76,
                    status: 'High',
                    color: 'red',
                    totalFleet: 32,
                    atRisk: 22,
                    commonIssues: ['Wheel bearing failure', 'Electrical system faults', 'Suspension wear'],
                    avgRepairTime: '8 days',
                    partsAvailability: 'Moderate',
                    recommendation: 'Schedule maintenance within 7 days'
                },
                'Humvee M1151': {
                    risk: 72,
                    status: 'High',
                    color: 'orange',
                    totalFleet: 45,
                    atRisk: 28,
                    commonIssues: ['Engine performance', 'Brake system wear', 'Transmission issues'],
                    avgRepairTime: '5 days',
                    partsAvailability: 'Good',
                    recommendation: 'Routine maintenance and inspection'
                },
                'M88 Recovery Vehicle': {
                    risk: 68,
                    status: 'High',
                    color: 'orange',
                    totalFleet: 12,
                    atRisk: 8,
                    commonIssues: ['Hydraulic system leaks', 'Winch mechanism wear', 'Engine performance'],
                    avgRepairTime: '10 days',
                    partsAvailability: 'Limited',
                    recommendation: 'Monitor closely and schedule maintenance'
                },
                'MRAP All-Terrain': {
                    risk: 65,
                    status: 'Medium',
                    color: 'yellow',
                    totalFleet: 28,
                    atRisk: 15,
                    commonIssues: ['Suspension fatigue', 'Armor system integrity', 'Electrical faults'],
                    avgRepairTime: '7 days',
                    partsAvailability: 'Good',
                    recommendation: 'Regular inspection and maintenance'
                }
            };
            
            const data = vehicleData[vehicleType] || vehicleData['M1A2 Abrams Tank'];
            
            title.textContent = vehicleType + ' - Maintenance Risk Analysis';
            content.innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                    <div class="glass-card p-4 rounded-lg text-center">
                        <div class="text-3xl font-bold text-${data.color}-400">${data.risk}%</div>
                        <div class="text-sm text-slate-400">Predicted Risk</div>
                    </div>
                    <div class="glass-card p-4 rounded-lg text-center">
                        <div class="text-3xl font-bold text-white">${data.totalFleet}</div>
                        <div class="text-sm text-slate-400">Total in Fleet</div>
                    </div>
                    <div class="glass-card p-4 rounded-lg text-center">
                        <div class="text-3xl font-bold text-${data.color}-400">${data.atRisk}</div>
                        <div class="text-sm text-slate-400">Vehicles at Risk</div>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-semibold mb-4 text-slate-300">Maintenance Details</h4>
                        <div class="space-y-3">
                            <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                                <span class="text-slate-300">Average Repair Time</span>
                                <span class="text-blue-400 font-semibold">${data.avgRepairTime}</span>
                            </div>
                            <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                                <span class="text-slate-300">Parts Availability</span>
                                <span class="text-${data.partsAvailability === 'Good' ? 'green' : data.partsAvailability === 'Moderate' ? 'yellow' : 'red'}-400 font-semibold">${data.partsAvailability}</span>
                            </div>
                            <div class="flex justify-between items-center p-3 glass-card rounded-lg">
                                <span class="text-slate-300">Risk Status</span>
                                <span class="text-${data.color}-400 font-semibold">${data.status}</span>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="font-semibold mb-4 text-slate-300">Common Issues</h4>
                        <div class="space-y-2">
                            ${data.commonIssues.map(issue => `
                                <div class="flex items-center space-x-2 p-2 bg-slate-800/30 rounded">
                                    <div class="w-2 h-2 bg-${data.color}-400 rounded-full"></div>
                                    <span class="text-sm text-slate-300">${issue}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
                
                <div class="mt-6 p-4 bg-${data.color}-500/10 rounded-lg border border-${data.color}-500/20">
                    <h4 class="font-semibold text-${data.color}-400 mb-2">Recommended Action</h4>
                    <div class="text-sm text-slate-300">${data.recommendation}</div>
                </div>
            `;
            modal.classList.remove('hidden');
        }
        
        // Route optimization functions
function showRouteView(viewName) {
    // Hide all route contents
    document.querySelectorAll('.route-content').forEach(content => {
        content.classList.add('hidden');
    });
    
    // Remove active class from all route buttons
    document.querySelectorAll('.route-tab-btn').forEach(btn => {
        btn.classList.remove('active');
        btn.classList.add('text-slate-300');
        btn.classList.remove('text-white');
    });
    
    // Show selected route view
    document.getElementById(viewName + '-routes').classList.remove('hidden');
    
    // Activate selected button
    const activeBtn = document.getElementById(viewName + '-routes-btn');
    activeBtn.classList.add('active');
    activeBtn.classList.remove('text-slate-300');
    activeBtn.classList.add('text-white');
}

// Route details functions
function showRouteDetails(routeId) {
    const modal = document.getElementById('detail-modal');
    const title = document.getElementById('modal-title');
    const content = document.getElementById('modal-content');
    
    const routeData = {
        'A': {
            name: 'Route A: Kem Terendak → Kem Sungai Besi',
            type: 'Primary supply corridor',
            status: 'HIGH RISK',
            statusColor: 'red',
            duration: '4.2 hrs',
            distance: '185 km',
            riskScore: '8.5/10',
            fuelCost: 'RM 420/trip',
            vehiclesUsed: 12,
            weeklyTrips: 8,
            riskFactors: ['Heavy traffic zones', 'Poor road conditions', 'Security checkpoints', 'Weather exposure'],
            recentIncidents: ['Vehicle breakdown (3 days ago)', 'Traffic delay (1 week ago)', 'Fuel shortage (2 weeks ago)'],
            alternativeRoutes: 2,
            recommendation: 'Consider Route A+ optimization to reduce risk by 62% and save 1.1 hours per trip'
        },
        'B': {
            name: 'Route B: Kem Perdana → TUDM Kuantan',
            type: 'Equipment transport',
            status: 'MEDIUM RISK',
            statusColor: 'amber',
            duration: '3.8 hrs',
            distance: '162 km',
            riskScore: '5.2/10',
            fuelCost: 'RM 324/trip',
            vehiclesUsed: 8,
            weeklyTrips: 5,
            riskFactors: ['Mountain terrain', 'Limited fuel stations', 'Communication dead zones', 'Narrow roads'],
            recentIncidents: ['Minor accident (1 week ago)', 'Equipment delay (3 weeks ago)'],
            alternativeRoutes: 1,
            recommendation: 'Route B+ available with 24% time savings and 46% risk reduction'
        },
        'C': {
            name: 'Route C: TLDM Lumut → Kem Perdana',
            type: 'Personnel transfer',
            status: 'LOW RISK',
            statusColor: 'green',
            duration: '2.1 hrs',
            distance: '98 km',
            riskScore: '2.8/10',
            fuelCost: 'RM 196/trip',
            vehiclesUsed: 6,
            weeklyTrips: 12,
            riskFactors: ['Coastal weather', 'Bridge crossings'],
            recentIncidents: ['No major incidents in 30 days'],
            alternativeRoutes: 3,
            recommendation: 'Route performing well. Minor optimization available for 14% improvement'
        }
    };
    
    const data = routeData[routeId];
    if (!data) return;
    
    title.textContent = data.name;
    
    const statusColorClass = data.statusColor === 'red' ? 'text-red-400 bg-red-500/20' : 
                           data.statusColor === 'amber' ? 'text-amber-400 bg-amber-500/20' : 
                           'text-green-400 bg-green-500/20';
    
    content.innerHTML = `
        <div class="flex justify-between items-center mb-6">
            <div>
                <h4 class="text-lg font-semibold text-white">${data.type}</h4>
                <p class="text-sm text-slate-400">Active operational route</p>
            </div>
            <span class="px-3 py-1 rounded-lg text-sm font-medium ${statusColorClass}">${data.status}</span>
        </div>
        
        <div class="grid grid-cols-3 gap-4 mb-6">
            <div class="glass-card p-4 rounded-lg text-center">
                <div class="text-2xl font-bold text-white">${data.duration}</div>
                <div class="text-sm text-slate-400">Duration</div>
            </div>
            <div class="glass-card p-4 rounded-lg text-center">
                <div class="text-2xl font-bold text-white">${data.distance}</div>
                <div class="text-sm text-slate-400">Distance</div>
            </div>
            <div class="glass-card p-4 rounded-lg text-center">
                <div class="text-2xl font-bold ${data.statusColor === 'red' ? 'text-red-400' : data.statusColor === 'amber' ? 'text-amber-400' : 'text-green-400'}">${data.riskScore}</div>
                <div class="text-sm text-slate-400">Risk Score</div>
            </div>
        </div>
        
        <div class="grid grid-cols-2 gap-6 mb-6">
            <div>
                <h4 class="text-lg font-semibold text-white mb-3">Route Statistics</h4>
                <div class="space-y-2">
                    <div class="flex justify-between">
                        <span class="text-slate-400">Fuel Cost per Trip:</span>
                        <span class="text-white">${data.fuelCost}</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-slate-400">Vehicles Used:</span>
                        <span class="text-white">${data.vehiclesUsed}</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-slate-400">Weekly Trips:</span>
                        <span class="text-white">${data.weeklyTrips}</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-slate-400">Alternative Routes:</span>
                        <span class="text-white">${data.alternativeRoutes}</span>
                    </div>
                </div>
            </div>
            
            <div>
                <h4 class="text-lg font-semibold text-white mb-3">Risk Factors</h4>
                <ul class="space-y-2">
                    ${data.riskFactors.map(factor => `
                        <li class="flex items-center">
                            <div class="w-2 h-2 bg-${data.statusColor}-500 rounded-full mr-3"></div>
                            <span class="text-slate-300 text-sm">${factor}</span>
                        </li>
                    `).join('')}
                </ul>
            </div>
        </div>
        
        <div class="mb-6">
            <h4 class="text-lg font-semibold text-white mb-3">Recent Incidents</h4>
            <div class="glass-card p-4 rounded-lg">
                ${Array.isArray(data.recentIncidents) ? 
                    data.recentIncidents.map(incident => `
                        <div class="flex items-center mb-2 last:mb-0">
                            <div class="w-2 h-2 bg-yellow-500 rounded-full mr-3"></div>
                            <span class="text-slate-300 text-sm">${incident}</span>
                        </div>
                    `).join('') :
                    `<div class="flex items-center">
                        <div class="w-2 h-2 bg-green-500 rounded-full mr-3"></div>
                        <span class="text-slate-300 text-sm">${data.recentIncidents}</span>
                    </div>`
                }
            </div>
        </div>
        
        <div class="glass-card p-4 rounded-lg">
            <h4 class="text-lg font-semibold text-white mb-2">AI Recommendation</h4>
            <p class="text-slate-300 text-sm">${data.recommendation}</p>
        </div>
    `;
    
    modal.classList.remove('hidden');
    
    // Add visual feedback
    event.currentTarget.style.transform = 'scale(0.98)';
    setTimeout(() => {
        event.currentTarget.style.transform = 'scale(1)';
    }, 100);
}

function showOptimizedRouteDetails(routeId) {
    console.log('Showing optimized route details for:', routeId);
    // Add visual feedback
    event.currentTarget.style.transform = 'scale(0.98)';
    setTimeout(() => {
        event.currentTarget.style.transform = 'scale(1)';
    }, 100);
}

function exportRouteData() {
    console.log('Exporting route data...');
    // Add visual feedback
    event.currentTarget.style.transform = 'scale(0.98)';
    setTimeout(() => {
        event.currentTarget.style.transform = 'scale(1)';
    }, 100);
}

function implementOptimization() {
    console.log('Implementing route optimization...');
    // Add visual feedback
    event.currentTarget.style.transform = 'scale(0.98)';
    setTimeout(() => {
        event.currentTarget.style.transform = 'scale(1)';
    }, 100);
}

// Predictive Asset Allocation Functions
function showAssetAllocationDetails(assetType) {
    const modal = document.getElementById('detail-modal');
    const title = document.getElementById('modal-title');
    const content = document.getElementById('modal-content');
    
    title.textContent = assetType + ' - Allocation Optimization Details';
    content.innerHTML = `
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
            <div class="glass-card p-4 rounded-lg">
                <h4 class="font-semibold mb-3 text-slate-300">Current Allocation</h4>
                <div class="space-y-3">
                    <div class="flex justify-between">
                        <span class="text-slate-400">Northern Command</span>
                        <span class="text-white">12 vehicles</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-slate-400">Eastern Command</span>
                        <span class="text-white">8 vehicles</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-slate-400">Western Command</span>
                        <span class="text-white">15 vehicles</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-slate-400">Southern Command</span>
                        <span class="text-white">10 vehicles</span>
                    </div>
                </div>
            </div>
            
            <div class="glass-card p-4 rounded-lg">
                <h4 class="font-semibold mb-3 text-slate-300">Recommended Allocation</h4>
                <div class="space-y-3">
                    <div class="flex justify-between">
                        <span class="text-slate-400">Northern Command</span>
                        <span class="text-green-400">8 vehicles (-4)</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-slate-400">Eastern Command</span>
                        <span class="text-green-400">12 vehicles (+4)</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-slate-400">Western Command</span>
                        <span class="text-green-400">18 vehicles (+3)</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-slate-400">Southern Command</span>
                        <span class="text-green-400">7 vehicles (-3)</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="glass-card p-4 rounded-lg">
            <h4 class="font-semibold mb-3 text-slate-300">Expected Impact</h4>
            <div class="grid grid-cols-3 gap-4 text-center">
                <div>
                    <div class="text-2xl font-bold text-green-400">+23%</div>
                    <div class="text-xs text-slate-400">Mission Readiness</div>
                </div>
                <div>
                    <div class="text-2xl font-bold text-blue-400">+18%</div>
                    <div class="text-xs text-slate-400">Utilization</div>
                </div>
                <div>
                    <div class="text-2xl font-bold text-purple-400">-15%</div>
                    <div class="text-xs text-slate-400">Downtime</div>
                </div>
            </div>
        </div>
    `;
    modal.classList.remove('hidden');
}

function showMissionReadinessDetails(missionName) {
    const modal = document.getElementById('detail-modal');
    const title = document.getElementById('modal-title');
    const content = document.getElementById('modal-content');
    
    title.textContent = missionName + ' - Readiness Analysis';
    content.innerHTML = `
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
            <div class="glass-card p-4 rounded-lg">
                <h4 class="font-semibold mb-3 text-slate-300">Asset Requirements</h4>
                <div class="space-y-3">
                    <div class="flex justify-between">
                        <span class="text-slate-400">Combat Vehicles</span>
                        <span class="text-white">25 required</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-slate-400">Transport Vehicles</span>
                        <span class="text-white">18 required</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-slate-400">Support Vehicles</span>
                        <span class="text-white">12 required</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-slate-400">Special Equipment</span>
                        <span class="text-white">8 required</span>
                    </div>
                </div>
            </div>
            
            <div class="glass-card p-4 rounded-lg">
                <h4 class="font-semibold mb-3 text-slate-300">Current Availability</h4>
                <div class="space-y-3">
                    <div class="flex justify-between">
                        <span class="text-slate-400">Combat Vehicles</span>
                        <span class="text-green-400">22 available</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-slate-400">Transport Vehicles</span>
                        <span class="text-yellow-400">15 available</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-slate-400">Support Vehicles</span>
                        <span class="text-green-400">11 available</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-slate-400">Special Equipment</span>
                        <span class="text-red-400">5 available</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="glass-card p-4 rounded-lg">
            <h4 class="font-semibold mb-3 text-slate-300">Recommended Actions</h4>
            <div class="space-y-2 text-sm text-slate-300">
                <div>• Transfer 3 combat vehicles from Northern Command</div>
                <div>• Prioritize maintenance for transport vehicles</div>
                <div>• Source additional special equipment from reserves</div>
                <div>• Optimize deployment schedule for maximum efficiency</div>
            </div>
        </div>
    `;
    modal.classList.remove('hidden');
}

function showAssetAvailabilityDetails(assetType, week) {
    const modal = document.getElementById('detail-modal');
    const title = document.getElementById('modal-title');
    const content = document.getElementById('modal-content');
    
    title.textContent = assetType + ' - ' + week + ' Availability';
    content.innerHTML = `
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
            <div class="glass-card p-4 rounded-lg">
                <h4 class="font-semibold mb-3 text-slate-300">Availability Forecast</h4>
                <div class="space-y-3">
                    <div class="flex justify-between">
                        <span class="text-slate-400">Total Fleet</span>
                        <span class="text-white">45 vehicles</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-slate-400">Available</span>
                        <span class="text-green-400">32 vehicles</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-slate-400">In Maintenance</span>
                        <span class="text-yellow-400">8 vehicles</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-slate-400">Out of Service</span>
                        <span class="text-red-400">5 vehicles</span>
                    </div>
                </div>
            </div>
            
            <div class="glass-card p-4 rounded-lg">
                <h4 class="font-semibold mb-3 text-slate-300">Mission Impact</h4>
                <div class="space-y-3">
                    <div class="flex justify-between">
                        <span class="text-slate-400">Operation Thunder</span>
                        <span class="text-green-400">Fully Supported</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-slate-400">Humanitarian Aid</span>
                        <span class="text-yellow-400">Partial Support</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-slate-400">Border Patrol</span>
                        <span class="text-red-400">Critical Shortage</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="glass-card p-4 rounded-lg">
            <h4 class="font-semibold mb-3 text-slate-300">Recommendations</h4>
            <div class="space-y-2 text-sm text-slate-300">
                <div>• Accelerate maintenance for 3 critical vehicles</div>
                <div>• Consider temporary reassignment from other commands</div>
                <div>• Prepare contingency plans for mission delays</div>
                <div>• Monitor parts availability for critical repairs</div>
            </div>
        </div>
    `;
    modal.classList.remove('hidden');
}

function showReallocationPlan(assetType) {
    const modal = document.getElementById('detail-modal');
    const title = document.getElementById('modal-title');
    const content = document.getElementById('modal-content');
    
    title.textContent = assetType + ' - Reallocation Plan';
    content.innerHTML = `
        <div class="glass-card p-6 rounded-lg mb-6">
            <h4 class="font-semibold mb-4 text-slate-300">Proposed Reallocation</h4>
            <div class="space-y-4">
                <div class="flex justify-between items-center p-3 bg-slate-800/30 rounded-lg">
                    <div>
                        <div class="text-white font-medium">Northern → Western Command</div>
                        <div class="text-sm text-slate-400">Address critical shortage in Operation Thunder</div>
                    </div>
                    <div class="text-green-400 font-bold">8 vehicles</div>
                </div>
                
                <div class="flex justify-between items-center p-3 bg-slate-800/30 rounded-lg">
                    <div>
                        <div class="text-white font-medium">Eastern → Southern Command</div>
                        <div class="text-sm text-slate-400">Support Humanitarian Aid mission</div>
                    </div>
                    <div class="text-green-400 font-bold">5 vehicles</div>
                </div>
                
                <div class="flex justify-between items-center p-3 bg-slate-800/30 rounded-lg">
                    <div>
                        <div class="text-white font-medium">Central → Eastern Command</div>
                        <div class="text-sm text-slate-400">Reinforce Border Patrol operations</div>
                    </div>
                    <div class="text-green-400 font-bold">3 vehicles</div>
                </div>
            </div>
        </div>
        
        <div class="grid grid-cols-3 gap-4 mb-6">
            <div class="text-center p-3 glass-card rounded-lg">
                <div class="text-2xl font-bold text-green-400">+23%</div>
                <div class="text-xs text-slate-400">Readiness Improvement</div>
            </div>
            <div class="text-center p-3 glass-card rounded-lg">
                <div class="text-2xl font-bold text-blue-400">18h</div>
                <div class="text-xs text-slate-400">Implementation Time</div>
            </div>
            <div class="text-center p-3 glass-card rounded-lg">
                <div class="text-2xl font-bold text-purple-400">94%</div>
                <div class="text-xs text-slate-400">Success Probability</div>
            </div>
        </div>
        
        <div class="flex space-x-3">
            <button onclick="implementReallocation('${assetType}')" class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors">
                Approve Reallocation
            </button>
            <button onclick="closeModal()" class="px-4 py-2 bg-slate-600 hover:bg-slate-700 text-white rounded-lg transition-colors">
                Review Later
            </button>
        </div>
    `;
    modal.classList.remove('hidden');
}

function exportAllocationData() {
    // Show success notification
    showNotification('Allocation data exported successfully', 'success');
}

function scheduleReallocation() {
    // Show confirmation notification
    showNotification('Reallocation scheduled for tomorrow 06:00', 'info');
}

function runSimulation() {
    // Show simulation notification
    showNotification('Running optimization simulation...', 'info');
    setTimeout(() => {
        showNotification('Simulation complete - 23% improvement confirmed', 'success');
    }, 2000);
}

function implementReallocation(assetType) {
    // Show implementation notification
    showNotification(`${assetType} reallocation initiated successfully`, 'success');
    closeModal();
}

function showNotification(message, type) {
    const notification = document.createElement('div');
    const bgColor = type === 'success' ? 'bg-green-500/20 border-green-500/30' : 
                   type === 'info' ? 'bg-blue-500/20 border-blue-500/30' : 'bg-yellow-500/20 border-yellow-500/30';
    const textColor = type === 'success' ? 'text-green-400' : 
                     type === 'info' ? 'text-blue-400' : 'text-yellow-400';
    
    notification.className = `fixed top-4 right-4 glass-card p-4 rounded-lg border ${bgColor} z-50 max-w-sm`;
    notification.innerHTML = `
        <div class="flex items-start space-x-3">
            <div class="w-6 h-6 ${textColor} rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                <span class="text-sm">${type === 'success' ? '✓' : type === 'info' ? 'ⓘ' : '⚠'}</span>
            </div>
            <div>
                <div class="font-medium text-white mb-1">${type === 'success' ? 'Success' : type === 'info' ? 'Information' : 'Warning'}</div>
                <div class="text-sm text-slate-300">${message}</div>
            </div>
        </div>
    `;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.remove();
    }, 5000);
}
// Chart tooltip functionality
const chartPoints = document.querySelectorAll('.chart-point');
const tooltip = document.getElementById('chartTooltip');
const tooltipMonth = document.getElementById('tooltipMonth');
const tooltipValue = document.getElementById('tooltipValue');
const tooltipType = document.getElementById('tooltipType');
const tooltipDetails = document.getElementById('tooltipDetails');

chartPoints.forEach(point => {
    point.addEventListener('mouseenter', (e) => {
        const month = e.target.getAttribute('data-month');
        const value = e.target.getAttribute('data-value');
        const type = e.target.getAttribute('data-type');
        const details = e.target.getAttribute('data-details');

        // Update tooltip content
        tooltipMonth.textContent = month;
        tooltipValue.textContent = value;
        tooltipDetails.textContent = details;

        // Style tooltip type badge based on data type
        tooltipType.textContent = type;
        if (type === 'Historical') {
            tooltipType.className = 'text-xs font-medium mb-2 px-2 py-1 rounded-full inline-block bg-blue-500/20 text-blue-400';
            tooltipValue.className = 'text-2xl font-bold mb-1 text-blue-400';
        } else if (type === 'Forecast') {
            tooltipType.className = 'text-xs font-medium mb-2 px-2 py-1 rounded-full inline-block bg-yellow-500/20 text-yellow-400';
            tooltipValue.className = 'text-2xl font-bold mb-1 text-yellow-400';
        } else if (type === 'Current') {
            tooltipType.className = 'text-xs font-medium mb-2 px-2 py-1 rounded-full inline-block bg-green-500/20 text-green-400';
            tooltipValue.className = 'text-2xl font-bold mb-1 text-green-400';
        }

        // Position tooltip
        const rect = e.target.getBoundingClientRect();
        const chartContainer = document.querySelector('#ammoChart').parentElement;
        const containerRect = chartContainer.getBoundingClientRect();
        
        const x = rect.left - containerRect.left + rect.width / 2;
        const y = rect.top - containerRect.top - 10;

        tooltip.style.left = `${x}px`;
        tooltip.style.top = `${y}px`;
        tooltip.style.transform = 'translate(-50%, -100%)';
        tooltip.style.opacity = '1';
    });

    point.addEventListener('mouseleave', () => {
        tooltip.style.opacity = '0';
    });

    // Add click functionality for detailed view
    point.addEventListener('click', (e) => {
        const month = e.target.getAttribute('data-month');
        const value = e.target.getAttribute('data-value');
        const type = e.target.getAttribute('data-type');
        
        // Create a more detailed popup or drill-down view
        showDetailedView(month, value, type);
    });
});

// Function to show detailed view (placeholder for future expansion)
function showDetailedView(month, value, type) {
    console.log(`Detailed view for ${month}: ${value} (${type})`);
    // This could open a modal with more detailed information
    // For now, we'll just highlight the point
    chartPoints.forEach(p => p.style.opacity = '0.3');
    event.target.style.opacity = '1';
    event.target.style.transform = 'scale(1.5)';
    
    // Reset after 2 seconds
    setTimeout(() => {
        chartPoints.forEach(p => {
            p.style.opacity = '1';
            p.style.transform = 'scale(1)';
        });
    }, 2000);
}

// Add hover effects to chart lines
const chartContainer = document.querySelector('#ammoChart').parentElement;
chartContainer.addEventListener('mousemove', (e) => {
    const rect = chartContainer.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;
    
    // Add subtle glow effect when hovering over chart area
    const svg = document.getElementById('ammoChart');
    if (x > 32 && x < rect.width - 16 && y > 16 && y < rect.height - 32) {
        svg.style.filter = 'drop-shadow(0 0 8px rgba(59, 130, 246, 0.3))';
    } else {
        svg.style.filter = 'none';
    }
});

chartContainer.addEventListener('mouseleave', () => {
    document.getElementById('ammoChart').style.filter = 'none';
});
// Bar chart functionality
const barTooltip = document.getElementById('barTooltip');
const barTooltipCategory = document.getElementById('barTooltipCategory');
const barTooltipActual = document.getElementById('barTooltipActual');
const barTooltipForecast = document.getElementById('barTooltipForecast');
const detailModal = document.getElementById('detailModal');
const modalContent = document.getElementById('modalContent');
const modalTitle = document.getElementById('modalTitle');
const modalSubtitle = document.getElementById('modalSubtitle');
const closeModalBtn = document.getElementById('closeModal'); // Renamed
const detailBars = document.getElementById('detailBars');
const totalCurrent = document.getElementById('totalCurrent');
const totalPrevious = document.getElementById('totalPrevious');
const changePercent = document.getElementById('changePercent');

// Check if elements exist before adding event listeners
if (barTooltip && detailModal && closeModalBtn) {
    // Add hover and click events to chart bars
    document.querySelectorAll('.chart-bar').forEach(bar => {
        bar.addEventListener('mouseenter', function(e) {
            const category = this.getAttribute('data-category');
            const actual = this.getAttribute('data-actual');
            const forecast = this.getAttribute('data-forecast');
            
            barTooltipCategory.textContent = category;
            barTooltipActual.textContent = parseInt(actual).toLocaleString() + ' rounds';
            barTooltipForecast.textContent = parseInt(forecast).toLocaleString() + ' rounds';
            
            // Position tooltip
            const rect = this.getBoundingClientRect();
            const container = this.closest('.relative');
            
            if (container) {
                const containerRect = container.getBoundingClientRect();
                const x = rect.left - containerRect.left + rect.width / 2 - 112;
                const y = rect.top - containerRect.top - 90;
                
                barTooltip.style.left = Math.max(10, x) + 'px';
                barTooltip.style.top = Math.max(10, y) + 'px';
                barTooltip.style.opacity = '1';
                barTooltip.style.visibility = 'visible';
            }
        });

        bar.addEventListener('mouseleave', function() {
            barTooltip.style.opacity = '0';
            barTooltip.style.visibility = 'hidden';
        });

        bar.addEventListener('click', function(e) {
            e.preventDefault();
            const category = this.getAttribute('data-category');
            const actual = parseInt(this.getAttribute('data-actual'));
            const forecast = parseInt(this.getAttribute('data-forecast'));
            const details = this.getAttribute('data-details');
            
            try {
                const detailsObj = JSON.parse(details);
                
                // Update modal content
                modalTitle.textContent = `${category} - Actual vs Forecast Breakdown`;
                modalSubtitle.textContent = `Detailed ammunition consumption comparison for ${category.toLowerCase()}`;
                
                // Clear previous detail bars
                detailBars.innerHTML = '';
                
                // Create horizontal detail bars
                const maxValue = Math.max(...Object.values(detailsObj));
                const colors = ['#3b82f6', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6'];
                let colorIndex = 0;
                
                Object.entries(detailsObj).forEach(([subcat, value]) => {
                    const barWidth = (value / maxValue) * 100;
                    const color = colors[colorIndex % colors.length];
                    
                    const barContainer = document.createElement('div');
                    barContainer.className = 'flex items-center space-x-4 h-8';
                    
                    barContainer.innerHTML = `
                        <div class="w-20 text-slate-400 text-xs text-right">${subcat}</div>
                        <div class="flex-1 bg-slate-700/30 rounded-full h-6 relative overflow-hidden">
                            <div class="h-full rounded-full transition-all duration-500 flex items-center justify-end pr-2" 
                                 style="width: ${barWidth}%; background-color: ${color};">
                                <span class="text-white text-xs font-medium">${value.toLocaleString()}</span>
                            </div>
                        </div>
                    `;
                    
                    detailBars.appendChild(barContainer);
                    colorIndex++;
                });
                
                // Update summary stats
                totalCurrent.textContent = actual.toLocaleString();
                totalPrevious.textContent = forecast.toLocaleString();
                
                const variance = ((actual - forecast) / forecast * 100);
                changePercent.textContent = (variance >= 0 ? '+' : '') + variance.toFixed(1) + '%';
                changePercent.className = `text-2xl font-bold ${variance >= 0 ? 'text-red-400' : 'text-green-400'}`;
                
                // Show modal
                detailModal.style.opacity = '1';
                detailModal.style.visibility = 'visible';
                detailModal.classList.remove('pointer-events-none');
                modalContent.style.transform = 'scale(1)';
                
            } catch (error) {
                console.error('Error parsing details:', error);
            }
        });
    });

    // Close modal functionality
    closeModalBtn.addEventListener('click', function() {
        detailModal.style.opacity = '0';
        detailModal.style.visibility = 'hidden';
        detailModal.classList.add('pointer-events-none');
        modalContent.style.transform = 'scale(0.95)';
    });

    // Close modal when clicking outside
    detailModal.addEventListener('click', function(e) {
        if (e.target === detailModal) {
            closeModalBtn.click();
        }
    });

    // Close modal with Escape key
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && detailModal.style.opacity === '1') {
            closeModalBtn.click();
        }
    });
} else {
    console.log('Some required elements not found');
}
// Function to show detailed weapon system modal
function showWeaponSystemModal(status, count, percentage, category = null) {
    // Create modal backdrop
    const modal = document.createElement('div');
    modal.className = 'fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4';
    modal.id = 'weaponSystemModal';
    
    // Sample weapon system data based on status and category
    const weaponData = generateWeaponData(status, count, category);
    
    modal.innerHTML = `
        <div class="glass-card rounded-lg p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto transform scale-95 transition-transform duration-300" id="weaponModalContent">
            <div class="flex items-center justify-between mb-6">
                <div>
                    <h3 class="text-xl font-semibold text-white mb-2">${category ? category + ' - ' : ''}${status} Systems</h3>
                    <p class="text-slate-300 text-sm">${count} weapon systems (${percentage}) - Detailed breakdown and status information</p>
                </div>
                <button id="closeWeaponModal" class="w-8 h-8 bg-slate-700 hover:bg-slate-600 rounded-lg flex items-center justify-center transition-colors">
                    <svg class="w-4 h-4 text-slate-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- Status Overview Cards -->
            <div class="grid grid-cols-4 gap-4 mb-6">
                <div class="bg-green-500/10 border border-green-500/20 rounded-lg p-4 text-center">
                    <div class="text-2xl font-bold text-green-400">${weaponData.statusCounts.operational}</div>
                    <div class="text-green-300 text-sm">Operational</div>
                </div>
                <div class="bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-4 text-center">
                    <div class="text-2xl font-bold text-yellow-400">${weaponData.statusCounts.maintenance}</div>
                    <div class="text-yellow-300 text-sm">Maintenance</div>
                </div>
                <div class="bg-orange-500/10 border border-orange-500/20 rounded-lg p-4 text-center">
                    <div class="text-2xl font-bold text-orange-400">${weaponData.statusCounts.atRisk}</div>
                    <div class="text-orange-300 text-sm">At Risk</div>
                </div>
                <div class="bg-red-500/10 border border-red-500/20 rounded-lg p-4 text-center">
                    <div class="text-2xl font-bold text-red-400">${weaponData.statusCounts.outOfService}</div>
                    <div class="text-red-300 text-sm">Out of Service</div>
                </div>
            </div>

            <!-- Individual Systems List -->
            <div class="mb-6">
                <h4 class="text-lg font-medium text-white mb-4">Individual System Details</h4>
                <div class="bg-slate-800/30 rounded-lg max-h-64 overflow-y-auto">
                    ${weaponData.systems.map(system => `
                        <div class="flex items-center justify-between p-3 border-b border-slate-600/30 last:border-b-0 hover:bg-slate-700/20 transition-colors">
                            <div class="flex items-center space-x-3">
                                <div class="w-3 h-3 rounded-full ${getStatusColor(system.status)}"></div>
                                <div>
                                    <div class="text-white font-medium text-sm">${system.id} - ${system.name}</div>
                                    <div class="text-slate-400 text-xs">${system.location}</div>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="text-slate-300 text-sm">${system.statusInfo}</div>
                                <div class="text-slate-400 text-xs">${system.details}</div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            </div>

            <!-- Maintenance Schedule -->
            <div>
                <h4 class="text-lg font-medium text-white mb-4">Upcoming Maintenance Schedule</h4>
                <div class="bg-slate-800/30 rounded-lg p-4">
                    <div class="space-y-3">
                        ${weaponData.maintenance.map(item => `
                            <div class="flex items-center justify-between p-2 bg-slate-700/30 rounded">
                                <div class="flex items-center space-x-3">
                                    <div class="w-2 h-2 bg-blue-400 rounded-full"></div>
                                    <div>
                                        <div class="text-white text-sm font-medium">${item.date}</div>
                                        <div class="text-slate-400 text-xs">${item.type}</div>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="text-slate-300 text-sm">${item.systems} systems</div>
                                    <div class="text-slate-400 text-xs">${item.duration}</div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            </div>
        </div>
    `;
    
    document.body.appendChild(modal);
    
    // Animate in
    setTimeout(() => {
        document.getElementById('weaponModalContent').style.transform = 'scale(1)';
    }, 10);
    
    // Close modal functionality
    const closeBtn = document.getElementById('closeWeaponModal');
    closeBtn.addEventListener('click', () => closeWeaponModal(modal));
    
    modal.addEventListener('click', (e) => {
        if (e.target === modal) closeWeaponModal(modal);
    });
    
    document.addEventListener('keydown', function escapeHandler(e) {
        if (e.key === 'Escape') {
            closeWeaponModal(modal);
            document.removeEventListener('keydown', escapeHandler);
        }
    });
}

function closeWeaponModal(modal) {
    document.getElementById('weaponModalContent').style.transform = 'scale(0.95)';
    setTimeout(() => {
        if (modal.parentElement) {
            modal.remove();
        }
    }, 200);
}

function getStatusColor(status) {
    switch(status) {
        case 'Operational': return 'bg-green-500';
        case 'Scheduled Maintenance': return 'bg-yellow-500';
        case 'At Risk': return 'bg-orange-500';
        case 'Out of Service': return 'bg-red-500';
        default: return 'bg-slate-500';
    }
}

function generateWeaponData(status, count, category) {
    const weaponTypes = {
        'Rifles': ['M4A1 Carbine', 'M16A4 Rifle', 'M249 SAW', 'M240B Machine Gun'],
        'Artillery': ['M777 Howitzer', 'M119A3 Howitzer', 'M120 Mortar', 'M252 Mortar'],
        'Tanks': ['M1A2 Abrams', 'M2A3 Bradley', 'M1126 Stryker', 'M113A3 APC'],
        'Air Systems': ['AH-64 Apache', 'UH-60 Black Hawk', 'CH-47 Chinook', 'MQ-9 Reaper'],
        'Support Vehicles': ['HMMWV', 'MRAP', 'M35A3 Truck', 'M1078 LMTV']
    };

    const locations = ['FOB Alpha', 'Camp Bravo', 'Outpost Charlie', 'Base Delta', 'Station Echo'];
    
    const systems = [];
    const categories = category ? [category] : Object.keys(weaponTypes);
    
    let systemCount = 0;
    categories.forEach(cat => {
        const catCount = category ? parseInt(count) : Math.floor(parseInt(count) / categories.length);
        for (let i = 0; i < catCount && systemCount < parseInt(count); i++) {
            const weaponType = weaponTypes[cat];
            const id = cat.charAt(0) + String(i + 1).padStart(3, '0');
            const name = weaponType[i % weaponType.length];
            const location = locations[Math.floor(Math.random() * locations.length)];
            
            let statusInfo, details;
            switch(status) {
                case 'Operational':
                    statusInfo = 'Ready';
                    details = 'Last service: ' + getRandomDate(-30, 0);
                    break;
                case 'Scheduled Maintenance':
                    statusInfo = 'Maintenance Due';
                    details = 'Scheduled: ' + getRandomDate(1, 14);
                    break;
                case 'At Risk':
                    statusInfo = 'Needs Attention';
                    details = 'Issue: ' + ['Wear detected', 'Performance degraded', 'Component aging'][Math.floor(Math.random() * 3)];
                    break;
                case 'Out of Service':
                    statusInfo = 'Under Repair';
                    details = 'ETA: ' + getRandomDate(7, 21);
                    break;
            }
            
            systems.push({
                id, name, location, status, statusInfo, details
            });
            systemCount++;
        }
    });

    // Generate status counts
    const totalSystems = category ? getSystemCount(category) : 250;
    const statusCounts = {
        operational: Math.floor(totalSystems * 0.716),
        maintenance: Math.floor(totalSystems * 0.132),
        atRisk: Math.floor(totalSystems * 0.076),
        outOfService: Math.floor(totalSystems * 0.076)
    };

    // Generate maintenance schedule
    const maintenance = [
        { date: 'Feb 1, 2025', type: 'Routine Inspection', systems: 12, duration: '4 hours' },
        { date: 'Feb 3, 2025', type: 'Preventive Maintenance', systems: 8, duration: '6 hours' },
        { date: 'Feb 7, 2025', type: 'Component Replacement', systems: 5, duration: '8 hours' },
        { date: 'Feb 10, 2025', type: 'System Overhaul', systems: 3, duration: '2 days' },
        { date: 'Feb 15, 2025', type: 'Calibration Check', systems: 15, duration: '3 hours' }
    ];

    return { systems, statusCounts, maintenance };
}

function getSystemCount(category) {
    const counts = {
        'Rifles': 60,
        'Artillery': 40,
        'Tanks': 30,
        'Air Systems': 25,
        'Support Vehicles': 95
    };
    return counts[category] || 50;
}

function getRandomDate(minDays, maxDays) {
    const date = new Date();
    const randomDays = Math.floor(Math.random() * (maxDays - minDays + 1)) + minDays;
    date.setDate(date.getDate() + randomDays);
    return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
}

// Donut chart functionality
const donutTooltip = document.getElementById('donutTooltip');
const donutTooltipStatus = document.getElementById('donutTooltipStatus');
const donutTooltipCount = document.getElementById('donutTooltipCount');
const donutTooltipPercentage = document.getElementById('donutTooltipPercentage');

// Add hover events to donut chart segments
document.querySelectorAll('.donut-segment').forEach(segment => {
    segment.addEventListener('mouseenter', function(e) {
        const status = this.getAttribute('data-status');
        const count = this.getAttribute('data-count');
        const percentage = this.getAttribute('data-percentage');
        
        donutTooltipStatus.textContent = status;
        donutTooltipCount.textContent = count + ' units';
        donutTooltipPercentage.textContent = percentage;
        
        // Position tooltip
        const rect = this.getBoundingClientRect();
        const containerRect = this.closest('.relative').getBoundingClientRect();
        
        const x = rect.left - containerRect.left + rect.width / 2 - 96;
        const y = rect.top - containerRect.top - 80;
        
        donutTooltip.style.left = Math.max(10, x) + 'px';
        donutTooltip.style.top = Math.max(10, y) + 'px';
        donutTooltip.style.opacity = '1';
        donutTooltip.style.visibility = 'visible';
    });

    segment.addEventListener('mouseleave', function() {
        donutTooltip.style.opacity = '0';
        donutTooltip.style.visibility = 'hidden';
    });
});

// Health monitoring stacked bar chart functionality
const healthTooltip = document.getElementById('healthTooltip');
const healthTooltipCategory = document.getElementById('healthTooltipCategory');
const healthTooltipStatus = document.getElementById('healthTooltipStatus');
const healthTooltipCount = document.getElementById('healthTooltipCount');
const healthTooltipPercentage = document.getElementById('healthTooltipPercentage');

// Add hover events to stacked bar segments
document.querySelectorAll('.stacked-bar > div').forEach(segment => {
    segment.addEventListener('mouseenter', function(e) {
        const parentBar = this.closest('.stacked-bar');
        const category = parentBar.getAttribute('data-category');
        const status = this.getAttribute('data-status');
        const count = this.getAttribute('data-count');
        const percentage = this.getAttribute('data-percentage');
        
        healthTooltipCategory.textContent = category;
        healthTooltipStatus.textContent = status;
        healthTooltipCount.textContent = count + ' units';
        healthTooltipPercentage.textContent = percentage;
        
        // Reset tooltip classes
        healthTooltipStatus.className = 'text-xs font-medium mb-2 px-2 py-1 rounded-full inline-block';
        
        // Style based on status
        if (status === 'Operational') {
            healthTooltipStatus.classList.add('bg-green-500/20', 'text-green-400');
        } else if (status === 'Scheduled Maintenance') {
            healthTooltipStatus.classList.add('bg-yellow-500/20', 'text-yellow-400');
        } else if (status === 'At Risk') {
            healthTooltipStatus.classList.add('bg-orange-500/20', 'text-orange-400');
        } else if (status === 'Out of Service') {
            healthTooltipStatus.classList.add('bg-red-500/20', 'text-red-400');
        }
        
        // Position tooltip
        const rect = this.getBoundingClientRect();
        const containerRect = this.closest('.relative').getBoundingClientRect();
        
        const x = rect.left - containerRect.left + rect.width / 2 - 128;
        const y = rect.top - containerRect.top - 100;
        
        healthTooltip.style.left = Math.max(10, x) + 'px';
        healthTooltip.style.top = Math.max(10, y) + 'px';
        healthTooltip.style.opacity = '1';
        healthTooltip.style.visibility = 'visible';
    });

    segment.addEventListener('mouseleave', function() {
        healthTooltip.style.opacity = '0';
        healthTooltip.style.visibility = 'hidden';
    });

    segment.addEventListener('click', function(e) {
        e.preventDefault();
        const parentBar = this.closest('.stacked-bar');
        const category = parentBar.getAttribute('data-category');
        const status = this.getAttribute('data-status');
        const count = this.getAttribute('data-count');
        const percentage = this.getAttribute('data-percentage');
        
        showWeaponSystemModal(status, count, percentage, category);
    });
});



// Weapon Effectiveness Simulation functionality
function initializeWeaponSimulation() {
    // Get elements with null checks
    const weaponSelect = document.getElementById('weaponSelect');
    const trainingLevel = document.getElementById('trainingLevel');
    const trainingValue = document.getElementById('trainingValue');
    const terrainType = document.getElementById('terrainType');
    const weatherConditions = document.getElementById('weatherConditions');
    const timeOfDay = document.getElementById('timeOfDay');
    const runSimulation = document.getElementById('runSimulation');
    const radarTooltip = document.getElementById('radarTooltip');
    const radarTooltipDimension = document.getElementById('radarTooltipDimension');
    const radarTooltipValue = document.getElementById('radarTooltipValue');

    // Check if required elements exist
    if (!weaponSelect || !trainingLevel) {
        console.warn('Weapon simulation elements not found - skipping initialization');
        return;
    }

    // Weapon system base stats
    const weaponStats = {
        m4a1: { accuracy: 75, range: 60, reliability: 85, speed: 80, impact: 65 },
        m777: { accuracy: 90, range: 95, reliability: 80, speed: 40, impact: 95 },
        m1a2: { accuracy: 85, range: 85, reliability: 90, speed: 60, impact: 95 },
        ah64: { accuracy: 80, range: 90, reliability: 75, speed: 95, impact: 85 },
        m249: { accuracy: 70, range: 70, reliability: 80, speed: 85, impact: 70 }
    };

    // Environmental modifiers
    const modifiers = {
        terrain: {
            urban: { accuracy: -5, range: -15, reliability: 0, speed: -10, impact: +5 },
            desert: { accuracy: +5, range: +10, reliability: -5, speed: +5, impact: 0 },
            forest: { accuracy: -10, range: -20, reliability: 0, speed: -15, impact: +10 },
            mountain: { accuracy: 0, range: +5, reliability: -10, speed: -20, impact: 0 },
            open: { accuracy: +10, range: +15, reliability: +5, speed: +10, impact: -5 }
        },
        weather: {
            clear: { accuracy: 0, range: 0, reliability: 0, speed: 0, impact: 0 },
            rain: { accuracy: -15, range: -10, reliability: -5, speed: -5, impact: -5 },
            fog: { accuracy: -20, range: -25, reliability: 0, speed: -10, impact: -10 },
            wind: { accuracy: -10, range: -5, reliability: 0, speed: 0, impact: -5 },
            extreme: { accuracy: -25, range: -20, reliability: -15, speed: -15, impact: -15 }
        },
        time: {
            day: { accuracy: 0, range: 0, reliability: 0, speed: 0, impact: 0 },
            dawn: { accuracy: -5, range: -5, reliability: 0, speed: 0, impact: 0 },
            night: { accuracy: -15, range: -10, reliability: 0, speed: -5, impact: +5 }
        }
    };

    // Update training level display
    trainingLevel.addEventListener('input', function() {
        const level = parseInt(this.value);
        let levelText = '';
        if (level <= 3) levelText = `Novice (${level}/10)`;
        else if (level <= 6) levelText = `Trained (${level}/10)`;
        else if (level <= 8) levelText = `Expert (${level}/10)`;
        else levelText = `Elite (${level}/10)`;
        
        if (trainingValue) {
            trainingValue.textContent = levelText;
        }
    });

    // Calculate performance scores
    function calculatePerformance() {
        const weapon = weaponSelect.value;
        const training = parseInt(trainingLevel.value);
        const terrain = terrainType.value;
        const weather = weatherConditions.value;
        const time = timeOfDay.value;

        const baseStats = weaponStats[weapon];
        const terrainMod = modifiers.terrain[terrain];
        const weatherMod = modifiers.weather[weather];
        const timeMod = modifiers.time[time];

        // Training multiplier (0.7 to 1.1)
        const trainingMultiplier = 0.7 + (training - 1) * 0.04;

        const performance = {};
        Object.keys(baseStats).forEach(stat => {
            let score = baseStats[stat];
            score += terrainMod[stat] || 0;
            score += weatherMod[stat] || 0;
            score += timeMod[stat] || 0;
            score *= trainingMultiplier;
            score = Math.max(0, Math.min(100, Math.round(score)));
            performance[stat] = score;
        });

        return performance;
    }

    // Update radar chart
    function updateRadarChart(performance) {
        const center = { x: 200, y: 200 };
        const maxRadius = 160;
        
        // Calculate points for pentagon (5 dimensions)
        const angles = [
            -Math.PI / 2,      // Accuracy (top)
            -Math.PI / 10,     // Range (top-right)
            Math.PI / 2,       // Reliability (bottom-right)
            Math.PI,           // Speed (bottom)
            -4 * Math.PI / 5   // Impact (bottom-left)
        ];

        const points = [];
        const dimensions = ['accuracy', 'range', 'reliability', 'speed', 'impact'];
        
        dimensions.forEach((dim, i) => {
            const value = performance[dim];
            const radius = (value / 100) * maxRadius;
            const x = center.x + radius * Math.cos(angles[i]);
            const y = center.y + radius * Math.sin(angles[i]);
            points.push(`${x},${y}`);
        });

        // Update polygon
        const currentPolygon = document.getElementById('currentPolygon');
        if (currentPolygon) {
            currentPolygon.setAttribute('points', points.join(' '));
        }

        // Update data points
        const currentPoints = document.getElementById('currentPoints');
        if (currentPoints) {
            const circles = currentPoints.querySelectorAll('circle');
            
            dimensions.forEach((dim, i) => {
                const value = performance[dim];
                const radius = (value / 100) * maxRadius;
                const x = center.x + radius * Math.cos(angles[i]);
                const y = center.y + radius * Math.sin(angles[i]);
                
                if (circles[i]) {
                    circles[i].setAttribute('cx', x);
                    circles[i].setAttribute('cy', y);
                    circles[i].setAttribute('data-value', value);
                }
            });
        }

        // Update score displays
        const accuracyScore = document.getElementById('accuracyScore');
        const rangeScore = document.getElementById('rangeScore');
        const reliabilityScore = document.getElementById('reliabilityScore');
        const speedScore = document.getElementById('speedScore');
        const impactScore = document.getElementById('impactScore');
        
        if (accuracyScore) accuracyScore.textContent = performance.accuracy + '%';
        if (rangeScore) rangeScore.textContent = performance.range + '%';
        if (reliabilityScore) reliabilityScore.textContent = performance.reliability + '%';
        if (speedScore) speedScore.textContent = performance.speed + '%';
        if (impactScore) impactScore.textContent = performance.impact + '%';

        // Update overall assessment
        const overall = Math.round((performance.accuracy + performance.range + performance.reliability + performance.speed + performance.impact) / 5);
        const overallScore = document.getElementById('overallScore');
        const missionSuccess = document.getElementById('missionSuccess');
        const optimalGap = document.getElementById('optimalGap');
        
        if (overallScore) overallScore.textContent = overall + '%';
        if (missionSuccess) missionSuccess.textContent = Math.min(95, overall + 15) + '%';
        if (optimalGap) optimalGap.textContent = (overall - 90) + '%';

        // Update recommendations
        updateRecommendations(performance);
    }

    // Update recommendations based on performance
    function updateRecommendations(performance) {
        const recommendations = document.getElementById('recommendations');
        if (!recommendations) return;

        recommendations.innerHTML = '';

        const issues = [];
        if (performance.accuracy < 70) issues.push({ type: 'accuracy', text: 'Increase training frequency to improve accuracy scores', color: 'yellow' });
        if (performance.range < 70) issues.push({ type: 'range', text: 'Consider alternative positioning for better range utilization', color: 'blue' });
        if (performance.reliability < 75) issues.push({ type: 'reliability', text: 'Schedule preventive maintenance to improve reliability', color: 'orange' });
        if (performance.speed < 65) issues.push({ type: 'speed', text: 'Review tactical procedures to optimize response times', color: 'purple' });
        if (performance.impact < 70) issues.push({ type: 'impact', text: 'Consider ammunition upgrades for enhanced effectiveness', color: 'red' });

        if (issues.length === 0) {
            issues.push({ text: 'All performance metrics are within acceptable parameters', color: 'green' });
        }

        issues.forEach(issue => {
            const div = document.createElement('div');
            div.className = `p-2 bg-${issue.color}-500/10 border border-${issue.color}-500/20 rounded`;
            div.innerHTML = `
                <div class="flex items-start space-x-2">
                    <div class="w-1.5 h-1.5 bg-${issue.color}-400 rounded-full mt-1.5"></div>
                    <div class="text-slate-300 text-xs">${issue.text}</div>
                </div>
            `;
            recommendations.appendChild(div);
        });
    }

    // Run simulation
    if (runSimulation) {
        runSimulation.addEventListener('click', function() {
            // Add loading state
            this.innerHTML = `
                <svg class="w-5 h-5 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                </svg>
                <span>Running Simulation...</span>
            `;
            this.disabled = true;

            // Simulate processing time
            setTimeout(() => {
                const performance = calculatePerformance();
                updateRadarChart(performance);

                // Reset button
                this.innerHTML = `
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h1m4 0h1m6-10V7a3 3 0 00-3-3H6a3 3 0 00-3 3v4a3 3 0 003 3h7m2 5.5V17a2 2 0 00-2-2H4a2 2 0 00-2 2v1.5a.5.5 0 00.5.5h11a.5.5 0 00.5-.5z"></path>
                    </svg>
                    <span>Run Simulation</span>
                `;
                this.disabled = false;
            }, 1500);
        });
    }

    // Radar chart tooltip functionality
    document.querySelectorAll('.radar-point').forEach(point => {
        point.addEventListener('mouseenter', function(e) {
            const dimension = this.getAttribute('data-dimension');
            const value = this.getAttribute('data-value');
            
            if (radarTooltipDimension) radarTooltipDimension.textContent = dimension;
            if (radarTooltipValue) radarTooltipValue.textContent = value + '%';
            
            // Position tooltip
            const rect = this.getBoundingClientRect();
            const container = this.closest('.relative');
            if (container) {
                const containerRect = container.getBoundingClientRect();
                
                const x = rect.left - containerRect.left + 10;
                const y = rect.top - containerRect.top - 60;
                
                if (radarTooltip) {
                    radarTooltip.style.left = Math.max(10, x) + 'px';
                    radarTooltip.style.top = Math.max(10, y) + 'px';
                    radarTooltip.style.opacity = '1';
                    radarTooltip.style.visibility = 'visible';
                }
            }
            
            // Enlarge point
            this.setAttribute('r', '6');
        });

        point.addEventListener('mouseleave', function() {
            if (radarTooltip) {
                radarTooltip.style.opacity = '0';
                radarTooltip.style.visibility = 'hidden';
            }
            
            // Reset point size
            this.setAttribute('r', '4');
        });
    });

    // Auto-update when parameters change
    [weaponSelect, terrainType, weatherConditions, timeOfDay].forEach(element => {
        if (element) {
            element.addEventListener('change', function() {
                const performance = calculatePerformance();
                updateRadarChart(performance);
            });
        }
    });

    if (trainingLevel) {
        trainingLevel.addEventListener('input', function() {
            const performance = calculatePerformance();
            updateRadarChart(performance);
        });
    }

    // Initialize with default values
    const initialPerformance = calculatePerformance();
    updateRadarChart(initialPerformance);
}

// Initialize the weapon simulation when the DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    initializeWeaponSimulation();
});

// Also try to initialize if DOM is already loaded
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initializeWeaponSimulation);
} else {
    initializeWeaponSimulation();
}

// Logistics Tab JavaScript Functions
(function() {
    'use strict';
    
    let currentView = 'category';
    let tooltip = null;

    // ============ INVENTORY & CONSUMPTION FUNCTIONS ============

    function switchChartView(view) {
        currentView = view;
        
        const categoryChart = document.getElementById('category-chart');
        const operationChart = document.getElementById('operation-chart');
        const categoryLegend = document.getElementById('category-legend');
        const operationLegend = document.getElementById('operation-legend');
        const categoryFilter = document.getElementById('category-filter');
        const operationFilter = document.getElementById('operation-filter');
        const yAxisLabels = document.getElementById('y-axis-labels');
        
        if (!categoryChart || !operationChart) return;
        
        if (view === 'category') {
            categoryChart.classList.remove('hidden');
            operationChart.classList.add('hidden');
            categoryLegend.classList.remove('hidden');
            operationLegend.classList.add('hidden');
            
            if (categoryFilter && operationFilter) {
                categoryFilter.className = 'px-4 py-2 text-sm font-medium rounded-md bg-blue-600 text-white transition-all duration-300';
                operationFilter.className = 'px-4 py-2 text-sm font-medium rounded-md text-slate-300 hover:text-white transition-all duration-300';
            }
            
            if (yAxisLabels) {
                yAxisLabels.innerHTML = `
                    <span>100%</span>
                    <span>75%</span>
                    <span>50%</span>
                    <span>25%</span>
                    <span>0%</span>
                `;
            }
        } else {
            categoryChart.classList.add('hidden');
            operationChart.classList.remove('hidden');
            categoryLegend.classList.add('hidden');
            operationLegend.classList.remove('hidden');
            
            if (operationFilter && categoryFilter) {
                operationFilter.className = 'px-4 py-2 text-sm font-medium rounded-md bg-blue-600 text-white transition-all duration-300';
                categoryFilter.className = 'px-4 py-2 text-sm font-medium rounded-md text-slate-300 hover:text-white transition-all duration-300';
            }
            
            if (yAxisLabels) {
                yAxisLabels.innerHTML = `
                    <span>1000</span>
                    <span>750</span>
                    <span>500</span>
                    <span>250</span>
                    <span>0</span>
                `;
            }
        }
    }

    function getCurrentView() {
        return currentView === 'category' ? 'inventory-category' : 'inventory-operation';
    }

    function showStockTooltip(event, category, usedPercent, availablePercent, usedAmount, availableAmount) {
        hideTooltip();
        
        tooltip = document.createElement('div');
        tooltip.className = 'fixed bg-slate-900/95 backdrop-blur-sm border border-blue-500/30 rounded-lg p-3 shadow-2xl z-[200] pointer-events-none';
        tooltip.innerHTML = `
            <div class="text-blue-400 text-xs font-semibold mb-1">${category} Stock Analysis</div>
            <div class="space-y-1">
                <div class="flex items-center justify-between space-x-4">
                    <div class="flex items-center space-x-2">
                        <div class="w-3 h-3 bg-red-500 rounded"></div>
                        <span class="text-red-300 text-sm">Used:</span>
                    </div>
                    <span class="text-white text-sm font-medium">${usedPercent}% (${usedAmount})</span>
                </div>
                <div class="flex items-center justify-between space-x-4">
                    <div class="flex items-center space-x-2">
                        <div class="w-3 h-3 ${availablePercent < 50 ? 'bg-red-400' : availablePercent < 75 ? 'bg-yellow-500' : 'bg-green-500'} rounded"></div>
                        <span class="${availablePercent < 50 ? 'text-red-300' : availablePercent < 75 ? 'text-yellow-300' : 'text-green-300'} text-sm">Available:</span>
                    </div>
                    <span class="text-white text-sm font-medium">${availablePercent}% (${availableAmount})</span>
                </div>
            </div>
            ${availablePercent < 50 ? '<div class="text-red-300 text-xs mt-2 pt-2 border-t border-red-500/20">⚠️ Critical stock level</div>' : ''}
        `;
        
        const rect = event.target.getBoundingClientRect();
        const x = rect.left + rect.width / 2;
        const y = rect.top - 10;
        
        tooltip.style.left = x + 'px';
        tooltip.style.top = y + 'px';
        tooltip.style.transform = 'translate(-50%, -100%)';
        
        document.body.appendChild(tooltip);
    }

    function showTooltip(event, title, value1, value2, description) {
        hideTooltip();
        
        tooltip = document.createElement('div');
        tooltip.className = 'fixed bg-slate-900/95 backdrop-blur-sm border border-blue-500/30 rounded-lg p-3 shadow-2xl z-[200] pointer-events-none';
        tooltip.innerHTML = `
            <div class="text-blue-400 text-xs font-semibold mb-1">${title}</div>
            <div class="text-white text-sm font-medium mb-1">${value1}</div>
            <div class="text-slate-300 text-xs mb-1">${value2}</div>
            <div class="text-slate-400 text-xs">${description}</div>
        `;
        
        const rect = event.target.getBoundingClientRect();
        const x = rect.left + rect.width / 2;
        const y = rect.top - 10;
        
        tooltip.style.left = x + 'px';
        tooltip.style.top = y + 'px';
        tooltip.style.transform = 'translate(-50%, -100%)';
        
        document.body.appendChild(tooltip);
    }

    function showOperationTooltip(event, operationType) {
        hideTooltip();
        
        const operationData = {
            training: {
                title: 'Training Operations - Complete Breakdown',
                total: '680 units',
                items: [
                    { name: 'Food', units: '200 units', percentage: '29%', color: 'text-green-400', description: 'MREs, Field rations, Training meals' },
                    { name: 'Fuel', units: '160 units', percentage: '24%', color: 'text-blue-400', description: 'Training vehicle fuel, Generator fuel' },
                    { name: 'Equipment', units: '240 units', percentage: '35%', color: 'text-yellow-400', description: 'Training gear, Simulators, Practice weapons' },
                    { name: 'Medicine', units: '80 units', percentage: '12%', color: 'text-red-400', description: 'Training medical kits, First aid supplies' }
                ]
            },
            mission: {
                title: 'Mission Operations - Complete Breakdown',
                total: '920 units',
                items: [
                    { name: 'Food', units: '320 units', percentage: '35%', color: 'text-green-400', description: 'Combat rations, Water, Emergency food' },
                    { name: 'Fuel', units: '280 units', percentage: '30%', color: 'text-blue-400', description: 'Aviation fuel, Vehicle fuel, Backup reserves' },
                    { name: 'Equipment', units: '200 units', percentage: '22%', color: 'text-yellow-400', description: 'Weapons, Electronics, Communication gear' },
                    { name: 'Medicine', units: '120 units', percentage: '13%', color: 'text-red-400', description: 'Combat medical supplies, Emergency kits' }
                ]
            }
        };
        
        const data = operationData[operationType];
        
        let itemsHTML = '';
        data.items.forEach(item => {
            itemsHTML += `
                <div class="flex items-center justify-between mb-2 pb-2 border-b border-slate-700/50 last:border-b-0 last:mb-0 last:pb-0">
                    <div class="flex items-center space-x-2">
                        <div class="w-3 h-3 rounded-full ${item.color.replace('text-', 'bg-')}"></div>
                        <span class="${item.color} text-sm font-medium">${item.name}</span>
                    </div>
                    <div class="text-right">
                        <div class="text-white text-sm font-semibold">${item.units}</div>
                        <div class="text-slate-400 text-xs">${item.percentage}</div>
                    </div>
                </div>
                <div class="text-slate-300 text-xs mb-3 ml-5">${item.description}</div>
            `;
        });
        
        tooltip = document.createElement('div');
        tooltip.className = 'fixed bg-slate-900/95 backdrop-blur-sm border border-blue-500/30 rounded-lg p-4 shadow-2xl z-[200] pointer-events-none max-w-sm';
        tooltip.innerHTML = `
            <div class="text-blue-400 text-sm font-semibold mb-2">${data.title}</div>
            <div class="text-white text-lg font-bold mb-3 text-center">${data.total}</div>
            <div class="space-y-1">
                ${itemsHTML}
            </div>
            <div class="absolute top-1/2 left-0 transform -translate-y-1/2 -translate-x-full">
                <div class="w-0 h-0 border-t-4 border-b-4 border-r-4 border-t-transparent border-b-transparent border-r-blue-500/30"></div>
            </div>
        `;
        
        const rect = event.currentTarget.getBoundingClientRect();
        const isTrainingBar = operationType === 'training';
        let x, y;
        
        if (isTrainingBar) {
            x = rect.left - 20;
            y = rect.top + rect.height / 2;
            tooltip.style.transform = 'translate(-100%, -50%)';
        } else {
            x = rect.right + 20;
            y = rect.top + rect.height / 2;
            tooltip.style.transform = 'translate(0%, -50%)';
            
            tooltip.innerHTML = tooltip.innerHTML.replace(
                'border-r-blue-500/30',
                'border-l-blue-500/30'
            ).replace(
                'left-0 transform -translate-y-1/2 -translate-x-full',
                'right-0 transform -translate-y-1/2 translate-x-full'
            ).replace(
                'border-t-4 border-b-4 border-r-4 border-t-transparent border-b-transparent',
                'border-t-4 border-b-4 border-l-4 border-t-transparent border-b-transparent'
            );
        }
        
        tooltip.style.left = x + 'px';
        tooltip.style.top = y + 'px';
        
        document.body.appendChild(tooltip);
    }

    function hideTooltip() {
        if (tooltip) {
            tooltip.remove();
            tooltip = null;
        }
    }

    function showDrillThrough(metric) {
        let title = '';
        let content = '';
        
        switch(metric) {
            case 'inventory-category':
                title = 'Inventory by Category - KPI Dashboard';
                content = `
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <!-- Food KPI Card -->
                        <div class="glass-panel rounded-lg p-4 border border-green-500/30">
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center space-x-2">
                                    <div class="text-2xl">🍽️</div>
                                    <h4 class="text-green-400 font-semibold">FOOD SUPPLIES</h4>
                                </div>
                                <div class="text-2xl font-bold text-green-400">87%</div>
                            </div>
                            <div class="space-y-2">
                                <div class="flex justify-between text-sm">
                                    <span class="text-slate-300">MREs</span>
                                    <span class="text-white font-medium">2,340 units</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-slate-300">Fresh rations</span>
                                    <span class="text-white font-medium">890 units</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-slate-300">Water</span>
                                    <span class="text-white font-medium">15,600 gal</span>
                                </div>
                            </div>
                            <div class="mt-3 pt-3 border-t border-green-500/20">
                                <div class="text-xs text-green-300">✓ Optimal stock levels</div>
                            </div>
                        </div>

                        <!-- Fuel KPI Card -->
                        <div class="glass-panel rounded-lg p-4 border border-blue-500/30">
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center space-x-2">
                                    <div class="text-2xl">⛽</div>
                                    <h4 class="text-blue-400 font-semibold">FUEL RESERVES</h4>
                                </div>
                                <div class="text-2xl font-bold text-blue-400">65%</div>
                            </div>
                            <div class="space-y-2">
                                <div class="flex justify-between text-sm">
                                    <span class="text-slate-300">JP-8</span>
                                    <span class="text-white font-medium">45,000 gal</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-slate-300">Diesel</span>
                                    <span class="text-white font-medium">23,400 gal</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-slate-300">Gasoline</span>
                                    <span class="text-white font-medium">12,800 gal</span>
                                </div>
                            </div>
                            <div class="mt-3 pt-3 border-t border-blue-500/20">
                                <div class="text-xs text-blue-300">⚠️ Monitor consumption rate</div>
                            </div>
                        </div>

                        <!-- Equipment KPI Card -->
                        <div class="glass-panel rounded-lg p-4 border border-yellow-500/30">
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center space-x-2">
                                    <div class="text-2xl">🔧</div>
                                    <h4 class="text-yellow-400 font-semibold">EQUIPMENT</h4>
                                </div>
                                <div class="text-2xl font-bold text-yellow-400">75%</div>
                            </div>
                            <div class="space-y-2">
                                <div class="flex justify-between text-sm">
                                    <span class="text-slate-300">Vehicles</span>
                                    <span class="text-white font-medium">156 operational</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-slate-300">Communications</span>
                                    <span class="text-white font-medium">89% ready</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-slate-300">Weapons systems</span>
                                    <span class="text-white font-medium">94% operational</span>
                                </div>
                            </div>
                            <div class="mt-3 pt-3 border-t border-yellow-500/20">
                                <div class="text-xs text-yellow-300">✓ Good operational status</div>
                            </div>
                        </div>

                        <!-- Medical KPI Card -->
                        <div class="glass-panel rounded-lg p-4 border border-red-500/30 status-glow-red">
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center space-x-2">
                                    <div class="text-2xl">🏥</div>
                                    <h4 class="text-red-400 font-semibold">MEDICAL</h4>
                                </div>
                                <div class="text-2xl font-bold text-red-400">35%</div>
                            </div>
                            <div class="space-y-2">
                                <div class="flex justify-between text-sm">
                                    <span class="text-slate-300">Class VIII supplies</span>
                                    <span class="text-red-300 font-medium">18 days left</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-slate-300">Blood products</span>
                                    <span class="text-red-300 font-medium">7 days left</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-slate-300">Status</span>
                                    <span class="text-red-400 font-medium">CRITICAL</span>
                                </div>
                            </div>
                            <div class="mt-3 pt-3 border-t border-red-500/20">
                                <div class="text-xs text-red-300">🚨 Emergency resupply requested</div>
                            </div>
                        </div>
                    </div>
                `;
                break;
            case 'inventory-operation':
                title = 'Inventory by Operation Type - KPI Dashboard';
                content = `
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Training Operations KPI Card -->
                        <div class="glass-panel rounded-lg p-5 border border-blue-500/30">
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center space-x-3">
                                    <div class="text-3xl">🎯</div>
                                    <h4 class="text-blue-400 font-bold text-lg">TRAINING OPS</h4>
                                </div>
                                <div class="text-3xl font-bold text-blue-400">680</div>
                            </div>
                            <div class="grid grid-cols-2 gap-3 mb-4">
                                <div class="bg-slate-800/50 rounded-lg p-3">
                                    <div class="flex items-center space-x-2 mb-1">
                                        <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                                        <span class="text-green-400 text-sm font-medium">Food</span>
                                    </div>
                                    <div class="text-white font-bold">200 units</div>
                                    <div class="text-slate-400 text-xs">29%</div>
                                </div>
                                <div class="bg-slate-800/50 rounded-lg p-3">
                                    <div class="flex items-center space-x-2 mb-1">
                                        <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
                                        <span class="text-blue-400 text-sm font-medium">Fuel</span>
                                    </div>
                                    <div class="text-white font-bold">160 units</div>
                                    <div class="text-slate-400 text-xs">24%</div>
                                </div>
                                <div class="bg-slate-800/50 rounded-lg p-3">
                                    <div class="flex items-center space-x-2 mb-1">
                                        <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                                        <span class="text-yellow-400 text-sm font-medium">Equipment</span>
                                    </div>
                                    <div class="text-white font-bold">240 units</div>
                                    <div class="text-slate-400 text-xs">35%</div>
                                </div>
                                <div class="bg-slate-800/50 rounded-lg p-3">
                                    <div class="flex items-center space-x-2 mb-1">
                                        <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                                        <span class="text-red-400 text-sm font-medium">Medicine</span>
                                    </div>
                                    <div class="text-white font-bold">80 units</div>
                                    <div class="text-slate-400 text-xs">12%</div>
                                </div>
                            </div>
                            <div class="pt-3 border-t border-blue-500/20">
                                <div class="text-xs text-blue-300">✓ 92% resource utilization efficiency</div>
                            </div>
                        </div>

                        <!-- Mission Operations KPI Card -->
                        <div class="glass-panel rounded-lg p-5 border border-green-500/30">
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center space-x-3">
                                    <div class="text-3xl">⚔️</div>
                                    <h4 class="text-green-400 font-bold text-lg">MISSION OPS</h4>
                                </div>
                                <div class="text-3xl font-bold text-green-400">920</div>
                            </div>
                            <div class="grid grid-cols-2 gap-3 mb-4">
                                <div class="bg-slate-800/50 rounded-lg p-3">
                                    <div class="flex items-center space-x-2 mb-1">
                                        <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                                        <span class="text-green-400 text-sm font-medium">Food</span>
                                    </div>
                                    <div class="text-white font-bold">320 units</div>
                                    <div class="text-slate-400 text-xs">35%</div>
                                </div>
                                <div class="bg-slate-800/50 rounded-lg p-3">
                                    <div class="flex items-center space-x-2 mb-1">
                                        <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
                                        <span class="text-blue-400 text-sm font-medium">Fuel</span>
                                    </div>
                                    <div class="text-white font-bold">280 units</div>
                                    <div class="text-slate-400 text-xs">30%</div>
                                </div>
                                <div class="bg-slate-800/50 rounded-lg p-3">
                                    <div class="flex items-center space-x-2 mb-1">
                                        <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                                        <span class="text-yellow-400 text-sm font-medium">Equipment</span>
                                    </div>
                                    <div class="text-white font-bold">200 units</div>
                                    <div class="text-slate-400 text-xs">22%</div>
                                </div>
                                <div class="bg-slate-800/50 rounded-lg p-3">
                                    <div class="flex items-center space-x-2 mb-1">
                                        <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                                        <span class="text-red-400 text-sm font-medium">Medicine</span>
                                    </div>
                                    <div class="text-white font-bold">120 units</div>
                                    <div class="text-slate-400 text-xs">13%</div>
                                </div>
                            </div>
                            <div class="pt-3 border-t border-green-500/20">
                                <div class="text-xs text-green-300">⚡ 57% of total inventory allocation</div>
                            </div>
                        </div>
                    </div>
                `;
                break;
            default:
                title = 'Detailed Analysis';
                content = '<div class="text-slate-300 text-sm">Loading comprehensive data view...</div>';
        }
        
        // Create detailed drill-through modal
        const modal = document.createElement('div');
        modal.className = 'fixed inset-0 bg-black/50 backdrop-blur-sm z-[300] flex items-center justify-center p-4';
        modal.innerHTML = `
            <div class="bg-slate-900/95 backdrop-blur-sm border border-blue-500/30 rounded-lg p-6 max-w-6xl w-full shadow-2xl max-h-[90vh] overflow-y-auto">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-blue-400 text-xl font-bold">${title}</h3>
                    <button onclick="this.closest('.fixed').remove()" class="text-slate-400 hover:text-white transition-colors">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
                        </svg>
                    </button>
                </div>
                <div class="text-white">${content}</div>
                <div class="mt-6 flex justify-end">
                    <button onclick="this.closest('.fixed').remove()" class="px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium">
                        Close Dashboard
                    </button>
                </div>
            </div>
        `;
        
        document.body.appendChild(modal);
    }

    // ============ DELIVERY TRACKING FUNCTIONS ============

    function showConvoyTooltip(event, convoyId, status, route, cargo, details) {
        hideTooltip();
        
        let statusColor = 'text-green-400';
        let statusBg = 'border-green-500/30';
        if (status === 'Delayed') {
            statusColor = 'text-yellow-400';
            statusBg = 'border-yellow-500/30';
        } else if (status === 'At Risk') {
            statusColor = 'text-red-400';
            statusBg = 'border-red-500/30';
        }
        
        tooltip = document.createElement('div');
        tooltip.className = `fixed bg-slate-900/95 backdrop-blur-sm ${statusBg} rounded-lg p-4 shadow-2xl z-[200] pointer-events-none max-w-sm`;
        tooltip.innerHTML = `
            <div class="flex items-center justify-between mb-2">
                <div class="${statusColor} text-sm font-bold">${convoyId}</div>
                <div class="${statusColor} text-xs font-medium">${status}</div>
            </div>
            <div class="space-y-2">
                <div class="flex items-center space-x-2">
                    <svg class="w-4 h-4 text-blue-400" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"/>
                    </svg>
                    <span class="text-slate-300 text-sm">${route}</span>
                </div>
                <div class="flex items-center space-x-2">
                    <svg class="w-4 h-4 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
                    </svg>
                    <span class="text-slate-300 text-sm">${cargo}</span>
                </div>
                <div class="pt-2 border-t border-slate-700">
                    <div class="text-slate-400 text-xs">${details}</div>
                </div>
            </div>
        `;
        
        const rect = event.target.getBoundingClientRect();
        const x = rect.left + rect.width / 2;
        const y = rect.top - 10;
        
        tooltip.style.left = x + 'px';
        tooltip.style.top = y + 'px';
        tooltip.style.transform = 'translate(-50%, -100%)';
        
        document.body.appendChild(tooltip);
    }

    function showGanttTooltip(event, convoyId, route, cargo, plannedTime, progress, status) {
        hideTooltip();
        
        let statusColor = 'text-green-400';
        let statusBg = 'border-green-500/30';
        if (status.includes('delay') || status.includes('Traffic')) {
            statusColor = 'text-yellow-400';
            statusBg = 'border-yellow-500/30';
        } else if (status.includes('breakdown') || status.includes('At Risk')) {
            statusColor = 'text-red-400';
            statusBg = 'border-red-500/30';
        }
        
        tooltip = document.createElement('div');
        tooltip.className = `fixed bg-slate-900/95 backdrop-blur-sm ${statusBg} rounded-lg p-4 shadow-2xl z-[200] pointer-events-none max-w-sm`;
        tooltip.innerHTML = `
            <div class="flex items-center justify-between mb-2">
                <div class="${statusColor} text-sm font-bold">${convoyId}</div>
                <div class="${statusColor} text-xs font-medium">${progress}</div>
            </div>
            <div class="space-y-2">
                <div class="flex items-center space-x-2">
                    <svg class="w-4 h-4 text-blue-400" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"/>
                    </svg>
                    <span class="text-slate-300 text-sm">${route}</span>
                </div>
                <div class="flex items-center space-x-2">
                    <svg class="w-4 h-4 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
                    </svg>
                    <span class="text-slate-300 text-sm">${cargo}</span>
                </div>
                <div class="flex items-center space-x-2">
                    <svg class="w-4 h-4 text-purple-400" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"/>
                    </svg>
                    <span class="text-slate-300 text-sm">${plannedTime}</span>
                </div>
                <div class="pt-2 border-t border-slate-700">
                    <div class="${statusColor} text-xs font-medium">${status}</div>
                </div>
            </div>
        `;
        
        const rect = event.target.getBoundingClientRect();
        const x = rect.left + rect.width / 2;
        const y = rect.top - 10;
        
        tooltip.style.left = x + 'px';
        tooltip.style.top = y + 'px';
        tooltip.style.transform = 'translate(-50%, -100%)';
        
        document.body.appendChild(tooltip);
    }

    function refreshConvoyData(event) {
        const button = event.target.closest('button');
        const now = new Date();
        const timeString = now.toLocaleTimeString('en-US', { 
            hour12: false,
            hour: '2-digit',
            minute: '2-digit'
        });
        
        const updateElement = document.getElementById('last-update');
        if (updateElement) {
            updateElement.textContent = `Updated ${timeString}`;
        }
        
        if (button) {
            button.style.transform = 'rotate(360deg)';
            button.style.transition = 'transform 0.5s ease';
            setTimeout(() => {
                button.style.transform = 'rotate(0deg)';
            }, 500);
        }
    }

    function toggleMapView(event) {
        const button = event.target.closest('button');
        if (button) {
            button.style.backgroundColor = 'rgba(59, 130, 246, 0.8)';
            setTimeout(() => {
                button.style.backgroundColor = '';
            }, 200);
        }
    }

    // ============ PREDICTIVE LOGISTICS FUNCTIONS ============

    let currentForecastPeriod = '30d';
    let visibleForecastCategories = {
        food: true,
        fuel: true,
        equipment: true,
        medical: true
    };

    function switchForecastPeriod(period) {
        currentForecastPeriod = period;
        
        const forecast7d = document.getElementById('forecast-7d');
        const forecast30d = document.getElementById('forecast-30d');
        const forecast90d = document.getElementById('forecast-90d');
        
        if (forecast7d && forecast30d && forecast90d) {
            forecast7d.className = 'px-3 py-1 text-sm font-medium rounded-md text-slate-300 hover:text-white transition-all duration-300';
            forecast30d.className = 'px-3 py-1 text-sm font-medium rounded-md text-slate-300 hover:text-white transition-all duration-300';
            forecast90d.className = 'px-3 py-1 text-sm font-medium rounded-md text-slate-300 hover:text-white transition-all duration-300';
            
            document.getElementById('forecast-' + period).className = 'px-3 py-1 text-sm font-medium rounded-md bg-purple-600 text-white transition-all duration-300';
        }
        
        updateForecastChart(period);
    }

    function toggleForecastCategory(category) {
        visibleForecastCategories[category] = !visibleForecastCategories[category];
        
        const button = document.getElementById('toggle-' + category);
        if (!button) return;
        
        const colors = {
            food: 'green',
            fuel: 'blue', 
            equipment: 'yellow',
            medical: 'red'
        };
        
        if (visibleForecastCategories[category]) {
            button.className = `px-2 py-1 bg-${colors[category]}-600 text-white text-xs rounded font-medium transition-all duration-300`;
        } else {
            button.className = `px-2 py-1 bg-slate-600 text-slate-300 text-xs rounded font-medium transition-all duration-300`;
        }
        
        const forecastLine = document.getElementById(category + '-forecast');
        if (forecastLine) {
            forecastLine.style.display = visibleForecastCategories[category] ? 'block' : 'none';
        }
    }

    function updateForecastChart(period) {
        const xAxis = document.getElementById('x-axis-forecast-30d');
        if (!xAxis) return;
        
        switch(period) {
            case '7d':
                xAxis.innerHTML = `
                    <text x="50" y="300" fill="#94a3b8" font-size="10" font-family="monospace">Today</text>
                    <text x="200" y="300" fill="#94a3b8" font-size="10" font-family="monospace">Day 1</text>
                    <text x="350" y="300" fill="#94a3b8" font-size="10" font-family="monospace">Day 3</text>
                    <text x="500" y="300" fill="#94a3b8" font-size="10" font-family="monospace">Day 5</text>
                    <text x="650" y="300" fill="#94a3b8" font-size="10" font-family="monospace">Day 7</text>
                `;
                break;
            case '30d':
                xAxis.innerHTML = `
                    <text x="50" y="300" fill="#94a3b8" font-size="10" font-family="monospace">Today</text>
                    <text x="150" y="300" fill="#94a3b8" font-size="10" font-family="monospace">Week 1</text>
                    <text x="300" y="300" fill="#94a3b8" font-size="10" font-family="monospace">Week 2</text>
                    <text x="450" y="300" fill="#94a3b8" font-size="10" font-family="monospace">Week 3</text>
                    <text x="600" y="300" fill="#94a3b8" font-size="10" font-family="monospace">Week 4</text>
                    <text x="750" y="300" fill="#94a3b8" font-size="10" font-family="monospace">30 Days</text>
                `;
                break;
            case '90d':
                xAxis.innerHTML = `
                    <text x="50" y="300" fill="#94a3b8" font-size="10" font-family="monospace">Today</text>
                    <text x="200" y="300" fill="#94a3b8" font-size="10" font-family="monospace">Month 1</text>
                    <text x="400" y="300" fill="#94a3b8" font-size="10" font-family="monospace">Month 2</text>
                    <text x="600" y="300" fill="#94a3b8" font-size="10" font-family="monospace">Month 3</text>
                    <text x="750" y="300" fill="#94a3b8" font-size="10" font-family="monospace">90 Days</text>
                `;
                break;
        }
    }

    function showForecastTooltip(event, category, timepoint, level, type, status) {
        hideTooltip();
        
        let categoryColor = 'text-green-400';
        let borderColor = 'border-green-500/30';
        
        switch(category.toLowerCase()) {
            case 'fuel':
                categoryColor = 'text-blue-400';
                borderColor = 'border-blue-500/30';
                break;
            case 'equipment':
                categoryColor = 'text-yellow-400';
                borderColor = 'border-yellow-500/30';
                break;
            case 'medical':
                categoryColor = 'text-red-400';
                borderColor = 'border-red-500/30';
                break;
        }
        
        tooltip = document.createElement('div');
        tooltip.className = `fixed bg-slate-900/95 backdrop-blur-sm ${borderColor} rounded-lg p-4 shadow-2xl z-[200] pointer-events-none max-w-sm`;
        tooltip.innerHTML = `
            <div class="flex items-center justify-between mb-2">
                <div class="${categoryColor} text-sm font-bold">${category} Forecast</div>
                <div class="${categoryColor} text-xs font-medium">${type}</div>
            </div>
            <div class="space-y-2">
                <div class="flex items-center justify-between">
                    <span class="text-slate-300 text-sm">Time:</span>
                    <span class="text-white text-sm font-medium">${timepoint}</span>
                </div>
                <div class="flex items-center justify-between">
                    <span class="text-slate-300 text-sm">Stock Level:</span>
                    <span class="text-white text-lg font-bold">${level}</span>
                </div>
                <div class="pt-2 border-t border-slate-700">
                    <div class="text-slate-400 text-xs">${status}</div>
                </div>
                ${type === 'Predicted' ? '<div class="text-purple-300 text-xs mt-1">📊 AI Prediction</div>' : ''}
            </div>
        `;
        
        const rect = event.target.getBoundingClientRect();
        const x = rect.left + rect.width / 2;
        const y = rect.top - 10;
        
        tooltip.style.left = x + 'px';
        tooltip.style.top = y + 'px';
        tooltip.style.transform = 'translate(-50%, -100%)';
        
        document.body.appendChild(tooltip);
    }

    // ============ RISK ANALYSIS FUNCTIONS ============

    let currentRiskLayer = 'terrain';

    function toggleRiskLayer(layer) {
        const terrainLayer = document.getElementById('terrain-layer');
        const weatherLayer = document.getElementById('weather-layer');
        const threatLayer = document.getElementById('threat-layer');
        
        if (terrainLayer) terrainLayer.style.display = 'none';
        if (weatherLayer) weatherLayer.style.display = 'none';
        if (threatLayer) threatLayer.style.display = 'none';
        
        const terrainToggle = document.getElementById('terrain-toggle');
        const weatherToggle = document.getElementById('weather-toggle');
        const threatToggle = document.getElementById('threat-toggle');
        
        if (terrainToggle && weatherToggle && threatToggle) {
            terrainToggle.className = 'px-3 py-1 bg-slate-600 text-slate-300 text-xs rounded-lg font-medium transition-all duration-300';
            weatherToggle.className = 'px-3 py-1 bg-slate-600 text-slate-300 text-xs rounded-lg font-medium transition-all duration-300';
            threatToggle.className = 'px-3 py-1 bg-slate-600 text-slate-300 text-xs rounded-lg font-medium transition-all duration-300';
        }
        
        currentRiskLayer = layer;
        const currentLayer = document.getElementById(layer + '-layer');
        if (currentLayer) {
            currentLayer.style.display = 'block';
        }
        
        let layerText = '';
        let buttonColor = '';
        
        switch(layer) {
            case 'terrain':
                layerText = 'TERRAIN ANALYSIS';
                buttonColor = 'px-3 py-1 bg-amber-600 text-white text-xs rounded-lg font-medium transition-all duration-300';
                break;
            case 'weather':
                layerText = 'WEATHER ANALYSIS';
                buttonColor = 'px-3 py-1 bg-blue-600 text-white text-xs rounded-lg font-medium transition-all duration-300';
                break;
            case 'threat':
                layerText = 'THREAT ANALYSIS';
                buttonColor = 'px-3 py-1 bg-red-600 text-white text-xs rounded-lg font-medium transition-all duration-300';
                break;
        }
        
        const layerToggle = document.getElementById(layer + '-toggle');
        if (layerToggle) {
            layerToggle.className = buttonColor;
        }
        
        const currentLayerText = document.getElementById('current-layer-text');
        if (currentLayerText) {
            currentLayerText.textContent = layerText;
        }
    }

    function highlightRiskZone(element) {
        if (element) {
            element.style.filter = 'brightness(1.3) drop-shadow(0 0 10px rgba(255,255,255,0.5))';
            element.style.transform = 'scale(1.05)';
            element.style.transformOrigin = 'center';
        }
    }

    function unhighlightRiskZone(element) {
        if (element) {
            element.style.filter = '';
            element.style.transform = '';
        }
    }

    function showRiskDetails(zoneId, riskType, riskLevel, location, description) {
        const existingModal = document.querySelector('.risk-detail-modal');
        if (existingModal) {
            existingModal.remove();
        }
        
        let riskColor = 'text-green-400';
        let borderColor = 'border-green-500/30';
        let bgColor = 'bg-green-900/20';
        
        if (riskLevel === 'MEDIUM') {
            riskColor = 'text-yellow-400';
            borderColor = 'border-yellow-500/30';
            bgColor = 'bg-yellow-900/20';
        } else if (riskLevel === 'HIGH') {
            riskColor = 'text-red-400';
            borderColor = 'border-red-500/30';
            bgColor = 'bg-red-900/20';
        }
        
        const modal = document.createElement('div');
        modal.className = 'risk-detail-modal fixed inset-0 bg-black/50 backdrop-blur-sm z-[300] flex items-center justify-center p-4';
        modal.innerHTML = `
            <div class="bg-slate-900/95 backdrop-blur-sm ${borderColor} rounded-lg p-6 max-w-2xl w-full shadow-2xl">
                <div class="flex items-center justify-between mb-6">
                    <div class="flex items-center space-x-3">
                        <div class="w-4 h-4 ${riskColor.replace('text-', 'bg-')} rounded-full"></div>
                        <h3 class="${riskColor} text-xl font-bold">${riskType} - ${riskLevel} RISK</h3>
                    </div>
                    <button onclick="this.closest('.risk-detail-modal').remove()" class="text-slate-400 hover:text-white transition-colors">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
                        </svg>
                    </button>
                </div>
                
                <div class="space-y-4">
                    <div class="${bgColor} ${borderColor} rounded-lg p-4">
                        <div class="flex items-center space-x-2 mb-2">
                            <svg class="w-5 h-5 text-blue-400" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"/>
                            </svg>
                            <span class="text-blue-400 font-semibold">Location</span>
                        </div>
                        <div class="text-white text-lg font-medium">${location}</div>
                    </div>
                    
                    <div class="bg-slate-800/50 border border-slate-600/50 rounded-lg p-4">
                        <div class="flex items-center space-x-2 mb-2">
                            <svg class="w-5 h-5 text-slate-400" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
                            </svg>
                            <span class="text-slate-400 font-semibold">Risk Factors</span>
                        </div>
                        <div class="text-slate-300">${description}</div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-blue-900/30 border border-blue-500/30 rounded-lg p-4">
                            <div class="text-blue-400 font-semibold mb-2">Recommended Actions</div>
                            <ul class="text-slate-300 text-sm space-y-1">
                                <li>• Use alternative routes when possible</li>
                                <li>• Monitor conditions closely</li>
                                <li>• Maintain communication protocols</li>
                                <li>• Deploy additional resources if needed</li>
                            </ul>
                        </div>
                        
                        <div class="bg-purple-900/30 border border-purple-500/30 rounded-lg p-4">
                            <div class="text-purple-400 font-semibold mb-2">Monitoring Status</div>
                            <div class="text-slate-300 text-sm">
                                Active monitoring in place. Regular updates every 15 minutes.
                                Emergency protocols ready if conditions worsen.
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="mt-6 flex justify-end space-x-3">
                    <button onclick="this.closest('.risk-detail-modal').remove()" class="px-4 py-2 bg-slate-600 hover:bg-slate-700 text-white rounded-lg transition-colors">
                        Close
                    </button>
                    <button class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors">
                        View Full Report
                    </button>
                </div>
            </div>
        `;
        
        document.body.appendChild(modal);
    }

    function refreshRiskData(event) {
        const button = event.target.closest('button');
        if (button) {
            button.style.transform = 'rotate(360deg)';
            button.style.transition = 'transform 0.5s ease';
            setTimeout(() => {
                button.style.transform = 'rotate(0deg)';
            }, 500);
        }
    }

    function toggleFullscreen(event) {
        const button = event.target.closest('button');
        if (button) {
            button.style.backgroundColor = 'rgba(59, 130, 246, 0.8)';
            setTimeout(() => {
                button.style.backgroundColor = '';
            }, 200);
        }
    }

    // ============ INITIALIZATION ============

    function initializeLogistics() {
        // Set default view for inventory chart
        switchChartView('category');
        
        // Set default view for risk analysis
        toggleRiskLayer('terrain');
        
        // Initialize forecast period
        switchForecastPeriod('30d');
        
        console.log('Logistics tab initialized');
    }

    // Initialize when DOM is ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initializeLogistics);
    } else {
        initializeLogistics();
    }

    // Update convoy positions periodically
    setInterval(() => {
        const updateElement = document.getElementById('last-update');
        if (updateElement) {
            const now = new Date();
            const seconds = Math.floor((now.getTime() / 1000) % 60);
            updateElement.textContent = `Updated ${seconds}s ago`;
        }
    }, 1000);

    // Make functions globally available
    window.switchChartView = switchChartView;
    window.getCurrentView = getCurrentView;
    window.showStockTooltip = showStockTooltip;
    window.showTooltip = showTooltip;
    window.showOperationTooltip = showOperationTooltip;
    window.hideTooltip = hideTooltip;
    window.showDrillThrough = showDrillThrough;
    window.showConvoyTooltip = showConvoyTooltip;
    window.showGanttTooltip = showGanttTooltip;
    window.refreshConvoyData = refreshConvoyData;
    window.toggleMapView = toggleMapView;
    window.switchForecastPeriod = switchForecastPeriod;
    window.toggleForecastCategory = toggleForecastCategory;
    window.showForecastTooltip = showForecastTooltip;
    window.toggleRiskLayer = toggleRiskLayer;
    window.highlightRiskZone = highlightRiskZone;
    window.unhighlightRiskZone = unhighlightRiskZone;
    window.showRiskDetails = showRiskDetails;
    window.refreshRiskData = refreshRiskData;
    window.toggleFullscreen = toggleFullscreen;
    window.initializeLogistics = initializeLogistics;

})();



        // Close modal when clicking outside
        document.getElementById('detail-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });
        
        
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9926172fa1facac4',t:'MTc2MTEwNTY1Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
